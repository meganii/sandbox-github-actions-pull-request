;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-fx-collection",ev:"0.1",l:!0,f:function(t,s){(()=>{var s;function n(t){const s=Object.getOwnPropertyDescriptor(t,"message");if(null!=s&&s.writable)return t;const{message:n,stack:i}=t,e=new Error(n);for(const s in t)e[s]=t[s];return e.stack=i,e}function i(t){let s=null,i="";for(const t of arguments)t instanceof Error&&!s?s=n(t):(i&&(i+=" "),i+=t);return s?i&&(s.message=i+": "+s.message):s=new Error(i),s}function e(t){var s,n;null===(s=(n=self).__AMP_REPORT_ERROR)||void 0===s||s.call(n,t)}var{hasOwnProperty:r,toString:o}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var a=self.__AMP_LOG;function u(t,s){throw new Error("failed to call initLogConstructor")}function c(t){return u()}function l(t,s,n,i,e,r,o,a,u,c,l){return t}function h(t,s,n,i,e,r,o,u,l,h,f){return(a.user||(a.user=c()),void a.user.win?a.userForEmbed||(a.userForEmbed=c()):a.user).assert(t,s,n,i,e,r,o,u,l,h,f)}var f,d=["fade-in","fade-in-scroll","float-in-bottom","float-in-top","fly-in-bottom","fly-in-left","fly-in-right","fly-in-top","parallax"],v=d[0],p=d[1],m=d[2],b=d[3],g=d[4],_=d[5],A=d[6],P=d[7],y=d[8],w={[v]:{observes:0,opacity:!0},[p]:{observes:0,opacity:!0},[m]:{observes:1,translates:{y:!0}},[b]:{observes:1,translates:{y:!0}},[g]:{observes:0,translates:{y:!0}},[_]:{observes:0,translates:{x:!0}},[A]:{observes:0,translates:{x:!0}},[P]:{observes:0,translates:{y:!0}},[y]:{observes:0,translates:{y:!0}}};function E(t,s){if(t==s)return!1;const{observes:n,opacity:i,translates:e}=w[t],{observes:r,opacity:o,translates:a}=w[s];if(n!==r)return!1;if(i&&o)return!1;if(e&&a){if(e.x&&a.x)return!1;if(e.y&&a.y)return!1}return!0}function x(t){return h(d.indexOf(t)>-1,"Invalid amp-fx type `%s`",t)}var M=["Webkit","webkit","Moz","moz","ms","O","o"],R={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function I(t){const s=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return M.some((t=>s.startsWith(t+"-")))?`-${s}`:s}function V(t,s,n){if(s.startsWith("--"))return s;f||(f=Object.create(null));let i=f[s];if(!i||n){if(i=s,void 0===t[s]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(s),e=function(t,s){for(let n=0;n<M.length;n++){const i=M[n]+s;if(void 0!==t[i])return i}return""}(t,n);void 0!==t[e]&&(i=e)}n||(f[s]=i)}return i}function T(t,s){const{style:n}=t;for(const t in s)n.setProperty(I(V(n,t)),String(s[t]),"important")}function $(t,s,n,i,e){const r=V(t.style,s,e);if(!r)return;const o=i?n+i:n;t.style.setProperty(I(r),o)}function z(t,s){for(const n in s)$(t,n,s[n])}function F(t){return`${t}px`}function O(t,s){return t.getComputedStyle(s)||R}function S(t){return"display"in t&&function(t,...s){const n=i.apply(null,s);n.name=t||n.name,e(n)}("STYLE","`display` style detected. You must use toggle instead."),t}function C(t,s,n,i){const e=H(t),r=Y(e);!function(t,s,n,i,e,r){const o=X(t);let a=o[n];a||(a=o[n]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=i,a.context=s,a.sharedInstance=!1,a.resolve&&N(t,n))}(r,e,s,n),i&&N(r,s)}function j(t,s){return N(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),s)}function k(t,s){return N(Y(H(t)),s)}function H(t){return t.nodeType?(n=t,s=(n.ownerDocument||n).defaultView,j(s,"ampdoc")).getAmpDoc(t):t;var s,n}function Y(t){const s=H(t);return s.isSingleDoc()?s.win:s}function N(t,s){l(function(t,s){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[s];return!(!n||!n.ctor)}(t,s));const n=X(t)[s];return n.obj||(l(n.ctor),l(n.context),n.obj=new n.ctor(n.context),l(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function X(t){let s=t.__AMP_SERVICES;return s||(s=t.__AMP_SERVICES={}),s}var L=t=>k(t,"mutator"),W=t=>k(t,"viewport");function B(t,s){return!(!t||!s)&&t.left==s.left&&t.top==s.top&&t.width==s.width&&t.height==s.height}function Z(t,s,n){l("X"==s||"Y"==s),l(1==Math.abs(n));const i=t.element,e="X"==s,r=n*t.flyInDistance+(e?"vw":"vh");t.initialTrigger||(L(i).mutateElement(i,(()=>{const s=O(t.win,i),n=e?"left":"top",o="auto"===s[n]?"0px":s[n],a={position:"static"===s.position?"relative":s.position,visibility:"visible"};a[n]=`calc(${o} - ${r})`,z(i,S(a))})),t.initialTrigger=!0),z(i,{"transition-duration":t.duration,"transition-timing-function":t.easing,"transform":`translate${s}(${r})`})}function q(t){const s=parseFloat(t.getAttribute("data-margin-start"));return s&&h(s>=0&&s<=100,"data-margin-start must be a percentage value and be between 0% and 100% for: %s",t),s}function D(t){return t&&t.positionRect?t.positionRect.top:null}function G(t,s,n){const i=D(t);return l(1==Math.abs(n)),!!i&&i+n*s.viewportHeight*s.flyInDistance/100<=(1-s.marginStart)*s.viewportHeight}function J(t,s,n){const i=D(t),e=void 0!==n?n:s.viewportHeight;return!!i&&i<=(1-s.marginStart)*e}var K={[y]:{userAsserts(t){const s=h(t.getAttribute("data-parallax-factor"),"data-parallax-factor=<number> attribute must be provided for: %s",t);h(parseFloat(s)>0,"data-parallax-factor must be a number and greater than 0 for: %s",t)},update(t){const s=this,n=D(t);if(l(s.adjustedViewportHeight),!n||n>s.adjustedViewportHeight)return;const i=-(parseFloat(s.factor)-1),e=(s.adjustedViewportHeight-n)*i;s.offset=e,z(s.element,{transform:`translateY(${s.offset.toFixed(0)}px)`})}},[g]:{userAsserts:q,update(t){const s=this;l(s.viewportHeight),G(t,s,-1)&&Z(s,"Y",-1)}},[_]:{userAsserts:q,update(t){const s=this;l(s.viewportHeight),J(t,s)&&Z(s,"X",1)}},[A]:{userAsserts:q,update(t){const s=this;l(s.viewportHeight),J(t,s)&&Z(s,"X",-1)}},[P]:{userAsserts:q,update(t){const s=this;l(s.viewportHeight),G(t,s,1)&&Z(s,"Y",1)}},[v]:{userAsserts:q,update(t){const s=this;l(s.viewportHeight),J(t,s)&&z(s.element,{"transition-duration":s.duration,"transition-timing-function":s.easing,"opacity":1})}},[p]:{userAsserts(t){const s=q(t),n=parseFloat(t.getAttribute("data-margin-end"));n&&(h(n>=0&&n<=100,"data-margin-end must be a percentage value and be between 0% and 100% for: %s",t),h(n>s,"data-margin-end must be greater than data-margin-start for: %s",t))},update(t){const s=this,{marginStart:n,viewportHeight:i}=s;if(l(s.adjustedViewportHeight),!J(t,s,s.adjustedViewportHeight))return;if(!s.hasRepeat&&s.offset>=1)return;const e=1*(i-D(t)-n*i)/((s.marginEnd-n)*i);s.offset=e,z(s.element,{opacity:s.offset})}}};function Q(t){const s=parseFloat(t);return isNaN(s)?null:s/100}function U(t){switch(t){case v:case A:case _:case P:case g:return{"start":.05};case p:return{"start":0,"end":.5};default:return{"start":0,"end":1}}}function tt(t,s,n,i,e){return t[s]==n||(st(i),!1)}function st(t,s=0){const{classList:n,id:i,parentElement:e,tagName:r}=t;if(i)return`#${i}`;let o=r.toLowerCase();if(n.length>0){const t=n.length>1?"...":"";o+=`.${n[0]}${t}`}if(!e)return`${o} (detached)`;const{firstElementChild:a,lastElementChild:u}=e;return t==a&&t==u||(t==a?o+=":first-child":t==u&&(o+=":last-child")),s>0?o:`${st(e,s+1)} > ${o}`}t.registerServiceForDoc("amp-fx-collection",class{constructor(t){this.ji=t,this.b$=[],Promise.all([t.whenReady(),t.whenFirstVisible()]).then((()=>{const t=this.ji.getRootNode();this.g$(),function(t,n,i,e){let r=t,o=i;const a=function(){if(void 0!==s)return s;s=!1;try{const t={get capture(){return s=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return s}();r.addEventListener("amp:dom-update",(t=>{try{return o(t)}catch(t){var s,n;throw null===(s=(n=self).__AMP_REPORT_ERROR)||void 0===s||s.call(n,t),t}}),!!a&&e)}(t,0,(()=>this.g$()),void 0)}))}g$(){this.ji.getRootNode().querySelectorAll("[amp-fx]").forEach((t=>{this.b$.includes(t)||function(t,...s){try{t.apply(null,s)}catch(t){!function(t){const s=i.apply(null,arguments);setTimeout((()=>{throw e(s),s}))}(t)}}((()=>this.y$(t)))}))}y$(t){l(t.hasAttribute("amp-fx")),l(!this.b$.includes(t)),l(this.ji.isVisible()),function(t){l(t.hasAttribute("amp-fx"));const s=t.getAttribute("amp-fx").trim().toLowerCase().split(/\s+/);return h(s.length,"No value provided for `amp-fx` attribute"),function(t){for(let s=0;s<t.length;s++){const n=t[s];for(let i=s+1;i<t.length;i++)E(n,t[i])||t.splice(i--,1)}return t}(s.filter(x))}(t).forEach((s=>{this.x$(t,s)})),this.b$.push(t)}x$(t,s){const{observes:n}=l(w[s]);1!=n?function(t,s,n){(function(t){C(t,"position-observer",class{constructor(t){this.ji=t,this.i=t.win,this.tO=[],this.Xh=j(this.i,"vsync"),this.Tc=W(t),this.O_=[],this.iO=!1,this.sO=!1,this.nO=!1,this.hO=function(t,s,n){let i=0,e=0,r=null;function o(){i=0;const n=500-(t.Date.now()-e);var a;n>0?i=t.setTimeout(o,n):(a=r,r=null,s.apply(null,a))}return function(...s){e=t.Date.now(),r=s,i||(i=t.setTimeout(o,500))}}(this.i,(()=>{this.iO=!1}))}observe(t,s,n){const i=new class{constructor(t,s,n,i){this.element=s,this.Xe=i,this.fidelity=n,this.turn=0==n?Math.floor(4*Math.random()):0,this.eO=null,this.Tc=W(t)}Ye(t){const s=this.eO;if(s&&B(s.positionRect,t.positionRect)&&B(s.viewportRect,t.viewportRect))return;l(t.positionRect);const n=t.positionRect;var i,e;t.relativePos=(i=n,e=t.viewportRect,i.top<e.top?"top":i.bottom>e.bottom?"bottom":"inside"),function(t,s){return t.top<=s.bottom&&s.top<=t.bottom&&t.left<=s.right&&s.left<=t.right}(n,t.viewportRect)?(this.eO=t,this.Xe(t)):this.eO&&(this.eO=null,t.positionRect=null,this.Xe(t))}update(t){if(!t){if(0!=this.turn)return void this.turn--;0==this.fidelity&&(this.turn=4)}const s=this.Tc.getSize(),n={left:0,top:0,width:i=s.width,height:e=s.height,bottom:0+e,right:0+i,x:0,y:0};var i,e;this.Tc.getClientRectAsync(this.element).then((t=>{this.Ye({positionRect:t,viewportRect:n,relativePos:null})}))}}(this.ji,t,s,n);return this.tO.push(i),this.nO||this.rO(),i.update(),()=>{for(let t=0;t<this.tO.length;t++)if(this.tO[t]==i)return void this.oO(t)}}unobserve(t){for(let s=0;s<this.tO.length;s++)if(this.tO[s].element==t)return void this.oO(s);(a.dev||(a.dev=u())).error("POSITION_OBSERVER","cannot unobserve unobserved element")}oO(t){this.tO.splice(t,1),0==this.tO.length&&this.lO()}rO(){this.nO=!0,this.O_.push(this.Tc.onScroll((()=>{this.uO()}))),this.O_.push(this.Tc.onResize((()=>{this.cO()})))}lO(){for(this.nO=!1;this.O_.length;)this.O_.pop()()}updateAllEntries(t){for(let s=0;s<this.tO.length;s++)this.tO[s].update(t)}uO(){this.hO(),this.iO=!0,this.sO||this.aO()}cO(){this.updateAllEntries(!0)}aO(){this.updateAllEntries(),this.sO=!0,this.iO?this.Xh.measure((()=>{this.aO()})):this.sO=!1}})})(t),new class{constructor(t,s,n){this.win=t.win,this.In=(t=>k(t,"position-observer"))(s),this.Tc=W(s),this.ja=L(s),this.viewportHeight=null,this.adjustedViewportHeight=null,this.element=s,this.offset=0,this.M$=n,K[n].userAsserts(s),this.factor=parseFloat(s.getAttribute("data-parallax-factor")),this.marginStart=s.hasAttribute("data-margin-start")?Q(s.getAttribute("data-margin-start")):U(n).start,this.marginEnd=s.hasAttribute("data-margin-end")?Q(s.getAttribute("data-margin-end")):U(n).end,this.easing=function(t){const s={"linear":"cubic-bezier(0.00, 0.00, 1.00, 1.00)","ease-in-out":"cubic-bezier(0.80, 0.00, 0.20, 1.00)","ease-in":"cubic-bezier(0.80, 0.00, 0.60, 1.00)","ease-out":"cubic-bezier(0.40, 0.00, 0.40, 1.00)"};return s[t]?s[t]:(h(t.startsWith("cubic-bezier"),"All custom bezier curves should be specified by following the `cubic-bezier()` function notation."),t)}(s.hasAttribute("data-easing")?s.getAttribute("data-easing"):function(t){switch(t){default:return"ease-in";case A:case _:case P:case g:return"ease-out"}}(n)),this.duration=s.hasAttribute("data-duration")?s.getAttribute("data-duration"):function(t,s){switch(s){case v:return"1000ms";case g:case P:case _:case A:const{width:s}=W(t).getSize();return(n=Math.min(1e3,s))<480?n=480:n>1e3&&(n=1e3),200*(n-480)/520+400+"ms";default:return"1ms"}var n}(t,n),this.flyInDistance=s.hasAttribute("data-fly-in-distance")?parseFloat(s.getAttribute("data-fly-in-distance")):function(t,s){switch(s){case g:case P:const{width:s}=W(t).getSize();return s<1e3?25:33;case _:case A:return 100;default:return 1}}(t,n),this.hasRepeat=s.hasAttribute("data-repeat"),this.initialTrigger=!1,this.I$().then((t=>{this.adjustedViewportHeight=t,this.V$()})),this.T$()}V$(){this.In.observe(this.element,1,K[this.M$].update.bind(this)),this.Tc.onResize((()=>{this.T$(),this.I$().then((t=>{this.adjustedViewportHeight=t}))}))}T$(){this.ja.measureElement((()=>{this.viewportHeight=this.Tc.getHeight()}))}I$(){return this.ja.measureElement((()=>{const t=this.Tc.getHeight();let s=0;for(let t=this.element;t;t=t.offsetParent)s+=t.offsetTop;return s<t?s:t}))}}(t,s,n),z(s,S(function(t,s){switch(s){case y:case g:case P:case _:case A:return{"will-change":"transform"};case v:case p:return{"will-change":"opacity","opacity":0};default:return{"visibility":"visible"}}}(0,n)))}(this.ji,t,s):function(t,s,n){if((i=s,k(i,"viewer")).isEmbedded())return;var i;const e="fx-scroll-dispatch";C(t,e,class{constructor(t){this.ji=t,this.Zl=new class{constructor(){this.Fn=null}add(t){return this.Fn||(this.Fn=[]),this.Fn.push(t),()=>{this.remove(t)}}remove(t){this.Fn&&function(t,s){const n=t.indexOf(s);-1!=n&&t.splice(n,1)}(this.Fn,t)}removeAll(){this.Fn&&(this.Fn.length=0)}fire(t){if(this.Fn)for(const s of this.Fn.slice())s(t)}getHandlerCount(){var t,s;return null!==(t=null===(s=this.Fn)||void 0===s?void 0:s.length)&&void 0!==t?t:0}},this.$$=function(t){let s=!1,n=null,i=t;return(...t)=>(s||(n=i.apply(self,t),s=!0,i=null),n)}((()=>this.tc())),this.z$=0,this.F$=0,this.O$=!0}observe(t){this.Zl.add(t),this.$$()}tc(){const t=W(this.ji);t.onScroll((()=>{this.S$(t.getScrollTop())}))}S$(t){this.F$=t;const s=this.F$-this.z$;return(!this.O$&&s>0||this.O$&&s<0)&&(this.z$=this.F$),!this.O$&&this.F$<=36||!this.O$&&s<-20?(this.C$(!0),void(this.z$=this.F$)):void(this.O$&&s>80&&(this.C$(!1),this.z$=this.F$))}C$(t){this.O$!=t&&(this.O$=t,this.Zl.fire(t))}});const r=k(t,e),o=L(s);let a=!0;o.measureMutateElement(s,(()=>{const i=O(t.win,s),e=function(t,s,n){const i=s.replace(/^float\-in\-([^\s]+)$/,"$1");return l(i.length>0),tt(n,i,F(0),t)?i:null}(s,n,i),o=function(t,s){return tt(s,"overflow","hidden",t)&&tt(s,"position","fixed",t)}(s,i);e&&o?r.observe((t=>{!function(t,s,n){let i=0;L(t).measureMutateElement(t,(()=>{i=function(t,s,n){if(s)return 0;const i=t.getBoundingClientRect().height;return"top"==n?-i:i}(t,s,n)}),(()=>{!function(t,s){T(t,{"transition":"transform 300ms ease","transform":`translate(0, ${F(s)})`})}(t,i)}))}(s,t,l(e))})):a=!1}),(()=>{a&&function(t){T(t,{"will-change":"transform"})}(s)}))}(this.ji,t,s)}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-fx-collection-0.1.mjs.map
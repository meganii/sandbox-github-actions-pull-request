;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-apester-media",ev:"0.1",l:!0,f:function(t,n){(()=>{var{isArray:n}=Array,{hasOwnProperty:e,toString:i}=Object.prototype;function r(t,n){return e.call(t,n)}function o(t,n){if("."==n)return t;const e=n.split(".");let i=t;for(const t of e){if(!(t&&i&&void 0!==i[t]&&"object"==typeof i&&r(i,t))){i=void 0;break}i=i[t]}return i}function a(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function s(t){return(t.ownerDocument||t).defaultView}function l(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function c(t,n,e){return function(t,n){for(const e in n)t.setAttribute(e,n[e]);return t}(t.createElement(n),e)}function u(t){const n=parseFloat(t);return"number"==typeof(e=n)&&isFinite(e)?n:void 0;var e}function p(t,n,e={}){const{needsRootBounds:i,rootMargin:r,threshold:o}=e,a=function(t){return t.parent&&t.parent!=t}(n)&&(i||r)?n.document:void 0;return new n.IntersectionObserver(t,{threshold:o,root:a,rootMargin:r})}var h,m=new WeakMap,f=new WeakMap;function d(t){const n=new Set;for(let e=t.length-1;e>=0;e--){const i=t[e],{target:r}=i;if(n.has(r))continue;n.add(r);const o=f.get(r);if(o)for(let t=0;t<o.length;t++)(0,o[t])(i)}}function g(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:i}=t,r=new Error(e);for(const n in t)r[n]=t[n];return r.stack=i,r}function b(t){let n=null,e="";for(const t of arguments)t instanceof Error&&!n?n=g(t):(e&&(e+=" "),e+=t);return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function v(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}var w=["Webkit","webkit","Moz","moz","ms","O","o"];function y(t,n,e,i,r){const o=function(t,n,e){if(n.startsWith("--"))return n;h||(h=Object.create(null));let i=h[n];if(!i||e){if(i=n,void 0===t[n]){const e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),r=function(t,n){for(let e=0;e<w.length;e++){const i=w[e]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[r]&&(i=r)}e||(h[n]=i)}return i}(t.style,n,r);if(!o)return;const a=i?e+i:e;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return w.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(o),a)}function k(t,n){for(const e in n)y(t,e,n[e])}function _(t){return`${t}px`}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var x,A=self.__AMP_LOG;function P(t,n){throw new Error("failed to call initLogConstructor")}function I(t){return A.user||(A.user=$()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(A.user.win,t)?A.userForEmbed||(A.userForEmbed=$()):A.user}function $(t){return P()}function M(){return A.dev||(A.dev=P())}function O(t,n,e,i,r,o,a,s,l,c,u){return t}function E(t,n){return C(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function T(t,n){return C(S(z(t)),n)}function R(t,n){return j(S(t),n)}function z(t){return t.nodeType?(n=s(t),E(n,"ampdoc")).getAmpDoc(t):t;var n}function S(t){const n=z(t);return n.isSingleDoc()?n.win:n}function C(t,n){O(function(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}(t,n));const e=V(t)[n];return e.obj||(O(e.ctor),O(e.context),e.obj=new e.ctor(e.context),O(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function j(t,n){const e=V(t)[n];return e?e.promise?e.promise:(C(t,n),e.promise=Promise.resolve(e.obj)):null}function V(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var D,L,U=t=>T(t,"documentInfo").get(),N=t=>E(t,"extensions"),q=t=>T(t,"mutator"),F=t=>function(t,n,e,i){const r=R(t,n);if(r)return r;const o=z(t);return o.whenExtensionsKnown().then((()=>{const t=o.getExtensionVersion(e);return t?E(o.win,"extensions").waitForExtension(e,t):null})).then((e=>e?function(t,n){return function(t,n){const e=j(t,n);if(e)return e;const i=V(t);return i[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:e,resolve:i}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:i,reject:e,context:null,ctor:null}}(),i[n].promise}(S(t),n)}(t,n):null))}(t,"consentPolicyManager","amp-consent");function J(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function B(t){return t.data}function W(t,e){return function(t,n,e){if(!n)return t;const i=t.split("#",2),r=i[0].split("?",2);let o=r[0]+(r[1]?`?${r[1]}&${n}`:`?${n}`);return o+=i[1]?`#${i[1]}`:"",o}(t,function(t){const e=[];for(const a in t){let s=t[a];if(null!=s){s=n(o=s)?o:[o];for(let t=0;t<s.length;t++)e.push((i=a,r=s[t],`${encodeURIComponent(i)}=${encodeURIComponent(r)}`))}}var i,r,o;return e.join("&")}(e))}new Set(["c","v","a","ad"]);var G="unlisten";function H(t,n,e){const i=function(t,n){let{listeningFors:e}=t;return!e&&n&&(e=t.listeningFors=Object.create(null)),e||null}(t,e);if(!i)return i;let r=i[n];return!r&&e&&(r=i[n]=[]),r||null}function X(t,n){for(let e=n;e&&e!=e.parent;e=e.parent)if(e==t)return!0;return!1}function Y(t){const n={"sentinel":G};for(let e=t.length-1;e>=0;e--){const i=t[e];if(!i.frame.contentWindow){t.splice(e,1);const{events:r}=i;for(const t in r)r[t].splice(0,1/0).forEach((t=>{t(n)}))}}}function Z(t,n,e,i,r,o){O(t.src),O(!t.parentNode),O(e);const s=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(!B(n))return;const e=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?a(t,(t=>{}))||null:J(t)?function(t){if(!J(t))return null;const n=t.indexOf("{");return a(t.substr(n),(n=>{!function(t){const n=b.apply(null,arguments);setTimeout((()=>{throw v(n),n}))}(new Error(`MESSAGING: Failed to parse message: ${t}\n${n.message}`))}))}(t):null),t}(B(n));if(!e||!e.sentinel)return;const i=function(t,n,e,i){const r=H(t,n);if(!r)return r;let o;for(let t=0;t<r.length;t++){const n=r[t],{contentWindow:e}=n.frame;if(e){if(i==e||X(e,i)){o=n;break}}else setTimeout(Y,0,r)}return o?o.events:null}(t,e.sentinel,n.origin,n.source);if(!i)return;let r=i[e.type];if(r){r=r.slice();for(let t=0;t<r.length;t++)(0,r[t])(e,n.source,n.origin,n)}}))}(s);const l=function(t,n,e){const i=H(t,K(n,e),!0);let r;for(let t=0;t<i.length;t++){const e=i[t];if(e.frame===n){r=e;break}}return r||(r={frame:n,events:Object.create(null)},i.push(r)),r.events}(s,t,i),c=(u=t.src,L||(L=self.document.createElement("a")),function(t,n,e){return t.href="",new URL(n,t.href)}(L,u)).origin;var u;let p,h=l[n]||(l[n]=[]),m=function(n,i,a,s){if("amp"==n.sentinel){if(i!=t.contentWindow)return;const n="null"==a&&o;if(c!=a&&!n)return}(r||i==t.contentWindow)&&(n.sentinel!=G?e(n,i,a,s):p())};return h.push(m),p=function(){if(m){const t=h.indexOf(m);t>-1&&h.splice(t,1),m=null,h=null,e=null}}}function K(t,n){return n?t.getAttribute("data-amp-3p-sentinel"):"amp"}var Q=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];function tt(t){return{"time":t.time,"rootBounds":t.rootBounds,"boundingClientRect":t.boundingClientRect,"intersectionRect":t.intersectionRect,"intersectionRatio":t.intersectionRatio}}function nt(t){const n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}Date.now();var et="amp-apester-media";function it(t,n,e){const{skipTimer:i}=e;t.classList.add("active"),y(n,"animation",`progress ${i}s linear 1`);const r=setTimeout((()=>{t.classList.remove("active"),clearTimeout(r)}),1e3*i)}var rt=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig");function ot(){const t=!!navigator.userAgent.match(rt);return function(){const t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}()?"mobile"+(t?"-webview":""):"desktop"}function at(t,n){const e=function(t){const n=t&&t.getAttribute("data-apester-tags");return n&&n.split(",").map((t=>t.trim()))||[]}(n)||[],i=function(t){return(t.getMetaByName("keywords")||"").split(",").map((t=>t.trim())).filter(Boolean)}(t);return e.concat(i.length?i:(r=t.getRootNode(),((o=r.querySelectorAll('script[type="application/ld+json"]'))?Array.prototype.slice.call(o):[]).map((t=>{return t&&"SCRIPT"==(n=t).tagName&&"APPLICATION/LD+JSON"==(null===(e=n.getAttribute("type"))||void 0===e?void 0:e.toUpperCase())&&a(t.textContent)||{};var n,e})).map((t=>t&&t.headline)).filter((t=>"string"==typeof t)).map((t=>t.trim().split(" ").filter((t=>t.length>2)))).reduce(((t,n)=>t.concat(n)),[]).slice(0,5)||[])).map((t=>t.toLowerCase().trim())).filter(((t,n,e)=>e.indexOf(t)===n));var r,o}function st(t,n,e,i,r){const o=function(e,r,o,a){let s=e,l=e=>{const r=i.contentWindow===e.source;B(e).type===t&&r&&n(B(e))},c=t=>{try{return l(t)}catch(t){var n,e;throw null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t),t}};const u=function(){if(void 0!==D)return D;D=!1;try{const t={get capture(){return D=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return D}();return s.addEventListener(r,c,!!u&&a),()=>{null==s||s.removeEventListener(r,c,!!u&&a),l=null,s=null,c=null}}(e,"message",0,void 0);r.push(o)}var lt="amp-apester-media",ct={"type":"has_bottom_ad","adHeight":50},ut=class extends t.BaseElement{constructor(t){super(t),this.k6="https://renderer.apester.com",this.O6="https://display.apester.com",this.T6="https://static.qmerce.com",this.z6="https://static.apester.com/js/assets/loader_100x100.gif",this.b$=!1,this.Lv=null,this.Tv=null,this.C6=null,this.j6=null,this.V6=!1,this.D6=!1,this.L6=null,this.U6={},this.pb=null,this.O_=[],this.Gv=null,this.oj=null}preconnectCallback(t){const n=E(this.win,"preconnect");n.url(this.getAmpDoc(),this.O6,t),n.url(this.getAmpDoc(),this.k6,t),n.url(this.getAmpDoc(),this.T6,t)}isLayoutSupported(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)}lj(t){t&&!this.b$&&this.Lv&&this.Lv.contentWindow&&(this.b$=!0,this.Lv.contentWindow.postMessage("interaction seen","*"))}buildCallback(){const t=this.element.getAttribute("width"),n=this.element.getAttribute("height");var e,i;this.C6=u(t),this.j6=u(n),this.V6=this.element.hasAttribute("data-apester-channel-token"),this.L6=(e=this.element.getAttribute("data-apester-media-id")||this.element.getAttribute("data-apester-channel-token"),"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",i=this.element,I().assert(e,"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",i,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.U6={playlist:this.V6,idOrToken:this.L6,inative:"true"===this.element.getAttribute("data-apester-inative"),fallback:this.element.getAttribute("data-apester-fallback"),distributionChannelId:this.element.getAttribute("data-apester-channel-id"),renderer:!0,tags:at(this.getAmpDoc(),this.element)}}N6(){const{distributionChannelId:t,fallback:n,idOrToken:e,inative:i,playlist:r,tags:o}=this.U6,a=encodeURIComponent(this.L6);let s="";const l={renderer:!1};return l.platform=ot(),i?e?s=`/inatives/${e}`:t&&(s=`/channels/${t}/inatives`):r&&o?(s=`/tokens/${a}/interactions/random`,l.tags=o,l.fallback=!!n):s=r?`/tokens/${a}/interactions/random`:`/interactions/${a}/display`,W(`${this.O6}${s}`,l)}q6(){const t=this.N6();return(n=this.win,E(n,"xhr")).fetchJson(t,{}).then((t=>200===t.status?t.json():t));var n}F6(t,n){const e={};return e.channelId=this.U6.distributionChannelId,e.type=this.U6.playlist?"playlist":"editorial",e.platform=ot(),e.cannonicalUrl=U(this.element).canonicalUrl,e.sdk="amp",W(`${this.k6}/${n?"v2":"interaction"}/${encodeURIComponent(t)}`,e)}J6(t){const n=this.element.ownerDocument.createElement("iframe");return n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),n.setAttribute("scrolling","no"),n.src=t,n.name=this.win.location.href,n.height=this.j6,n.width=this.C6,n.classList.add("amp-apester-iframe"),n.classList.add("i-amphtml-fill-content"),n}B6(){const t=this.element.ownerDocument.createElement("img");return t.setAttribute("loading","lazy"),t.setAttribute("src",this.z6),k(t,{"width":_(100),"height":_(100)}),t}W6(){const t=this.element.ownerDocument.createElement("div");t.setAttribute("overflow",""),t.className="amp-apester-overflow";const n=this.element.ownerDocument.createElement("button");return n.textContent="Full Size",t.appendChild(n),t}layoutCallback(){this.element.classList.add("amp-apester-container");const t=E(this.win,"vsync");return this.q6().then((n=>{if(!n||204===n.status)return this.unlayoutCallback();const e=n.payload,i=this.U6.playlist?e[Math.floor(Math.random()*e.length)]:e,r=i.interactionId,a=i.usePlayer,l=this.F6(r,a),u=this.J6(l);return this.Gv=new class{constructor(t,n){this.Xv=t,this.Kv=null,this.Zv=new class{constructor(t,n,e,i){this.Lv=t,this.Qv=e,this.tb=[],this.nb=Z(this.Lv,n,((t,n,e)=>{this.tb.some((t=>t.win==n))||this.tb.push({win:n,origin:e}),i(t,n,e)}),this.Qv,this.Qv)}send(t,n){(function(t,n){const e=[];let i=0;for(let n=0;n<t.length;n++){const r=t[n];r.win.parent?(i<n&&(t[i]=r),i++):e.push(r)}i<t.length&&(t.length=i)})(this.tb),function(t,n,e,i,r){if(!t.contentWindow)return;i.type=e,i.sentinel=K(t,r);let o=i;r&&(o="amp-"+JSON.stringify(i));for(let t=0;t<n.length;t++){const e=n[t];e.win.postMessage(o,e.origin)}}(this.Lv,this.tb,t,n,this.Qv)}destroy(){this.nb(),this.tb.length=0}}(n,"send-intersections",!1,(()=>{this.eb()})),this.Kv=new IntersectionObserver((t=>{this.Zv.send("intersection",{"changes":t.map(tt)})}),{threshold:Q})}eb(){this.Kv.observe(this.Xv.element)}destroy(){this.Kv.disconnect(),this.Kv=null,this.Zv.destroy(),this.Zv=null}}(this,u),this.pb=r,this.Lv=u,this.G6(),t.mutatePromise((()=>{const t=this.W6();this.element.appendChild(t),this.element.appendChild(u),function(t,n){const e=t.campaignData;e&&!e.disabledAmpCompanionAds?function(t){const n=function(t,n="default"){return F(t).then((t=>t?t.whenPolicyResolved(n):null))}(t).catch((t=>(M().error(et,"Error determining consent state",t),4))),e=function(t,n="default"){return F(t).then((t=>t?t.getConsentStringInfo(n):null))}(t,"default").catch((t=>{M().error(et,"Error determining consent string",t)})),i=Promise.all([n,e]);return Promise.race([i,new Promise((t=>{setTimeout((()=>{t([4,void 0])}),3e3)}))]).then((t=>{const n=t[0],e=t[1];switch(n){case 1:return{"gdpr":1,"user_consent":1,"gdprString":e};case 2:case 4:return{"gdpr":1,"user_consent":0,"gdprString":e};default:return{}}}))}(n).then((e=>{(function(t,n){const e=o(t,"campaignData.companionOptions");if(!e)return;const i=o(e,"enabled"),r=o(e,"settings"),a=o(e,"rtcConfig");if(i&&r&&"gdt"===r.bannerAdProvider){const t=r.slot,e=6e4===r.options.autoRefreshTime?60:30,i=[[300,250]];!function(t,n,e,i,r){const o=Math.max.apply(null,n.map((t=>t[0]))),a=Math.max.apply(null,n.map((t=>t[1]))),s=n.map((t=>t.join("x"))).join(),l=c(e.ownerDocument,"amp-ad",{"width":`${o}`,"height":`${a}`,"type":"doubleclick","layout":"fixed","data-slot":`${t}`,"data-multi-size-validation":"false","data-multi-size":s,"data-enable-refresh":`${i}`});r&&l.setAttribute("rtc-config",JSON.stringify(r)),l.classList.add("i-amphtml-amp-apester-companion"),e.parentNode.insertBefore(l,e.nextSibling),q(e).requestChangeSize(l,a,void 0)}(t,r.bannerSizes||i,n,e,a)}})(t,n),function(t,n,e){const i=o(t,"campaignData.companionCampaignOptions"),r=o(t,"campaignData.companionOptions.video"),a=(s=r)?s.companion.enabled?"above":s.companion_below.enabled?"below":s.floating.enabled?"floating":null:null;var s;if(r&&r.enabled&&a&&"floating"!==a)switch(r.provider){case"sr":{const o=null==i?void 0:i.companionCampaignId,{videoTag:s}=r;if(!o||!s)return;const l=function(t,n,e,i){const r=t.interactionId,o=t.publisherId,a=t.publisher,s={"param1":r,"param2":o,"param6":n,"page_url":U(e).canonicalUrl};return i.gdpr&&(s.gdpr=i.gdpr,s.user_consent=i.user_consent,s.param4=i.gdprString),a&&a.groupId&&(s.param7=`apester.com:${a.groupId}`,s.schain=`1.0,1!apester.com,${a.groupId},1,,,,`),s}(t,o,n,e);!function(t,n,e,i){const r=nt(i),o=c(i.ownerDocument,"amp-ad",{"width":r.width,"height":r.height,"type":"blade","layout":"fixed","data-blade_player_type":"bladex","servingDomain":"ssr.streamrail.net","data-blade_macros":JSON.stringify(e),"data-blade_player_id":t,"data-blade_api_key":"5857d2ee263dc90002000001","data-enable-refresh":"30"});o.classList.add("i-amphtml-amp-apester-companion");const a="below"===n?i.nextSibling:i;i.parentNode.insertBefore(o,a),q(i).requestChangeSize(o,r.height)}(s,a,l,n);break}case"aniview":{const{playerOptions:t={}}=r;if(!t.aniviewChannelId)return;!function(t,n,e,i){const r=nt(e),o=c(e.ownerDocument,"amp-iframe",{"scrolling":"no","id":"amp-iframe","title":"Ads","layout":"responsive","sandbox":"allow-scripts allow-same-origin allow-popups","allowfullscreen":"false","frameborder":"0","width":r.width,"height":r.height,"src":`https://player.avplayer.com/amp/ampiframe.html?AV_TAGID=${t.aniviewPlayerId}&AV_PUBLISHERID=5fabb425e5d4cb4bbc0ca7e4`});i.gdpr&&(o["data-av_gdpr"]=i.gdpr,o["data-av_consent"]=i.user_consent),o.classList.add("i-amphtml-amp-apester-companion");const a="below"===n?e.nextSibling:e;e.parentNode.insertBefore(o,a),q(e).requestChangeSize(o,r.height)}(t,a,n,e);break}}}(t,n,e),function(t,n){const e=o(t,"campaignData.bottomAdOptions");if(!e)return;const i=o(e,"enabled"),r=o(e,"rtcConfig");i&&"gpt"===e.videoPlayer&&function(t,n,e,i){const r=n[0][0],o=n[0][1],a=c(e.ownerDocument,"amp-ad",{"width":`${r}`,"height":`${o}`,"type":"doubleclick","layout":"fixed","data-slot":`${t}`,"data-multi-size-validation":"false","data-enable-refresh":"30"});i&&a.setAttribute("rtc-config",JSON.stringify(i)),a.classList.add("i-amphtml-amp-apester-bottom-ad"),e.appendChild(a),q(e).requestChangeSize(a,o)}(e.tag,[[300,50]],n,r)}(t,n),function(t,n,e){const i=o(t,"campaignData.playerOptions");if(!i)return;const r=i.find((t=>"va"===t.player.type));if(!r)return;const a=r.requests.find((t=>"idle"===t.type)),{provider:s}=r.player;switch(s.type){case"aniview":{const t=s.options||{};if(!t.aniviewChannelId)return;!function(t,n,e,i){const r=function(t){const n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}(n),o=c(n.ownerDocument,"amp-iframe",{"scrolling":"no","id":"amp-iframe","title":"Ads","layout":"responsive","sandbox":"allow-scripts allow-same-origin allow-popups","allowfullscreen":"false","frameborder":"0","width":r.width,"height":r.height,"class":"i-amphtml-amp-apester-in-unit","src":`https://player.avplayer.com/amp/ampiframe.html?AV_TAGID=${t.aniviewPlayerId}&AV_PUBLISHERID=5fabb425e5d4cb4bbc0ca7e4`});e.gdpr&&(o["data-av_gdpr"]=e.gdpr,o["data-av_consent"]=e.user_consent);const a=c(n.ownerDocument,"div",{"class":"i-amphtml-amp-apester-in-unit-wrap"}),s=c(n.ownerDocument,"div",{"class":"i-amphtml-amp-apester-progress-bar"});a.appendChild(s),a.appendChild(o),n.appendChild(a),it(a,s,i);const{skipTimer:l,timeout:u}=i;setInterval((()=>{it(a,s,i)}),1e3*(u+l)),q(n).requestChangeSize(o,r.height)}(t,n,e,a.options);break}}}(t,n,e)})):x||(x=Promise.resolve(void 0))}(i,this.element)})).then((()=>this.loadPromise(u))).then((()=>t.mutatePromise((()=>{var t,n,e;if(this.Lv){this.Lv.classList.add("i-amphtml-apester-iframe-ready");const t=i.campaignData;if(t){const n=this.getAmpDoc();N(this.win).installExtensionForDoc(n,"amp-iframe");const e=t.bottomAdOptions;null!=e&&e.enabled&&(this.D6=!0,N(this.win).installExtensionForDoc(n,"amp-ad"),this.Lv.contentWindow.postMessage(ct,"*")),this.Lv.contentWindow.postMessage({type:"campaigns",data:t},"*")}}const r=null!==(t=null==i||null===(n=i.data)||void 0===n||null===(e=n.size)||void 0===e?void 0:e.height)&&void 0!==t?t:0;r!=this.j6&&(this.j6=r,this.V6?this.attemptChangeHeight(r):this.forceChangeHeight(r))})))).then((()=>{this.oj=function(t,n,e){const i=s(t);let r=m.get(i);r||m.set(i,r=p(d,i));let o=f.get(t);return o||(o=[],f.set(t,o)),o.push(n),r.observe(t),()=>{!function(t,n){const e=f.get(t);if(!e)return;if(!function(t,n){const e=t.indexOf(n);return-1!=e&&(t.splice(e,1),!0)}(e,n))return;if(e.length)return;const i=s(t),r=m.get(i);null==r||r.unobserve(t),f.delete(t)}(t,n)}}(this.element,(({isIntersecting:t})=>this.lj(t)))}))})).catch((t=>{I().error(lt,"Display",t)}))}createPlaceholderCallback(){const t=this.element.ownerDocument.createElement("div"),n=this.B6();return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading Apester Media"),t.setAttribute("placeholder",""),t.className="amp-apester-loader",k(n,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),t.appendChild(n),this.Tv=t,t}unlayoutOnPause(){return!0}unlayoutCallback(){var t;return null===(t=this.oj)||void 0===t||t.call(this),this.oj=null,this.Lv&&(this.Gv.destroy(),this.Gv=null,this.O_.forEach((t=>t())),l(this.Lv),this.Lv=null),this.Tv&&(l(this.Tv),this.Tv=null),!1}G6(){st("fullscreen_on",(t=>{this.pb===t.id&&this.element.classList.add("amp-apester-fullscreen")}),this.win,this.Lv,this.O_),st("fullscreen_off",(t=>{this.pb===t.id&&this.element.classList.remove("amp-apester-fullscreen")}),this.win,this.Lv,this.O_),st("apester_resize_unit",(t=>{this.pb===t.id&&t.height&&(this.attemptChangeHeight(t.height),this.D6&&this.Lv.contentWindow.postMessage(ct,"*"))}),this.win,this.Lv,this.O_)}};t.registerElement(lt,ut,".amp-apester-iframe{transition:opacity 0.4s;opacity:0}.i-amphtml-apester-iframe-ready{transition:opacity 1s ease-out;opacity:1!important}.amp-apester-loader{height:100%;width:100%;background-color:#fff}.amp-apester-container{max-width:700px;margin:0 auto;display:block;position:relative;width:100%}.amp-apester-overflow{position:absolute;margin:auto;top:50%;left:50%;transform:translate(-50%,-50%)}.amp-apester-overflow button{border:none;background:#fff;cursor:pointer;padding:25px 80px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative}.amp-apester-fullscreen{background:rgba(34,36,38,0.97)!important;position:fixed!important;width:100vw!important;height:100vh!important;z-index:2147483646!important;top:0;zoom:1;-webkit-overflow-scrolling:touch!important}.i-amphtml-amp-apester-companion{display:block;margin:10px auto}.i-amphtml-amp-apester-bottom-ad{display:block!important;position:absolute!important;bottom:0!important;left:50%!important;transform:translateX(-50%)!important;margin:0!important}.i-amphtml-amp-apester-in-unit-wrap{display:none!important;position:absolute!important;top:0!important;bottom:0!important;left:0!important;right:0!important;background-color:#626262!important}.i-amphtml-amp-apester-in-unit-wrap.active{display:block!important}.i-amphtml-amp-apester-progress-bar{width:100%;height:4px;background-color:#ee9802}@keyframes progress{0%{width:0}}.i-amphtml-amp-apester-in-unit{display:block!important;position:relative!important;top:50%!important;transform:translateY(-50%)!important;margin:0!important}\n/*# sourceURL=/extensions/amp-apester-media/0.1/amp-apester-media.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-apester-media-0.1.mjs.map
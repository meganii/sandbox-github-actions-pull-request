;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-playbuzz",ev:"0.1",l:!0,f:function(t,e){(()=>{var{isArray:e}=Array,{hasOwnProperty:n,toString:r}=Object.prototype;function o(t){return(t.ownerDocument||t).defaultView}function i(t,e,n={}){const{needsRootBounds:r,rootMargin:o,threshold:i}=n,s=function(t){return t.parent&&t.parent!=t}(e)&&(r||o)?e.document:void 0;return new e.IntersectionObserver(t,{threshold:i,root:s,rootMargin:o})}var s=new WeakMap,a=new WeakMap;function l(t){const e=new Set;for(let n=t.length-1;n>=0;n--){const r=t[n],{target:o}=r;if(e.has(o))continue;e.add(o);const i=a.get(o);if(i)for(let t=0;t<i.length;t++)(0,i[t])(r)}}function c(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(null!=e&&e.writable)return t;const{message:n,stack:r}=t,o=new Error(n);for(const e in t)o[e]=t[e];return o.stack=r,o}function u(t){let e=null,n="";for(const t of arguments)t instanceof Error&&!e?e=c(t):(n&&(n+=" "),n+=t);return e?n&&(e.message=n+": "+e.message):e=new Error(n),e}function h(t){var e,n;null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t)}function f(t){const e=u.apply(null,arguments);setTimeout((()=>{throw h(e),e}))}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var p,d,m=self.__AMP_LOG;function b(t){return function(t,e){throw new Error("failed to call initLogConstructor")}()}function A(t,e,n,r,o,i,s,a,l,c,u){return t}function g(t,e,n,r,o,i,s,a,l,c,u){return(m.user||(m.user=b()),void m.user.win?m.userForEmbed||(m.userForEmbed=b()):m.user).assert(t,e,n,r,o,i,s,a,l,c,u)}function v(t,e){return x(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function w(t){return t.nodeType?(e=o(t),v(e,"ampdoc")).getAmpDoc(t):t;var e}function x(t,e){A(function(t,e){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!n||!n.ctor)}(t,e));const n=function(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}(t)[e];return n.obj||(A(n.ctor),A(n.context),n.obj=new n.ctor(n.context),A(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function z(t,e){return d||(d=self.document.createElement("a")),function(t,e,n){return t.href="",new URL(e,t.href)}(d,t)}function y(t){const e=t.indexOf("#");return-1==e?t:t.substring(0,e)}function _(t){return function(e,n,r){const o=t.createElement(e);return o.className=n,function(t,e){(e=e?Array.isArray(e)?e:[e]:[]).forEach((e=>t.appendChild(e)))}(o,r),o}}new Set(["c","v","a","ad"]);var E=class extends t.BaseElement{constructor(t){super(t),this.Lv=null,this.t9=null,this.lw=300,this.e9=!1,this.n9=!1,this.r9=!1,this.o9=!1,this.kd=!1,this.O_=[],this.i9="",this.oj=null}preconnectCallback(){var t;(t=this.win,v(t,"preconnect")).url(this.getAmpDoc(),this.i9)}renderOutsideViewport(){return!1}buildCallback(){const t=this.element,e=t.getAttribute("src"),n=t.getAttribute("data-item");var r;g(e||n,"Either src or data-item attribute is required for <amp-playbuzz> %s",this.element),e&&(g(/^https?\:/i.test(r=e),'URL must start with "http://" or "https://". Invalid value: %s',r),z(r).href);const o=parseInt(t.getAttribute("height"),10);this.i9=function(t,e){var n;return e?"//app.ex.co/stories/item/"+e:y((n=z(t)).href).replace(n.protocol,"").replace(/(www\.)?playbuzz\.com/,"app.ex.co/stories")}(e,n),this.lw=isNaN(o)?this.lw:o,this.e9="true"===t.getAttribute("data-item-info"),this.n9="true"===t.getAttribute("data-share-buttons"),this.r9="true"===t.getAttribute("data-comments")}isLayoutSupported(t){return"responsive"===t||"fixed-height"===t}createPlaceholderCallback(){const t=this.win.document.createElement("div");return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading interactive element"),t.setAttribute("placeholder",""),t.appendChild(this.s9()),t}a9(t){const e=JSON.stringify(t);this.Lv.contentWindow.postMessage(e,"*")}l9(){const t=_(this.element.ownerDocument),e=t("div","pb-overflow");e.setAttribute("overflow","");const n=t("button");n.textContent="Show More";const r=t("img","pb-arrow-down");return r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAQCAYAAAAMJL+VAAAAm0lEQVR4AZ3ORxXCABBF0VGBAfYooaOEXp2kxwOKwg4D9E/vLS9zzt/eN3Y7V/3DEvNUtqznqXXYzALV7elcTQ7TZatMEV+9B2N9MBqPn+tpnpbXCMWfIoFKx0BymH5GOH7d1E6Iq9XfCMfnFqlgh+MRhJvxCMZJhOMosuH4l8hhy3eE4zzCcR7hOI9wHEYoDiIA5xcqb7FyBm4P6hrNHZK+MqYAAAAASUVORK5CYII=",n.appendChild(r),e.appendChild(n),e}layoutCallback(){this.oj=function(t,e,n){const r=o(t);let c=s.get(r);c||s.set(r,c=i(l,r));let u=a.get(t);return u||(u=[],a.set(t,u)),u.push(e),c.observe(t),()=>{!function(t,e){const n=a.get(t);if(!n)return;if(!function(t,e){const n=t.indexOf(e);return-1!=n&&(t.splice(n,1),!0)}(n,e))return;if(n.length)return;const r=o(t),i=s.get(r);null==i||i.unobserve(t),a.delete(t)}(t,e)}}(this.element,(({isIntersecting:t})=>this.kd=t));const t=this.element.ownerDocument.createElement("iframe");return this.Lv=t,t.setAttribute("scrolling","no"),t.setAttribute("frameborder","0"),t.setAttribute("allowtransparency","true"),t.setAttribute("allowfullscreen","true"),t.src=this.c9(),this.u9("resize_height",function(t,e,n){let r;return function(){const e=arguments;clearTimeout(r),r=setTimeout((()=>{r=null,t.apply(this,e)}),100)}}(this.h9.bind(this))),this.element.appendChild(this.l9()),t.classList.add("i-amphtml-fill-content"),this.element.appendChild(t),this.t9=this.loadPromise(t).then((()=>{this.o9=!0,this.attemptChangeHeight(this.lw).catch((()=>{}));const t=this.getViewport().onChanged(this.f9.bind(this));this.O_.push(t)}))}s9(){const t=_(this.element.ownerDocument),e=t("img","pb_feed_anim_mask");return e.src="data:image/png;base64,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",t("div","pb_feed_placeholder_container",t("div","pb_feed_placeholder_inner",t("div","pb_feed_placeholder_content",t("div","pb_feed_placeholder_preloader",e))))}h9(t){isNaN(t)||t===this.lw||(this.lw=t,this.o9&&this.attemptChangeHeight(this.lw).catch((()=>{})))}u9(t,e){const n=function(t,e,n,r){let o=t,i=n,s=t=>{try{return i(t)}catch(t){var e,n;throw null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t),t}};const a=function(){if(void 0!==p)return p;p=!1;try{const t={get capture(){return p=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return p}();return o.addEventListener(e,s,!!a&&r),()=>{null==o||o.removeEventListener(e,s,!!a&&r),i=null,o=null,s=null}}(this.win,"message",(n=>function(t,e,n,r){t.contentWindow===e.source&&function(t,e,n){const r=function(t){if("object"==typeof t)return t;const e="error parsing json message from playbuzz item: "+t;try{if("string"==typeof t)return n=t,JSON.parse(n)}catch(t){return f("amp-playbuzz",e,t),{}}var n;return f("amp-playbuzz",e,t),{}}(function(t){return t.data}(t));r[e]&&n(r[e])}(e,n,r)}(this.Lv,n,t,e)),void 0);this.O_.push(n)}c9(){const{canonicalUrl:t}=(r=this.element,o="documentInfo",x(function(t){const e=w(t);return e.isSingleDoc()?e.win:e}(w(r)),o)).get(),n=z(t);var r,o,i;return(i={itemUrl:this.i9,relativeUrl:z(this.i9).pathname,displayItemInfo:this.e9,displayShareBar:this.n9,displayComments:this.r9,parentUrl:y(n.href),parentHost:n.host}).itemUrl+"?"+function(t){const n=[];for(const s in t){let a=t[s];if(null!=a){a=e(i=a)?i:[i];for(let t=0;t<a.length;t++)n.push((r=s,o=a[t],`${encodeURIComponent(r)}=${encodeURIComponent(o)}`))}}var r,o,i;return n.join("&")}({"feed":!0,"implementation":"amp","src":i.itemUrl,"embedBy":"00000000-0000-0000-0000-000000000000","game":i.relativeUrl,"comments":void 0,"useComments":i.displayComments,"gameInfo":i.displayItemInfo,"useShares":i.displayShareBar,"socialReferrer":!1,"height":"auto","parentUrl":i.parentUrl,"parentHost":i.parentHost})}f9(t){if(!this.kd)return;const e={"event":"scroll","windowHeight":t.height,"scroll":t.top,"offsetTop":this.getLayoutBox().top};this.a9(e)}unlayoutOnPause(){return!0}unlayoutCallback(){var t,e,n;return null===(t=this.oj)||void 0===t||t.call(this),this.oj=null,this.O_.forEach((t=>t())),this.O_.length=0,this.Lv&&(null===(n=(e=this.Lv).parentElement)||void 0===n||n.removeChild(e),this.Lv=null,this.t9=null),!0}};t.registerElement("amp-playbuzz",E,".pb-overflow[overflow]{width:100%;height:150px;position:absolute;bottom:0;text-align:center;background:linear-gradient(180deg,hsla(0,0%,100%,0) 0%,#fff 75%)}.pb-overflow button{width:140px;height:37px;position:absolute;bottom:0;left:50%;margin-left:-70px;border-radius:4px;background-color:#fff;border:1px solid #009cff;color:#009cff;font-weight:700;font-family:Helvetica,Roboto,Arial,sans-serif;cursor:pointer}.pb-arrow-down{height:8px;margin-left:10px}.pb_feed_placeholder_container{width:100%;height:100%}.pb_feed_placeholder_container{direction:ltr}.pb_feed_placeholder_inner{position:relative;width:100%;height:100%;margin:auto}.pb_feed_placeholder_content{width:100%;height:100%;background-color:#f2f2f2;border-radius:5px}.pb_feed_placeholder_preloader{position:absolute;top:47%;left:50%;width:29px;height:38px;margin-top:-36px;margin-left:-15px;overflow:hidden;box-sizing:border-box}@media screen and (max-width:568px){.pb_feed_placeholder_preloader{top:46%}}@media screen and (min-width:569px) and (max-width:992px){.pb_feed_placeholder_preloader{top:48%}}.pb_feed_anim_mask{position:absolute;width:30px;top:0;left:0}.pb_feed_loading_text{position:absolute;font-family:arial;font-size:11px;color:#aaa;text-align:center;width:100%;top:51%;direction:ltr}\n/*# sourceURL=/extensions/amp-playbuzz/0.1/amp-playbuzz.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-playbuzz-0.1.mjs.map
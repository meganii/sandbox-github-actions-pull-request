;
import{defineBentoElement as e}from"../bento.mjs";var{isArray:t}=Array;function a(e,t){const a=[];let o=0;for(let r=0;r<e.length;r++){const n=e[r];t(n,r,e)?a.push(n):(o<r&&(e[o]=n),o++)}return o<e.length&&(e.length=o),a}function o(e){return e.replace("-","_")}var{hasOwnProperty:r,toString:n}=Object.prototype;function l(e){return 1==(null==(t=e)?void 0:t.nodeType)?(e=e).tagName.toLowerCase()+(e.id?`#${e.id}`:""):e;var t}import{PreactBaseElement as s}from"../bento.mjs";function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||(r[a]=e[a]);return r}function m(e){const t=Object.getOwnPropertyDescriptor(e,"message");if(null!=t&&t.writable)return e;const{message:a,stack:o}=e,r=new Error(a);for(const t in e)r[t]=e[t];return r.stack=o,r}function f(e){let t=null,a="";for(const e of arguments)e instanceof Error&&!t?t=m(e):(a&&(a+=" "),a+=e);return t?a&&(t.message=a+": "+t.message):t=new Error(a),t}function b(e){var t,a;null===(t=(a=self).__AMP_REPORT_ERROR)||void 0===t||t.call(a,e)}function p(e,t){try{return function(e){return JSON.parse(e)}(e)}catch(e){return null==t||t(e),null}}import{createElement as v}from"../bento.mjs";import{useCallback as h,useLayoutEffect as w,useMemo as g,useState as y}from"../bento.mjs";import{forwardRef as j}from"../bento.mjs";import{useValueRef as S}from"../bento.mjs";import{createElement as x}from"../bento.mjs";import{useEffect as k,useImperativeHandle as O,useLayoutEffect as E,useMemo as A,useRef as F,useState as C}from"../bento.mjs";import{forwardRef as H}from"../bento.mjs";import{createElement as P}from"../bento.mjs";import{useCallback as R,useEffect as z,useImperativeHandle as L,useLayoutEffect as $,useRef as B}from"../bento.mjs";import{forwardRef as M}from"../bento.mjs";import{ContainWrapper as T,useValueRef as I}from"../bento.mjs";import{useAmpContext as _,useLoading as N}from"../bento.mjs";var U=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],V=()=>!1,q=M((function(e,t){let{allow:a,allowFullScreen:o,iframeStyle:r,name:n,title:l,matchesMessagingOrigin:s=V,messageHandler:i,ready:c=!0,loading:m,onReadyState:f,sandbox:b,src:p}=e,v=d(e,U);const{playable:h}=_(),w=N(m),g="unload"!==w,y=B(!1),j=I(f),S=R((e=>{if(e!==y.current){y.current=e;const t=j.current;null==t||t(e?"complete":"loading")}}),[j]),x=B(null);return L(t,(()=>({get readyState(){return y.current?"complete":"loading"},get node(){return x.current}})),[]),$((()=>{g||S(!1)}),[g,S]),z((()=>{const e=x.current;if(!h&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[h]),$((()=>{const e=x.current;if(!e||!g)return;const t=e=>{const t=x.current;t&&e.source==t.contentWindow&&s(e.origin)&&i(e)},{defaultView:a}=e.ownerDocument;return a.addEventListener("message",t),()=>a.removeEventListener("message",t)}),[s,i,g,c]),P(T,u(u({},v),{},{layout:!0,size:!0,paint:!0}),g&&c&&P("iframe",{allow:a,allowFullScreen:o,frameBorder:"0",loading:w,name:n,onLoad:()=>S(!0),part:"iframe",ref:x,sandbox:b,scrolling:"no",src:p,style:u(u({},r),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:l}))}));q.displayName="IframeEmbed";var G,J=e=>self.AMP_CONFIG?self.AMP_CONFIG[e]:null,D=J("thirdPartyUrl")||"https://3p.ampproject.net",K=J("thirdPartyFrameHost")||"ampproject.net";function Q(e){return`${D}/2301041800000/vendor/${e}.mjs`}function W(e){let t;if(e.crypto&&e.crypto.getRandomValues){const a=new Uint32Array(2);e.crypto.getRandomValues(a),t=String(a[0])+a[1]}else t=String(e.Math.random()).substr(2)+"0";return t}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var X=["allow","excludeSandbox","name","messageHandler","options","sandbox","src","type","title"],Y={},Z="sync-xhr 'none'",ee=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"].join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" "),te=H((function(e,t){let{allow:a=Z,excludeSandbox:o,name:r,messageHandler:n,options:l,sandbox:s=ee,src:i,type:c,title:m=c}=e,f=d(e,X);if(b=a,"number"!=typeof v&&(v=0),v+(p=Z).length>b.length||-1===b.indexOf(p,v))throw new Error(`'allow' prop must contain "${Z}". Found "${a}".`);var b,p,v;const h=F(null),w=F(null),g=A((()=>(Y[c]||(Y[c]=function(){let e=0;return()=>String(++e)}()),Y[c]())),[c]),[y,j]=C({name:r,src:i}),{name:S,src:H}=y,P=F(null);return E((()=>{var e,t;const a=null===(e=h.current)||void 0===e||null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView,o=null!=i?i:a?((n=a).__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=n.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+W(n),"https://"+n.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+`.${K}/2301041800000/frame.html`):"about:blank";var n;if(r)return void j({name:r,src:o});if(!a)return;P.current||(P.current=function(e){let t=0;for(let a=e;a&&a!=a.parent;a=a.parent)t++;return String(t)+"-"+W(e)}(a));const s=Object.assign({"location":{"href":a.location.href},"sentinel":P.current}),d=u({"title":m,"type":c,"_context":s},l);var f;j({name:JSON.stringify({"host":(f=o,G||(G=self.document.createElement("a")),function(e,t,a){return e.href="",new URL(t,e.href)}(G,f)).hostname,"bootstrap":Q(c),"type":c,"count":g,"attributes":d}),src:o})}),[g,r,l,i,m,c]),k((()=>{var e;const t=null===(e=w.current)||void 0===e?void 0:e.node;t&&t.parentNode.insertBefore(t,t.nextSibling)}),[S]),O(t,(()=>({get readyState(){var e;return null===(e=w.current)||void 0===e?void 0:e.readyState},get node(){var e;return null===(e=w.current)||void 0===e?void 0:e.node}})),[]),x(q,u(u({},f),{},{allow:a,contentRef:h,messageHandler:n,name:S,ref:w,ready:!!S,sandbox:o?void 0:s,src:H,title:m}))}));te.displayName="ProxyIframeEmbed";var ae=["action","colorscheme","embedAs","hideCover","hideCta","href","includeCommentParent","kdSite","layout","locale","numPosts","onLoad","orderBy","refLabel","requestResize","share","showFacepile","showText","size","smallHeader","style","tabs","title"],oe=()=>!0,re="Facebook comments",ne=j((function(e,t){let{action:a,colorscheme:r,embedAs:n,hideCover:l,hideCta:s,href:i,includeCommentParent:c,kdSite:m,layout:j,locale:x,numPosts:k,onLoad:O,orderBy:E,refLabel:A,requestResize:F,share:C,showFacepile:H,showText:P,size:R,smallHeader:z,style:L,tabs:$,title:B=re}=e,M=d(e,ae);const[T,I]=y(null),_=S(O),N=h((e=>{var t;const a=null!==(t=p(e.data))&&void 0!==t?t:function(e){if(!function(e){return"string"==typeof e&&e.startsWith("amp-")&&-1!=e.indexOf("{")}(e))return null;const t=e.indexOf("{");return p(e.substr(t),(t=>{!function(e){const t=f.apply(null,arguments);setTimeout((()=>{throw b(t),t}))}(new Error(`MESSAGING: Failed to parse message: ${e}\n${t.message}`))}))}(e.data);var o;if("ready"==a.action&&(null===(o=_.current)||void 0===o||o.call(_)),"embed-size"==a.type){const e=a.height;F?(F(e),I("100%")):I(e)}}),[F,_]),[U,V]=y(x);w((()=>{var e,a;if(x)return void V(x);const r=null==t||null===(e=t.current)||void 0===e||null===(a=e.ownerDocument)||void 0===a?void 0:a.defaultView;r&&V(o(r.navigator.language))}),[x,t]);const q=g((()=>({action:a,colorscheme:r,embedAs:n,hideCover:l,hideCta:s,href:i,includeCommentParent:c,"kd_site":m,layout:j,locale:U,numPosts:k,orderBy:E,ref:A,share:C,showFacepile:H,showText:P,size:R,smallHeader:z,tabs:$})),[a,r,n,l,s,i,c,m,j,U,k,E,A,C,H,P,R,z,$]);return v(te,u(u({options:q,ref:t,title:B},M),{},{excludeSandbox:!0,matchesMessagingOrigin:oe,messageHandler:N,type:"facebook",style:T?u(u({},L),{},{height:T}):L}))}));ne.displayName="BentoFacebook";var le=class extends s{};le.Component=ne,le.loadable=!0,le.props={"title":{attr:"title"},"href":{attr:"data-href"},"locale":{attr:"data-locale",default:o(window.navigator.language)},"loading":{attr:"data-loading"},"allowFullScreen":{attr:"data-allowfullscreen"},"embedAs":{attrs:["data-embed-as"],parseAttrs:function(e){const t=e.getAttribute("data-embed-as");return function(e,t,o="Assertion failed",r){var n,s;if(t)return t;e&&-1==o.indexOf(e)&&(o+=e);let i=3;const c=o.split("%s");let u=c.shift();const d=[u];for(;c.length;){const e=arguments[i++],t=c.shift();u+=l(e)+t,d.push(e,t.trim())}const m=new Error(u);throw m.messageArray=a(d,(e=>""!==e)),null===(n=(s=self).__AMP_REPORT_ERROR)||void 0===n||n.call(s,m),m}("​​​",!t||-1!==["post","video","comments","like","page"].indexOf(t),'Attribute data-embed-as for <amp-facebook> value is wrong, should be "post", "video", "comments", "like", or "page", but was: %s',t,o,r,n,s,i,c,u,d),t;var o,r,n,s,i,c,u,d}},"includeCommentParent":{attr:"data-include-comment-parent",type:"boolean",default:!1},"showText":{attr:"data-show-text"},"numPosts":{attr:"data-numposts"},"orderBy":{attr:"data-order-by"},"colorscheme":{attr:"data-colorscheme"},"action":{attr:"data-action"},"kdSite":{attr:"data-kd_site"},"layout":{attr:"data-layout"},"refLabel":{attr:"data-ref"},"share":{attr:"data-share"},"size":{attr:"data-size"},"hideCover":{attr:"data-hide-cover"},"hideCta":{attr:"data-hide-cta"},"showFacepile":{attr:"data-show-facepile"},"smallHeader":{attr:"data-small-header"},"tabs":{attr:"data-tabs"}},le.layoutSizeDefined=!0,le.usesShadowDom=!0;var se=class extends le{};se.staticProps={"embedAs":"comments"};var ie=class extends le{};ie.staticProps={"embedAs":"like"};var ce=class extends le{};ce.staticProps={"embedAs":"page"},e("bento-facebook",le,undefined),e("bento-facebook-comments",se,void 0),e("bento-facebook-like",ie,void 0),e("bento-facebook-page",ce,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-facebook-1.0.mjs.map
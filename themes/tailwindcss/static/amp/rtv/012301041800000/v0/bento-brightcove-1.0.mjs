;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,"string");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}},{isArray:s}=Array;function u(e,t){return t.toUpperCase()}var{hasOwnProperty:c,toString:d}=Object.prototype;function f(e){const t=Object.getOwnPropertyDescriptor(e,"message");if(null!=t&&t.writable)return e;const{message:n,stack:o}=e,a=new Error(n);for(const t in e)a[t]=e[t];return a.stack=o,a}function m(e){let t=null,n="";for(const e of arguments)e instanceof Error&&!t?t=f(e):(n&&(n+=" "),n+=e);return t?n&&(t.message=n+": "+t.message):t=new Error(n),t}function p(e){const t=m.apply(null,arguments);return t.expected=!0,t}function y(e,...t){var n,o,a;n=p.apply(null,t),null===(o=(a=self).__AMP_REPORT_ERROR)||void 0===o||o.call(a,n)}import{Fragment as b,createElement as v}from"../bento.mjs";import{useCallback as g,useEffect as h,useImperativeHandle as w,useLayoutEffect as j,useMemo as k,useRef as I,useState as O}from"../bento.mjs";import{forwardRef as C}from"../bento.mjs";import{ContainWrapper as S,useValueRef as q}from"../bento.mjs";import{useAmpContext as x,useLoading as R}from"../bento.mjs";import{useCallback as P,useLayoutEffect as M}from"../bento.mjs";import{useAmpContext as E}from"../bento.mjs";var $={bubbles:!0,cancelable:!0};function L(e,t,n,o){const a=n||{};e.ownerDocument;const r=e.ownerDocument.createEvent("Event");r.data=a;const{bubbles:l,cancelable:i}=o||$;r.initEvent(t,l,i),e.dispatchEvent(r)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var N={"title":"","artist":"","album":"","artwork":[{"src":""}]};function U(e){const t=e.querySelector('script[type="application/ld+json"]');if(!t)return;const n=function(e,t){try{return function(e){return JSON.parse(e)}(e)}catch(e){return null}}(t.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}function A(e){const t=e.querySelector('meta[property="og:image"]');return t?t.getAttribute("content"):void 0}function F(e){const t=e.querySelector('link[rel="shortcut icon"]')||e.querySelector('link[rel="icon"]');return t?t.getAttribute("href"):void 0}function T({displayIcon:e,displayOverlay:t,metadata:n,onOverlayClick:o,pause:a,play:r,playing:l,wrapperRef:i}){const{playable:s}=x();return h((()=>{if(!s)return void a();const e=new IntersectionObserver((e=>{e[e.length-1].isIntersecting?r().catch((()=>{})):a()}),{threshold:.5});return e.observe(i.current),()=>{e.disconnect()}}),[i,r,a,s]),v(b,null,e&&v("div",{class:"eq-9e7199f"+(l?" eq-playing-9e7199f":"")},v(V,null)),t&&v("button",{"aria-label":n&&n.title||"Unmute video",tabindex:"0",class:"autoplay-mask-button-9e7199f fill-content-overlay-fc551a7",onClick:o}))}var V=function(e){let t=!1,n=null,o=()=>[1,2,3,4].map((e=>v("div",{class:"eq-col-9e7199f",key:e})));return(...e)=>(t||(n=o.apply(self,e),t=!0,o=null),n)}(),z=C((function(e,n){let a="class",{autoplay:r=!1,component:s="video",controls:u=!1,loading:c,loop:d=!1,mediasession:f=!0,noaudio:m=!1,onPlayingState:p,onReadyState:b,poster:C,sources:P,src:$,style:L,[a]:V}=e,z=t(e,["autoplay","component","controls","loading","loop","mediasession","noaudio","onPlayingState","onReadyState","poster","sources","src","style",a].map(o));!function(){const{notify:e}=E();M((()=>{e&&e()}))}();const{playable:B}=x(),_=R(c),J="unload"!==_,[Y,H]=O(r),[W,D]=O(!1),[G,K]=O(null),[Q,X]=O(!r),Z=I(null),ee=I(null),te=k((()=>new i),[]),ne=I("loading"),oe=q(b),ae=g(((e,t)=>{if(e!==ne.current){ne.current=e;const n=oe.current;n&&n(e,t)}}),[oe]),re=q(p),le=g((e=>{D(e);const t=re.current;t&&t(e)}),[re]);j((()=>{J||le(!1)}),[J,le]);const ie=g((()=>te.promise.then((()=>function(e,t){const n=(o=()=>e.play(!1),new Promise((e=>{e(o())})));var o;return n.catch((e=>{y(0,e)})),n}(ee.current)))),[te]),se=g((()=>{te.promise.then((()=>{var e;return null===(e=ee.current)||void 0===e?void 0:e.pause()}))}),[te]),ue=g((()=>te.promise.then((()=>ee.current.requestFullscreen()))),[te]),ce=g((()=>{H(!1),X(!0)}),[]);return j((()=>{var e;const t=null===(e=ee.current)||void 0===e?void 0:e.readyState;null!=t&&ae(t>0?"complete":"loading")}),[ae]),j((()=>(f&&W&&G&&function(e,t,n,o){const{navigator:a}=e;"mediaSession"in a&&e.MediaMetadata&&(a.mediaSession.metadata=new e.MediaMetadata(N),a.mediaSession.metadata=new e.MediaMetadata(t),a.mediaSession.setActionHandler("play",n),a.mediaSession.setActionHandler("pause",o))}(window,G,ie,se),()=>{})),[f,W,G,ie,se]),h((()=>{B||se()}),[B,se]),w(n,(()=>({get readyState(){return ne.current},play:ie,pause:se,requestFullscreen:ue,get currentTime(){return ee.current?ee.current.currentTime:0},get duration(){return ee.current?ee.current.duration:NaN},get autoplay(){return r},get controls(){return u},get loop(){return d},userInteracted:ce,mute:()=>H(!0),unmute:()=>{Q&&H(!1)}})),[ie,se,ue,ce,Q,r,u,d]),v(S,{contentRef:Z,class:V,style:L,size:!0,layout:!0,paint:!0},J&&v(s,l(l({},z),{},{ref:ee,loading:_,muted:Y,loop:d,controls:u&&(!r||Q),onCanPlay:()=>{te.resolve(),ae("complete")},onLoadedMetadata:()=>{f&&te.promise.then((()=>{var e,t;K((e=ee.current,l({"title":(t=z).title||t["aria-label"]||document.title,"artist":t.artist||"","album":t.album||"","artwork":[{"src":t.artwork||t.poster||U(document)||A(document)||F(document)||""}]},e&&e.getMetadata?e.getMetadata():Object.create(null))))})),ae("complete")},onPlaying:()=>le(!0),onPause:()=>le(!1),onEnded:()=>le(!1),onError:e=>{ae("error",e),te.reject(e)},class:"fill-stretch-fc551a7",src:$,poster:C}),P),r&&!Q&&v(T,{metadata:G,playing:W,displayIcon:!m&&Y,wrapperRef:Z,play:ie,pause:se,displayOverlay:u,onOverlayClick:ce}))}));z.displayName="VideoWrapper";var B=class extends e{};B.Component=z,B.loadable=!0,B.layoutSizeDefined=!0,B.staticProps,B.props={"album":{attr:"album"},"alt":{attr:"alt"},"artist":{attr:"artist"},"artwork":{attr:"artwork"},"attribution":{attr:"attribution"},"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"controlslist":{attr:"controlslist"},"crossorigin":{attr:"crossorigin"},"disableremoteplayback":{attr:"disableremoteplayback"},"loop":{attr:"loop",type:"boolean"},"noaudio":{attr:"noaudio",type:"boolean"},"poster":{attr:"poster"},"sources":{selector:"source",single:!1,clone:!0},"src":{attr:"src"},"title":{attr:"title"},"dock":{attr:"dock",media:!0},"rotate-to-fullscreen":{attr:"rotate-to-fullscreen",type:"boolean",media:!0}},B.shadowCss='.fill-stretch-fc551a7{width:100%;height:100%;position:relative}.fill-content-overlay-fc551a7{top:0;left:0;right:0;bottom:0;position:absolute}.autoplay-mask-button-9e7199f{width:100%;border:none;display:block;-webkit-appearance:none;appearance:none;background:transparent}.eq-9e7199f{right:7px;width:20px;bottom:7px;height:12px;display:-ms-flexbox;display:flex;opacity:0.8;z-index:1;overflow:hidden;position:absolute;-ms-flex-align:end;align-items:flex-end;pointer-events:none!important}.eq-playing-9e7199f>div:after,.eq-playing-9e7199f>div:before{animation-play-state:running}.eq-col-9e7199f{-ms-flex:1;flex:1;height:100%;position:relative;margin-right:1px}.eq-col-9e7199f:after,.eq-col-9e7199f:before{width:100%;height:100%;content:"";position:absolute;animation:keyframes-eq-animation-9e7199f 0s linear infinite alternate;will-change:transform;background-color:#fafafa;animation-play-state:paused}.eq-col-9e7199f:nth-child(4):before{animation-duration:0.4s}.eq-col-9e7199f:nth-child(4):after{animation-duration:0.25s}.eq-col-9e7199f:nth-child(3):before{animation-duration:0.3s}.eq-col-9e7199f:nth-child(3):after{animation-duration:0.35s}.eq-col-9e7199f:nth-child(2):before{animation-duration:0.5s}.eq-col-9e7199f:nth-child(2):after{animation-duration:0.4s}.eq-col-9e7199f:first-child:before{animation-duration:0.3s}.eq-col-9e7199f:first-child:after{animation-duration:0.45s}@keyframes keyframes-eq-animation-9e7199f{0%{transform:translateY(100%)}to{transform:translateY(0)}}',B.usesShadowDom=!0;import{createElement as _}from"../bento.mjs";import{Slot as J,createSlot as Y}from"../bento.mjs";new Set(["c","v","a","ad"]);var H={"playing":"playing","pause":"pause","ended":"ended","ads-ad-started":"ad_start","ads-ad-ended":"ad_end","loadedmetadata":"loadedmetadata"};function W(e){return"ref:"===e.substring(0,4)?`ref:${encodeURIComponent(e.substring(4))}`:encodeURIComponent(e)}import{createElement as D}from"../bento.mjs";import{useCallback as G,useImperativeHandle as K,useLayoutEffect as Q,useMemo as X,useRef as Z}from"../bento.mjs";import{forwardRef as ee}from"../bento.mjs";var te=["loading","unloadOnPause","sandbox","muted","controls","origin","onCanPlay","onMessage","playerStateRef","makeMethodMessage","makeFullscreenMessage","onIframeLoad"],ne=["allow-scripts","allow-same-origin","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].join(" ");function oe(e,t,n){e&&e.contentWindow&&t.then((()=>{e.contentWindow.postMessage(n(),"*")}))}var ae=ee((function(e,n){let{loading:o,unloadOnPause:a=!1,sandbox:r=ne,muted:s=!1,controls:u=!1,origin:c,onCanPlay:d,onMessage:f,playerStateRef:m,makeMethodMessage:p,makeFullscreenMessage:y,onIframeLoad:b}=e,v=t(e,te);const g=Z(null),h=X((()=>new i),[]),w=Z(p),j=G((e=>{oe(null==g?void 0:g.current,h.promise,(()=>w.current(e)))}),[h.promise]),k=Z(y),I=G((()=>oe(null==g?void 0:g.current,h.promise,k.current)),[h.promise]);K(n,(()=>({get currentTime(){var e,t;return null!==(e=null==m||null===(t=m.current)||void 0===t?void 0:t.currentTime)&&void 0!==e?e:NaN},get duration(){var e,t;return null!==(e=null==m||null===(t=m.current)||void 0===t?void 0:t.duration)&&void 0!==e?e:NaN},requestFullscreen:()=>{if(!k.current)return h.promise.then((()=>{g.current.requestFullscreen()}));I()},play:()=>j("play"),pause:()=>{if(a){const e=g.current;e&&(e.src=e.src)}else j("pause")}})),[m,j,I,h.promise,a]);const O=function(e){const t=Z(null);return t.current=e,t}(f);return Q((()=>{if(!g.current)return;function e(e){O.current&&(c&&!c.test(e.origin)||e.source!=g.current.contentWindow||O.current({currentTarget:g.current,target:g.current,data:e.data}))}const{defaultView:t}=g.current.ownerDocument;return t.addEventListener("message",e),()=>t.removeEventListener("message",e)}),[c,O]),Q((()=>{j(s?"mute":"unmute")}),[s,j]),Q((()=>{j(u?"showControls":"hideControls")}),[u,j]),D("iframe",l(l({},v),{},{ref:g,allowfullscreen:!0,frameborder:"0",sandbox:r,loading:o,onCanPlay:()=>{d&&h.promise.then(d),h.resolve()},onLoad:e=>{null==b||b(e)}}))}));ae.displayName="VideoIframeInternal";var re=ee((function(e,t){return D(z,l(l({ref:t},e),{},{component:ae}))}));re.displayName="VideoIframe";import{createElement as le}from"../bento.mjs";import{useCallback as ie,useMemo as se,useRef as ue,useState as ce}from"../bento.mjs";import{forwardRef as de}from"../bento.mjs";import{useValueRef as fe}from"../bento.mjs";var me=["account","autoplay","embed","muted","player","playlistId","referrer","videoId","onPlayingState","urlParams","onLoad"],pe="default",ye={"mute":"muted","unmute":"muted","showControls":"controls","hideControls":"controls"};function be(e){var t;let n;switch(e){case"showControls":case"mute":n=!0;break;case"hideControls":case"unmute":n=!1}return JSON.stringify({"command":null!==(t=ye[e])&&void 0!==t?t:e,"args":n})}var ve=de((function(e,n){const{account:o,autoplay:a,embed:r=pe,muted:i,player:u=pe,playlistId:c,referrer:d,videoId:f,onPlayingState:m,urlParams:p,onLoad:y}=e,b=t(e,me),v=ue({}),g=fe(y),[h,w]=ce(i),j=se((()=>function(e,t,n,o,a,r,i){let u="";return o?u="&playlistId="+W(o):a&&(u="&videoId="+W(a)),function(e,t,n){if(!t)return e;const o=e.split("#",2),a=o[0].split("?",2);let r=a[0]+(a[1]?`?${a[1]}&${t}`:`?${t}`);return r+=o[1]?`#${o[1]}`:"",r}(`https://players.brightcove.net/${encodeURIComponent(e)}/${encodeURIComponent(t)}_${encodeURIComponent(n)}/index.html?amp=1`+u,function(e){const t=[];for(const r in e){let l=e[r];if(null!=l){l=s(a=l)?a:[a];for(let e=0;e<l.length;e++)t.push((n=r,o=l[e],`${encodeURIComponent(n)}=${encodeURIComponent(o)}`))}}var n,o,a;return t.join("&")}(l(l({},i),{},{referrer:r,playsinline:!0,autoplay:void 0})))}(o,u,r,c,f,d,p)),[o,r,u,c,d,p,f]),k=ie((({currentTarget:e,data:t})=>{var n;const o=null==t?void 0:t.event;switch(o){case"ready":L(e,"canplay"),null===(n=g.current)||void 0===n||n.call(g);break;case"playing":null==m||m(!0);break;case"pause":case"ended":null==m||m(!1)}if(null!=t&&t.ct&&(v.current.currentTime=t.ct),null!=t&&t.pr&&(v.current.playedRanges=t.pr),null!=t&&t.dur&&(v.current.duration=t.dur),H[o])L(e,H[o]);else if("volumechange"===o){const n=t.muted;if(null==n||n==h)return;w(n),L(e,function(e){return e?"muted":"unmuted"}(n))}}),[h,m,g]);return function({account:e}){return!!e||(console.warn("account is required for <Brightcove>"),!1)}(e)?le(re,l(l({ref:n},b),{},{autoplay:a,controls:!0,makeMethodMessage:be,muted:h,onMessage:k,playerStateRef:v,src:j})):null}));ve.displayName="BentoBrightcove";var ge=class extends B{};ge.Component=ve,ge.props={"account":{attr:"data-account"},"autoplay":{attr:"autoplay",type:"boolean"},"embed":{attr:"data-embed",default:"default"},"player":{attrs:["data-player","data-player-id"],parseAttrs(e){const{"player":t,"playerId":n}=e.dataset;return t||n||"default"}},"playlistId":{attr:"data-playlist-id"},"referrer":{attr:"data-referrer"},"urlParams":function(e){const t=t=>(null==t?void 0:t.startsWith(e))&&t!==e;return{"attrMatches":t,"parseAttrs":n=>{let o;const a=n.attributes;for(let n=0;n<a.length;n++){const l=a[n];t(l.name)&&(o||(o={}),o[(r=l.name.slice(e.length),r.replace(/-([a-z])/g,u))]=l.value)}var r;return o}}}("data-param-"),"videoId":{attr:"data-video-id"},"dock":{attr:"dock",media:!0}},ge.layoutSizeDefined=!0,ge.usesShadowDom=!0;import{defineBentoElement as he}from"../bento.mjs";he("bento-brightcove",ge,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-brightcove-1.0.mjs.map
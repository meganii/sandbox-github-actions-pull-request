;
(self.AMP=self.AMP||[]).push({m:0,v:"2301041800000",n:"amp-apester-media",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,r){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,r)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(t,n){if(n&&("object"===i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var a=Array.isArray;function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function u(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return o(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=Object.prototype,c=s.hasOwnProperty;function l(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function f(t,n){return c.call(t,n)}function p(t,n){if("."==n)return t;for(var r,e=t,a=u(n.split("."),!0);!(r=a()).done;){var o=r.value;if(!(o&&e&&void 0!==e[o]&&"object"==i(e)&&f(e,o))){e=void 0;break}e=e[o]}return e}function m(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}function d(t){return(t.ownerDocument||t).defaultView}function h(t){var n;null===(n=t.parentElement)||void 0===n||n.removeChild(t)}function v(t,n,r){return function(t,n){for(var r in n)t.setAttribute(r,n[r]);return t}(t.createElement(n),r)}function b(t){return t.parent&&t.parent!=t}function g(t){var n,r=parseFloat(t);return"number"==typeof(n=r)&&isFinite(n)?r:void 0}function w(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.needsRootBounds,e=r.rootMargin,a=r.threshold,o=b(n)&&(i||e)?n.document:void 0;return new n.IntersectionObserver(t,{threshold:a,root:o,rootMargin:e})}s.toString;var y,k=new WeakMap,x=new WeakMap;function O(t){for(var n=new Set,r=t.length-1;r>=0;r--){var i=t[r],e=i.target;if(!n.has(e)){n.add(e);var a=x.get(e);if(a)for(var o=0;o<a.length;o++)(0,a[o])(i)}}}function S(t){var n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;var r=t.message,i=t.stack,e=new Error(r);for(var a in t)e[a]=t[a];return e.stack=i,e}function j(t){for(var n,r=null,i="",e=u(arguments,!0);!(n=e()).done;){var a=n.value;a instanceof Error&&!r?r=S(a):(i&&(i+=" "),i+=a)}return r?i&&(r.message=i+": "+r.message):r=new Error(i),r}function A(t){var n,r;null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t)}var I=["Webkit","webkit","Moz","moz","ms","O","o"];function _(t,n,r,i,e){var a=function(t,n,r){if(n.startsWith("--"))return n;y||(y=l());var i=y[n];if(!i||r){if(i=n,void 0===t[n]){var e=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),a=function(t,n){for(var r=0;r<I.length;r++){var i=I[r]+n;if(void 0!==t[i])return i}return""}(t,e);void 0!==t[a]&&(i=a)}r||(y[n]=i)}return i}(t.style,n,e);if(a){var o,u=i?r+i:r;t.style.setProperty((o=a.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),I.some((function(t){return o.startsWith(t+"-")}))?"-".concat(o):o),u)}}function E(t,n){for(var r in n)_(t,r,n[r])}function z(t){return"".concat(t,"px")}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var R,P=self.__AMP_LOG;function D(t,n){throw new Error("failed to call initLogConstructor")}function M(t){return P.user||(P.user=C()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(P.user.win,t)?P.userForEmbed||(P.userForEmbed=C()):P.user}function C(t){return D()}function T(){return P.dev||(P.dev=D())}function L(t,n,r,i,e,a,o,u,s,c,l){return t}var N=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))};function U(t,n){return V(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function J(t,n){return V(F(B(t)),n)}function q(t,n){return G(F(t),n)}function B(t){return t.nodeType?(n=d(t),U(n,"ampdoc")).getAmpDoc(t):t;var n}function F(t){var n=B(t);return n.isSingleDoc()?n.win:n}function V(t,n){L(function(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}(t,n));var r=H(t)[n];return r.obj||(L(r.ctor),L(r.context),r.obj=new r.ctor(r.context),L(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function G(t,n){var r=H(t)[n];return r?r.promise?r.promise:(V(t,n),r.promise=Promise.resolve(r.obj)):null}function H(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}var W,X=function(t){return J(t,"documentInfo").get()},Y=function(t){return U(t,"extensions")},Z=function(t){return J(t,"mutator")},$=function(t){return function(t,n,r,i){var e=q(t,n);if(e)return e;var a=B(t);return a.whenExtensionsKnown().then((function(){var t=a.getExtensionVersion(r);return t?U(a.win,"extensions").waitForExtension(r,t):null})).then((function(r){return r?function(t,n){return function(t,n){var r=G(t,n);if(r)return r;var i,e,a,o,u=H(t);return u[n]=(e=(i=new N).promise,a=i.reject,o=i.resolve,e.catch((function(){})),{obj:null,promise:e,resolve:o,reject:a,context:null,ctor:null}),u[n].promise}(F(t),n)}(t,n):null}))}(t,"consentPolicyManager","amp-consent")};function K(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function Q(t){return t.data}var tt,nt,rt=function(){function t(t){this.Lt=t,this.Wt=0,this.Kt=0,this.Qt=l()}var n=t.prototype;return n.has=function(t){return!!this.Qt[t]},n.get=function(t){var n=this.Qt[t];if(n)return n.access=++this.Kt,n.payload},n.put=function(t,n){this.has(t)||this.Wt++,this.Qt[t]={payload:n,access:this.Kt},this.Xt()},n.Xt=function(){if(!(this.Wt<=this.Lt)){var t,n=this.Qt,r=this.Kt+1;for(var i in n){var e=n[i].access;e<r&&(r=e,t=i)}void 0!==t&&(delete n[t],this.Wt--)}},t}();function it(t,n){return function(t,n,r){if(!n)return t;var i=t.split("#",2),e=i[0].split("?",2);return e[0]+(e[1]?"?".concat(e[1],"&").concat(n):"?".concat(n))+(i[1]?"#".concat(i[1]):"")}(t,function(t){var n,r,i,e=[];for(var o in t){var u=t[o];if(null!=u){u=a(i=u)?i:[i];for(var s=0;s<u.length;s++)e.push((n=o,r=u[s],"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))))}}return e.join("&")}(n))}new Set(["c","v","a","ad"]);var et="unlisten";function at(t,n,r){var i=function(t,n){var r=t.listeningFors;return!r&&n&&(r=t.listeningFors=Object.create(null)),r||null}(t,r);if(!i)return i;var e=i[n];return!e&&r&&(e=i[n]=[]),e||null}function ot(t,n){for(var r=n;r&&r!=r.parent;r=r.parent)if(r==t)return!0;return!1}function ut(t){for(var n={"sentinel":et},r=t.length-1;r>=0;r--){var i=t[r];if(!i.frame.contentWindow){t.splice(r,1);var e=i.events;for(var a in e)e[a].splice(0,1/0).forEach((function(t){t(n)}))}}}function st(t,n,r,i,e,a){L(t.src),L(!t.parentNode),L(r);var o=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(Q(n)){var r=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?m(t,(function(t){T().warn("IFRAME-HELPER","Postmessage could not be parsed. Is it in a valid JSON format?",t)}))||null:K(t)?function(t){if(!K(t))return null;var n=t.indexOf("{");return m(t.substr(n),(function(n){!function(t){var n=j.apply(null,arguments);setTimeout((function(){throw A(n),n}))}(new Error("MESSAGING: Failed to parse message: ".concat(t,"\n").concat(n.message)))}))}(t):null),t}(Q(n));if(r&&r.sentinel){var i=function(t,n,r,i){var e,a=at(t,n);if(!a)return a;for(var o=0;o<a.length;o++){var u=a[o],s=u.frame.contentWindow;if(s){if(i==s||ot(s,i)){e=u;break}}else setTimeout(ut,0,a)}return e?e.events:null}(t,r.sentinel,n.origin,n.source);if(i){var e=i[r.type];if(e){e=e.slice();for(var a=0;a<e.length;a++)(0,e[a])(r,n.source,n.origin,n)}}}}}))}(o);var u,s,c=function(t,n,r){for(var i,e=at(t,ct(n,r),!0),a=0;a<e.length;a++){var o=e[a];if(o.frame===n){i=o;break}}return i||(i={frame:n,events:Object.create(null)},e.push(i)),i.events}(o,t,i),l=(s=t.src,tt||(tt=self.document.createElement("a"),nt=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new rt(100))),function(t,n,r){if(r&&r.has(n))return r.get(n);t.href=n,t.protocol||(t.href=t.href);var i,e={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==e.pathname[0]&&(e.pathname="/"+e.pathname),("http:"==e.protocol&&80==e.port||"https:"==e.protocol&&443==e.port)&&(e.port="",e.host=e.hostname),i=t.origin&&"null"!=t.origin?t.origin:"data:"!=e.protocol&&e.host?e.protocol+"//"+e.host:e.href,e.origin=i;var a=e;return r&&r.put(n,a),a}(tt,s,nt)).origin,f=c[n]||(c[n]=[]),p=function(n,i,o,s){if("amp"==n.sentinel){if(i!=t.contentWindow)return;if(l!=o&&("null"!=o||!a))return}(e||i==t.contentWindow)&&(n.sentinel!=et?r(n,i,o,s):u())};return f.push(p),u=function(){if(p){var t=f.indexOf(p);t>-1&&f.splice(t,1),p=null,f=null,r=null}}}function ct(t,n){return n?t.getAttribute("data-amp-3p-sentinel"):"amp"}var lt=function(){function t(t,n,r,i){var e=this;this.tb=t,this.nb=r,this.rb=[],this.ib=st(this.tb,n,(function(t,n,r){e.rb.some((function(t){return t.win==n}))||e.rb.push({win:n,origin:r}),i(t,n,r)}),this.nb,this.nb)}var n=t.prototype;return n.send=function(t,n){(function(t,n){for(var r=[],i=0,e=0;e<t.length;e++){var a=t[e];a.win.parent?(i<e&&(t[i]=a),i++):r.push(a)}i<t.length&&(t.length=i)})(this.rb),function(t,n,r,i,e){if(t.contentWindow){i.type=r,i.sentinel=ct(t,e);var a=i;e&&(a="amp-"+JSON.stringify(i));for(var o=0;o<n.length;o++){var u=n[o];u.win.postMessage(a,u.origin)}}}(this.tb,this.rb,t,n,this.nb)},n.destroy=function(){this.ib(),this.rb.length=0},t}(),ft=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1],pt=(Date.now(),function(){function t(t,n){var r=this;this.eb=t,this.ob=null,this.ub=new lt(n,"send-intersections",!1,(function(){r.ab()})),this.ob=new IntersectionObserver((function(t){r.ub.send("intersection",{"changes":t.map(mt)})}),{threshold:ft})}var n=t.prototype;return n.ab=function(){this.ob.observe(this.eb.element)},n.destroy=function(){this.ob.disconnect(),this.ob=null,this.ub.destroy(),this.ub=null},t}());function mt(t){return{"time":t.time,"rootBounds":t.rootBounds,"boundingClientRect":t.boundingClientRect,"intersectionRect":t.intersectionRect,"intersectionRatio":t.intersectionRatio}}function dt(t){var n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}var ht="amp-apester-media";function vt(t,n,r){var i=r.skipTimer;t.classList.add("active"),_(n,"animation","progress ".concat(i,"s linear 1"));var e=setTimeout((function(){t.classList.remove("active"),clearTimeout(e)}),1e3*i)}var bt=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig");function gt(){var t,n=!!navigator.userAgent.match(bt);return t=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?"mobile".concat(n?"-webview":""):"desktop"}function wt(t,n,r,i,e){var a,o,u,s,c,l,f=(a="message",o=void 0,u=r,s=function(r){var e=i.contentWindow===r.source;Q(r).type===t&&e&&n(Q(r))},c=function(t){try{return s(t)}catch(t){var n,r;throw null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t),t}},l=function(){if(void 0!==W)return W;W=!1;try{var t={get capture(){return W=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return W}(),u.addEventListener(a,c,!!l&&o),function(){null==u||u.removeEventListener(a,c,!!l&&o),s=null,u=null,c=null});e.push(f)}var yt="amp-apester-media",kt={"type":"has_bottom_ad","adHeight":50},xt=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}(u,t);var i,a,o=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(i);if(a){var o=r(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return e(this,t)});function u(t){var n;return(n=o.call(this,t)).mat="https://renderer.apester.com",n.bat="https://display.apester.com",n.gat="https://static.qmerce.com",n.wat="https://static.apester.com/js/assets/loader_100x100.gif",n.DF=!1,n.tb=null,n.sb=null,n.yat=null,n.kat=null,n.xat=!1,n.Oat=!1,n.Sat=null,n.jat={},n.Ub=null,n.Aw=[],n.mb=null,n.Gg=null,n}var s=u.prototype;return s.preconnectCallback=function(t){var n=U(this.win,"preconnect");n.url(this.getAmpDoc(),this.bat,t),n.url(this.getAmpDoc(),this.mat,t),n.url(this.getAmpDoc(),this.gat,t)},s.isLayoutSupported=function(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)},s.zg=function(t){t&&!this.DF&&this.tb&&this.tb.contentWindow&&(T().fine(yt,"media seen"),this.DF=!0,this.tb.contentWindow.postMessage("interaction seen","*"))},s.buildCallback=function(){var t,n,r,i,e,a,o,u,s=this.element.getAttribute("width"),c=this.element.getAttribute("height");this.yat=g(s),this.kat=g(c),this.xat=this.element.hasAttribute("data-apester-channel-token"),this.Sat=(t=this.element.getAttribute("data-apester-media-id")||this.element.getAttribute("data-apester-channel-token"),"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",n=this.element,M().assert(t,"Either the data-apester-media-id or the data-apester-channel-token attributes must be specified for <amp-apester-media> %s",n,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.jat={playlist:this.xat,idOrToken:this.Sat,inative:"true"===this.element.getAttribute("data-apester-inative"),fallback:this.element.getAttribute("data-apester-fallback"),distributionChannelId:this.element.getAttribute("data-apester-channel-id"),renderer:!0,tags:(r=this.getAmpDoc(),i=this.element,o=function(t){var n=t&&t.getAttribute("data-apester-tags");return n&&n.split(",").map((function(t){return t.trim()}))||[]}(i)||[],u=function(t){return(t.getMetaByName("keywords")||"").split(",").map((function(t){return t.trim()})).filter(Boolean)}(r),o.concat(u.length?u:(e=r.getRootNode(),((a=e.querySelectorAll('script[type="application/ld+json"]'))?Array.prototype.slice.call(a):[]).map((function(t){return t&&"SCRIPT"==(n=t).tagName&&"APPLICATION/LD+JSON"==(null===(r=n.getAttribute("type"))||void 0===r?void 0:r.toUpperCase())&&m(t.textContent)||{};var n,r})).map((function(t){return t&&t.headline})).filter((function(t){return"string"==typeof t})).map((function(t){return t.trim().split(" ").filter((function(t){return t.length>2}))})).reduce((function(t,n){return t.concat(n)}),[]).slice(0,5)||[])).map((function(t){return t.toLowerCase().trim()})).filter((function(t,n,r){return r.indexOf(t)===n})))}},s.Aat=function(){var t=this.jat,n=t.distributionChannelId,r=t.fallback,i=t.idOrToken,e=t.inative,a=t.playlist,o=t.tags,u=encodeURIComponent(this.Sat),s="",c={renderer:!1};return c.platform=gt(),e?i?s="/inatives/".concat(i):n&&(s="/channels/".concat(n,"/inatives")):a&&o?(s="/tokens/".concat(u,"/interactions/random"),c.tags=o,c.fallback=!!r):s=a?"/tokens/".concat(u,"/interactions/random"):"/interactions/".concat(u,"/display"),it("".concat(this.bat).concat(s),c)},s.Iat=function(){var t,n=this.Aat();return(t=this.win,U(t,"xhr")).fetchJson(n,{}).then((function(t){return 200===t.status?t.json():t}))},s._at=function(t,n){var r={};return r.channelId=this.jat.distributionChannelId,r.type=this.jat.playlist?"playlist":"editorial",r.platform=gt(),r.cannonicalUrl=X(this.element).canonicalUrl,r.sdk="amp",it("".concat(this.mat,"/").concat(n?"v2":"interaction","/")+"".concat(encodeURIComponent(t)),r)},s.Eat=function(t){var n=this.element.ownerDocument.createElement("iframe");return n.setAttribute("frameborder","0"),n.setAttribute("allowtransparency","true"),n.setAttribute("scrolling","no"),n.src=t,n.name=this.win.location.href,n.height=this.kat,n.width=this.yat,n.classList.add("amp-apester-iframe"),n.classList.add("i-amphtml-fill-content"),n},s.zat=function(){var t=this.element.ownerDocument.createElement("img");return t.setAttribute("loading","lazy"),t.setAttribute("src",this.wat),E(t,{"width":z(100),"height":z(100)}),t},s.Rat=function(){var t=this.element.ownerDocument.createElement("div");t.setAttribute("overflow",""),t.className="amp-apester-overflow";var n=this.element.ownerDocument.createElement("button");return n.textContent="Full Size",t.appendChild(n),t},s.layoutCallback=function(){var t=this;this.element.classList.add("amp-apester-container");var n=U(this.win,"vsync");return this.Iat().then((function(r){if(!r||204===r.status)return T().warn(yt,"Display","No Content for provided tag"),t.unlayoutCallback();var i=r.payload,e=t.jat.playlist?i[Math.floor(Math.random()*i.length)]:i,a=e.interactionId,o=e.usePlayer,u=t._at(a,o),s=t.Eat(u);return t.mb=new pt(t,s),t.Ub=a,t.tb=s,t.Pat(),n.mutatePromise((function(){var n=t.Rat();t.element.appendChild(n),t.element.appendChild(s),function(t,n){var r=t.campaignData;r&&!r.disabledAmpCompanionAds?function(t){var n=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return $(t).then((function(t){return t?t.whenPolicyResolved(n):null}))}(t).catch((function(t){return T().error(ht,"Error determining consent state",t),4})),r=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return $(t).then((function(t){return t?t.getConsentStringInfo(n):null}))}(t,"default").catch((function(t){T().error(ht,"Error determining consent string",t)})),i=Promise.all([n,r]);return Promise.race([i,new Promise((function(t){setTimeout((function(){t([4,void 0])}),3e3)}))]).then((function(t){var n=t[0],r=t[1];switch(n){case 1:return{"gdpr":1,"user_consent":1,"gdprString":r};case 2:case 4:return{"gdpr":1,"user_consent":0,"gdprString":r};default:return{}}}))}(n).then((function(r){(function(t,n){var r=p(t,"campaignData.companionOptions");if(r){var i=p(r,"enabled"),e=p(r,"settings"),a=p(r,"rtcConfig");if(i&&e&&"gdt"===e.bannerAdProvider){var o=e.slot,u=6e4===e.options.autoRefreshTime?60:30;!function(t,n,r,i,e){var a=Math.max.apply(null,n.map((function(t){return t[0]}))),o=Math.max.apply(null,n.map((function(t){return t[1]}))),u=n.map((function(t){return t.join("x")})).join(),s=v(r.ownerDocument,"amp-ad",{"width":"".concat(a),"height":"".concat(o),"type":"doubleclick","layout":"fixed","data-slot":"".concat(t),"data-multi-size-validation":"false","data-multi-size":u,"data-enable-refresh":"".concat(i)});e&&s.setAttribute("rtc-config",JSON.stringify(e)),s.classList.add("i-amphtml-amp-apester-companion"),r.parentNode.insertBefore(s,r.nextSibling),Z(r).requestChangeSize(s,o,void 0)}(o,e.bannerSizes||[[300,250]],n,u,a)}}})(t,n),function(t,n,r){var i,e=p(t,"campaignData.companionCampaignOptions"),a=p(t,"campaignData.companionOptions.video"),o=(i=a)?i.companion.enabled?"above":i.companion_below.enabled?"below":i.floating.enabled?"floating":null:null;if(a&&a.enabled&&o&&"floating"!==o)switch(a.provider){case"sr":var u=null==e?void 0:e.companionCampaignId,s=a.videoTag;if(!u||!s)return;var c=function(t,n,r,i){var e=t.interactionId,a=t.publisherId,o=t.publisher,u={"param1":e,"param2":a,"param6":n,"page_url":X(r).canonicalUrl};return i.gdpr&&(u.gdpr=i.gdpr,u.user_consent=i.user_consent,u.param4=i.gdprString),o&&o.groupId&&(u.param7="apester.com:".concat(o.groupId),u.schain="1.0,1!apester.com,".concat(o.groupId,",1,,,,")),u}(t,u,n,r);!function(t,n,r,i){var e=dt(i),a=v(i.ownerDocument,"amp-ad",{"width":e.width,"height":e.height,"type":"blade","layout":"fixed","data-blade_player_type":"bladex","servingDomain":"ssr.streamrail.net","data-blade_macros":JSON.stringify(r),"data-blade_player_id":t,"data-blade_api_key":"5857d2ee263dc90002000001","data-enable-refresh":"".concat(30)});a.classList.add("i-amphtml-amp-apester-companion");var o="below"===n?i.nextSibling:i;i.parentNode.insertBefore(a,o),Z(i).requestChangeSize(a,e.height)}(s,o,c,n);break;case"aniview":var l=a.playerOptions,f=void 0===l?{}:l;if(!f.aniviewChannelId)return;!function(t,n,r,i){var e=dt(r),a=v(r.ownerDocument,"amp-iframe",{"scrolling":"no","id":"amp-iframe","title":"Ads","layout":"responsive","sandbox":"allow-scripts allow-same-origin allow-popups","allowfullscreen":"false","frameborder":"0","width":e.width,"height":e.height,"src":"https://player.avplayer.com/amp/ampiframe.html?AV_TAGID=".concat(t.aniviewPlayerId,"&AV_PUBLISHERID=5fabb425e5d4cb4bbc0ca7e4")});i.gdpr&&(a["data-av_gdpr"]=i.gdpr,a["data-av_consent"]=i.user_consent),a.classList.add("i-amphtml-amp-apester-companion");var o="below"===n?r.nextSibling:r;r.parentNode.insertBefore(a,o),Z(r).requestChangeSize(a,e.height)}(f,o,n,r)}}(t,n,r),function(t,n){var r=p(t,"campaignData.bottomAdOptions");if(r){var i=p(r,"enabled"),e=p(r,"rtcConfig");i&&"gpt"===r.videoPlayer&&function(t,n,r,i){var e=n[0][0],a=n[0][1],o=v(r.ownerDocument,"amp-ad",{"width":"".concat(e),"height":"".concat(a),"type":"doubleclick","layout":"fixed","data-slot":"".concat(t),"data-multi-size-validation":"false","data-enable-refresh":"".concat(30)});i&&o.setAttribute("rtc-config",JSON.stringify(i)),o.classList.add("i-amphtml-amp-apester-bottom-ad"),r.appendChild(o),Z(r).requestChangeSize(o,a)}(r.tag,[[300,50]],n,e)}}(t,n),function(t,n,r){var i=p(t,"campaignData.playerOptions");if(i){var e=i.find((function(t){return"va"===t.player.type}));if(e){var a=e.requests.find((function(t){return"idle"===t.type})),o=e.player.provider;if("aniview"===o.type){var u=o.options||{};if(!u.aniviewChannelId)return;!function(t,n,r,i){var e=function(t){var n=t.clientWidth;return{width:n,height:Math.ceil(.6*n)}}(n),a=v(n.ownerDocument,"amp-iframe",{"scrolling":"no","id":"amp-iframe","title":"Ads","layout":"responsive","sandbox":"allow-scripts allow-same-origin allow-popups","allowfullscreen":"false","frameborder":"0","width":e.width,"height":e.height,"class":"i-amphtml-amp-apester-in-unit","src":"https://player.avplayer.com/amp/ampiframe.html?AV_TAGID=".concat(t.aniviewPlayerId,"&AV_PUBLISHERID=5fabb425e5d4cb4bbc0ca7e4")});r.gdpr&&(a["data-av_gdpr"]=r.gdpr,a["data-av_consent"]=r.user_consent);var o=v(n.ownerDocument,"div",{"class":"i-amphtml-amp-apester-in-unit-wrap"}),u=v(n.ownerDocument,"div",{"class":"i-amphtml-amp-apester-progress-bar"});o.appendChild(u),o.appendChild(a),n.appendChild(o),vt(o,u,i);var s=i.skipTimer,c=i.timeout;setInterval((function(){vt(o,u,i)}),1e3*(c+s)),Z(n).requestChangeSize(a,e.height)}(u,n,r,a.options)}}}}(t,n,r)})):R||(R=Promise.resolve(void 0))}(e,t.element)})).then((function(){return t.loadPromise(s)})).then((function(){return n.mutatePromise((function(){var n,r,i;if(t.tb){t.tb.classList.add("i-amphtml-apester-iframe-ready");var a=e.campaignData;if(a){var o=t.getAmpDoc();Y(t.win).installExtensionForDoc(o,"amp-iframe");var u=a.bottomAdOptions;null!=u&&u.enabled&&(t.Oat=!0,Y(t.win).installExtensionForDoc(o,"amp-ad"),t.tb.contentWindow.postMessage(kt,"*")),t.tb.contentWindow.postMessage({type:"campaigns",data:a},"*")}}var s=null!==(n=null==e||null===(r=e.data)||void 0===r||null===(i=r.size)||void 0===i?void 0:i.height)&&void 0!==n?n:0;s!=t.kat&&(t.kat=s,t.xat?t.attemptChangeHeight(s):t.forceChangeHeight(s))}))})).then((function(){t.Gg=function(t,n,r){var i=d(t),e=k.get(i);e||k.set(i,e=w(O,i));var a=x.get(t);return a||(a=[],x.set(t,a)),a.push(n),e.observe(t),function(){!function(t,n){var r,i,e,a=x.get(t);if(a&&(i=n,-1!=(e=(r=a).indexOf(i))&&(r.splice(e,1),1)&&!a.length)){var o=d(t),u=k.get(o);null==u||u.unobserve(t),x.delete(t)}}(t,n)}}(t.element,(function(n){var r=n.isIntersecting;return t.zg(r)}))}))})).catch((function(t){M().error(yt,"Display",t)}))},s.createPlaceholderCallback=function(){var t=this.element.ownerDocument.createElement("div"),n=this.zat();return this.element.hasAttribute("aria-label")?t.setAttribute("aria-label","Loading - "+this.element.getAttribute("aria-label")):t.setAttribute("aria-label","Loading Apester Media"),t.setAttribute("placeholder",""),t.className="amp-apester-loader",E(n,{position:"relative",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}),t.appendChild(n),this.sb=t,t},s.unlayoutOnPause=function(){return!0},s.unlayoutCallback=function(){var t;return null===(t=this.Gg)||void 0===t||t.call(this),this.Gg=null,this.tb&&(this.mb.destroy(),this.mb=null,this.Aw.forEach((function(t){return t()})),h(this.tb),this.tb=null),this.sb&&(h(this.sb),this.sb=null),!1},s.Pat=function(){var t=this;wt("fullscreen_on",(function(n){t.Ub===n.id&&t.element.classList.add("amp-apester-fullscreen")}),this.win,this.tb,this.Aw),wt("fullscreen_off",(function(n){t.Ub===n.id&&t.element.classList.remove("amp-apester-fullscreen")}),this.win,this.tb,this.Aw),wt("apester_resize_unit",(function(n){t.Ub===n.id&&n.height&&(t.attemptChangeHeight(n.height),t.Oat&&t.tb.contentWindow.postMessage(kt,"*"))}),this.win,this.tb,this.Aw)},u}(t.BaseElement);t.registerElement(yt,xt,".amp-apester-iframe{transition:opacity 0.4s;opacity:0}.i-amphtml-apester-iframe-ready{transition:opacity 1s ease-out;opacity:1!important}.amp-apester-loader{height:100%;width:100%;background-color:#fff}.amp-apester-container{max-width:700px;margin:0 auto;display:block;position:relative;width:100%}.amp-apester-overflow{position:absolute;margin:auto;top:50%;left:50%;transform:translate(-50%,-50%)}.amp-apester-overflow button{border:none;background:#fff;cursor:pointer;padding:25px 80px;text-transform:uppercase;letter-spacing:1px;font-weight:700;outline:none;position:relative}.amp-apester-fullscreen{background:rgba(34,36,38,0.97)!important;position:fixed!important;width:100vw!important;height:100vh!important;z-index:2147483646!important;top:0;zoom:1;-webkit-overflow-scrolling:touch!important}.i-amphtml-amp-apester-companion{display:block;margin:10px auto}.i-amphtml-amp-apester-bottom-ad{display:block!important;position:absolute!important;bottom:0!important;left:50%!important;transform:translateX(-50%)!important;margin:0!important}.i-amphtml-amp-apester-in-unit-wrap{display:none!important;position:absolute!important;top:0!important;bottom:0!important;left:0!important;right:0!important;background-color:#626262!important}.i-amphtml-amp-apester-in-unit-wrap.active{display:block!important}.i-amphtml-amp-apester-progress-bar{width:100%;height:4px;background-color:#ee9802}@keyframes progress{0%{width:0}}.i-amphtml-amp-apester-in-unit{display:block!important;position:relative!important;top:50%!important;transform:translateY(-50%)!important;margin:0!important}\n/*# sourceURL=/extensions/amp-apester-media/0.1/amp-apester-media.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-apester-media-0.1.js.map
;
(self.AMP=self.AMP||[]).push({m:0,v:"2301041800000",n:"amp-mraid",ev:"0.1",l:!0,f:function(n,t){!function(){Array.isArray;var t=Object.prototype;t.hasOwnProperty,t.toString;var r=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function i(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(n)}catch(n){return t}}function u(n){var t=(n||self).location;return function(n){var t,u=Object.create(null);if(!n)return u;for(;t=r.exec(n);){var e=i(t[1],t[1]),o=t[2]?i(t[2].replace(/\+/g," "),t[2]):"";u[e]=o}return u}(t.originalHash||t.hash)}var e="";function o(n){var t;return e||(e=(null===(t=n.AMP_CONFIG)||void 0===t?void 0:t.v)||"01".concat("2301041800000")),e}function s(n,t){var r=t||u(n);return["1","actions","amp","amp4ads","amp4email"].includes(r.development)||!!n.AMP_DEV_MODE}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var c=self.__AMP_LOG;function f(){return c.dev||(c.dev=function(n,t){throw new Error("failed to call initLogConstructor")}())}function a(n,t,r,i,u,e,o,s,c,f,a){return n}var l=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))};function h(n,t,r,i){var u=d(n),e=p(u);!function(n,t,r,i,u,e){var o=w(n),s=o[r];s||(s=o[r]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),s.ctor||(s.ctor=i,s.context=t,s.sharedInstance=!1,s.resolve&&b(n,r))}(e,u,t,r),i&&b(e,t)}function v(n,t,r){!function(n,t,r){var i=w(n),u=i[t];u?u.reject&&u.reject(r):(i[t]=g(),i[t].reject(r))}(p(d(n)),t,r)}function m(n,t){return function(n,t){var r=function(n,t){var r=w(n)[t];return r?r.promise?r.promise:(b(n,t),r.promise=Promise.resolve(r.obj)):null}(n,t);if(r)return r;var i=w(n);return i[t]=g(),i[t].promise}(p(n),t)}function d(n){return n.nodeType?(r=n,t=(r.ownerDocument||r).defaultView,function(n,t){return b(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),"ampdoc")}(t)).getAmpDoc(n):n;var t,r}function p(n){var t=d(n);return t.isSingleDoc()?t.win:t}function b(n,t){a(function(n,t){var r=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!r||!r.ctor)}(n,t));var r=w(n)[t];return r.obj||(a(r.ctor),a(r.context),r.obj=new r.ctor(r.context),a(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function w(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}function g(){var n=new l,t=n.promise,r=n.reject,i=n.resolve;return t.catch((function(){})),{obj:null,promise:t,resolve:i,reject:r,context:null,ctor:null}}var j="host-visibility",x="host-fullscreen",y="host-exit",k=function(){function n(){}return n.isAvailable=function(n){return!!(t=n,d(t)).getHeadNode().querySelector("script[host-service]");var t},n.visibilityForDoc=function(n){return m(n,j)},n.installVisibilityServiceForDoc=function(n,t){h(n,j,t,!0)},n.rejectVisibilityServiceForDoc=function(n,t){v(n,j,t)},n.fullscreenForDoc=function(n){return m(n,x)},n.installFullscreenServiceForDoc=function(n,t){h(n,x,t,!0)},n.rejectFullscreenServiceForDoc=function(n,t){v(n,x,t)},n.exitForDoc=function(n){return m(n,y)},n.installExitServiceForDoc=function(n,t){h(n,y,t,!0)},n.rejectExitServiceForDoc=function(n,t){v(n,y,t)},n}(),P=function(){function n(n){this.nnn=n,this.tnn=!1}var t=n.prototype;return t.onVisibilityChange=function(n){this.nnn.addEventListener("exposureChange",(function(t,r,i){var u,e,o,s;n({visibleRect:(u=r&&r.x?r.x:0,e=r&&r.y?r.y:0,o=r&&r.width?r.width:0,s=r&&r.height?r.height:0,{left:u,top:e,width:o,height:s,bottom:e+s,right:u+o,x:u,y:e}),visibleRatio:t/100})}))},t.enterFullscreenOverlay=function(n){return this.tnn?Promise.resolve(!1):(this.nnn.expand(),this.tnn=!0,Promise.resolve(!0))},t.exitFullscreenOverlay=function(n){return this.tnn?(this.nnn.close(),this.tnn=!1,Promise.resolve(!0)):Promise.resolve(!1)},t.openUrl=function(n){return this.nnn.open(n),Promise.resolve(!0)},n}(),R=function(){return self.AMP.config.urls}(),C="amp-mraid",I=function(){function n(n){var t=this;this.te=n,this.rnn=!1,this.nnn=null,this.inn=!0;var r,i=this.te.getHeadNode().querySelectorAll('script[host-service="amp-mraid"]');if(i.length>1)f().error(C,"Multiple amp-mraid scripts.");else if(i.length<1)f().error(C,"Missing amp-mraid scripts.");else{if(null!=i[0].getAttribute("no-fallback")&&(this.inn=!1),"inabox"!==(r=self,r.__AMP_MODE?r.__AMP_MODE:r.__AMP_MODE=function(n){return{localDev:!1,development:s(n,u(n)),esm:!1,test:!1,rtvVersion:o(n),ssrReady:!1}}(r)).runtime)return f().fine(C,"Only supported with Inabox"),void this.unn();var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","".concat(R.cdn,"/mraid.js")),e.addEventListener("load",(function(){t.enn()})),e.addEventListener("error",(function(){t.rnn||t.unn()})),document.getElementsByTagName("head").item(0).appendChild(e)}}var t=n.prototype;return t.onn=function(){var n=new P(this.nnn);this.nnn.addEventListener?k.installVisibilityServiceForDoc(this.te,(function(){return n})):k.rejectVisibilityServiceForDoc(this.te,{fallback:!1}),this.nnn.expand&&this.nnn.close?k.installFullscreenServiceForDoc(this.te,(function(){return n})):k.rejectFullscreenServiceForDoc(this.te,{fallback:!1}),this.nnn.open?k.installExitServiceForDoc(this.te,(function(){return n})):k.rejectExitServiceForDoc(this.te,{fallback:!0}),this.rnn=!0},t.enn=function(){var n=this,t=window.mraid;t&&t.getState?(this.nnn=t,"loading"===t.getState()?t.addEventListener("ready",(function(){n.onn()})):this.onn()):this.unn()},t.unn=function(){k.rejectVisibilityServiceForDoc(this.te,{fallback:this.inn}),k.rejectExitServiceForDoc(this.te,{fallback:!0}),k.rejectFullscreenServiceForDoc(this.te,{fallback:this.inn})},n}();n.registerServiceForDoc(C,I)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-mraid-0.1.js.map
;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}import{createElement as a}from"../bento.mjs";import{useCallback as i,useState as s}from"../bento.mjs";import{forwardRef as l}from"../bento.mjs";import{useValueRef as c}from"../bento.mjs";import{createElement as m}from"../bento.mjs";import{useCallback as u,useEffect as f,useImperativeHandle as d,useLayoutEffect as b,useRef as g}from"../bento.mjs";import{forwardRef as p}from"../bento.mjs";import{ContainWrapper as j,useValueRef as O}from"../bento.mjs";import{useAmpContext as w,useLoading as v}from"../bento.mjs";var h=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],y=()=>!1,S=p((function(e,t){let{allow:r,allowFullScreen:a,iframeStyle:i,name:s,title:l,matchesMessagingOrigin:c=y,messageHandler:p,ready:S=!0,loading:R,onReadyState:E,sandbox:x,src:F}=e,I=o(e,h);const{playable:M}=w(),z=v(R),H="unload"!==z,L=g(!1),V=O(E),k=u((e=>{if(e!==L.current){L.current=e;const t=V.current;null==t||t(e?"complete":"loading")}}),[V]),q=g(null);return d(t,(()=>({get readyState(){return L.current?"complete":"loading"},get node(){return q.current}})),[]),b((()=>{H||k(!1)}),[H,k]),f((()=>{const e=q.current;if(!M&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[M]),b((()=>{const e=q.current;if(!e||!H)return;const t=e=>{const t=q.current;t&&e.source==t.contentWindow&&c(e.origin)&&p(e)},{defaultView:r}=e.ownerDocument;return r.addEventListener("message",t),()=>r.removeEventListener("message",t)}),[c,p,H,S]),m(j,n(n({},I),{},{layout:!0,size:!0,paint:!0}),H&&S&&m("iframe",{allow:r,allowFullScreen:a,frameBorder:"0",loading:z,name:s,onLoad:()=>k(!0),part:"iframe",ref:q,sandbox:x,scrolling:"no",src:F,style:n(n({},i),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:l}))}));S.displayName="IframeEmbed";var{hasOwnProperty:R,toString:E}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var x=["captioned","onLoad","requestResize","shortcode","title"],F={},I=e=>"https://www.instagram.com"===e,M=l((function(e,t){let{captioned:r,onLoad:l,requestResize:m,shortcode:u,title:f="Instagram"}=e,d=o(e,x);const[b,g]=s(F),[p,j]=s(0),O=c(l),w=i((e=>{const t=(r=function(e){return e.data}(e),JSON.parse(r));var r;if("MEASURE"==t.type&&t.details){var n;const e=t.details.height;m&&m(e),g({"height":e}),j(1),null===(n=O.current)||void 0===n||n.call(O)}}),[m,O]);return a(S,n({iframeStyle:{opacity:p},matchesMessagingOrigin:I,messageHandler:w,ref:t,src:"https://www.instagram.com/p/"+encodeURIComponent(u)+"/embed/"+(r?"captioned/":"")+"?cr=1&v=12",title:f,wrapperStyle:b},d))}));M.displayName="Instagram";var z=class extends e{};z.Component=M,z.loadable=!0,z.unloadOnPause=!0,z.props={"captioned":{attr:"data-captioned"},"shortcode":{attr:"data-shortcode"},"title":{attr:"title"}},z.usesShadowDom=!0,z.layoutSizeDefined=!0;import{defineBentoElement as H}from"../bento.mjs";H("bento-instagram",z,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-instagram-1.0.mjs.map
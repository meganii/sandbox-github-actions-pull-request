;
function n(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function e(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,o)}return t}function t(t){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?e(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var o,r,{hasOwnProperty:i,toString:a}=Object.prototype;function c(n,e){return Object.keys(n).reduce(((t,o)=>(e.includes(o)||(t[o]=n[o]),t)),{})}function l(n,e,t){let o=n[e];return void 0===o&&(o=t(n,e),n[e]=o),o}function d(n,e,t,o,r,i,a,c,l,d,u){return n}import{createElement as u}from"../bento.mjs";import{useLayoutEffect as s,useRef as f}from"../bento.mjs";import{PreactBaseElement as m}from"../bento.mjs";import{forwardRef as b}from"../bento.mjs";import{useDOMHandle as p}from"../bento.mjs";import{useSlotContext as h}from"../bento.mjs";function v(n){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function g(n){var e=function(n,e){if("object"!==v(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,"string");if("object"!==v(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"===v(e)?e:String(e)}function x(){return o||(o=Promise.resolve(void 0))}function y(n,e){if(null==n)return{};var t,o,r={},i=Object.keys(n);for(o=0;o<i.length;o++)t=i[o],e.indexOf(t)>=0||(r[t]=n[t]);return r}import{createContext as j,createElement as S}from"../bento.mjs";import{useCallback as O,useContext as w,useEffect as E,useImperativeHandle as I,useLayoutEffect as M,useMemo as _,useRef as $,useState as C}from"../bento.mjs";import{forwardRef as k}from"../bento.mjs";import{WithAmpContext as A}from"../bento.mjs";import{useCallback as H,useLayoutEffect as P}from"../bento.mjs";import{useAmpContext as Y}from"../bento.mjs";function z(n,e=0){var t,o;return null!==(t=null!==(o=n.tabindex)&&void 0!==o?o:n.tabIndex)&&void 0!==t?t:e}var L=["Webkit","webkit","Moz","moz","ms","O","o"];function T(n,e,t){if(N(e))return e;r||(r=Object.create(null));let o=r[e];if(!o||t){if(o=e,void 0===n[e]){const t=function(n){return n.charAt(0).toUpperCase()+n.slice(1)}(e),r=function(n,e){for(let t=0;t<L.length;t++){const o=L[t]+e;if(void 0!==n[o])return o}return""}(n,t);void 0!==n[r]&&(o=r)}t||(r[e]=o)}return o}function R(n,e,t,o,r){const i=T(n.style,e,r);if(!i)return;const a=o?t+o:t;n.style.setProperty(function(n){const e=n.replace(/[A-Z]/g,(n=>"-"+n.toLowerCase()));return L.some((n=>e.startsWith(n+"-")))?`-${e}`:e}(i),a)}function D(n,e,t){const o=T(n.style,e,t);if(o)return N(o)?n.style.getPropertyValue(o):n.style[o]}function F(n,e){for(const t in e)R(n,t,e[t])}function N(n){return n.startsWith("--")}function W(n,e,t){n.classList.add("i-amphtml-animating");let o=e();return o.onfinish=o.oncancel=()=>{o=null,t&&t(),n.classList.remove("i-amphtml-animating")},()=>{o&&o.cancel()}}function X(n){const e=window.innerHeight,t=Math.abs(n)/e*500;return Math.min(Math.max(t,200),500)}var Z=["animate","as","children","expandSingleSection","id"],q=["animate","as","children","expanded","id","onExpandStateChange"],B=j({}),G=j({}),J={},K={},Q=function(){let n=0;return()=>String(++n)}(),U=()=>String(Math.floor(1e5*Math.random())),V=k((function(n,e){let{animate:o=!1,as:r="section",children:i,expandSingleSection:a=!1,id:l}=n,d=y(n,Z);const[u,s]=C(J),f=$(K),[m]=C(U),b=l||`a${m}`;E((()=>{a&&s((n=>{const e={};let t=0;for(const o in n)e[o]=n[o]&&0==t++;return e}))}),[a]);const p=O(((n,e,{current:o})=>(s((t=>nn(n,e,t,a))),f.current=t(t({},f.current),{},{[n]:o}),()=>{s((e=>c(e,n))),f.current=c(f.current,n)})),[a]),h=O(((n,e)=>{s((t=>{const o=null!=e?e:!t[n],r=nn(n,o,t,a);return x().then((()=>{for(const n in t){const e=f.current[n];e&&t[n]!=r[n]&&e(r[n])}})),r}))}),[a]),v=O(((n,e)=>{var t;return null!==(t=u[n])&&void 0!==t?t:e}),[u]),g=O((n=>{if(n)n in u&&h(n);else if(!a)for(const n in u)h(n)}),[u,h,a]),j=O((n=>{if(n)v(n,!0)||h(n);else if(!a)for(const n in u)v(n,!0)||h(n)}),[u,h,v,a]),w=O((n=>{if(n)v(n,!1)&&h(n);else for(const n in u)v(n,!1)&&h(n)}),[u,h,v]);I(e,(()=>({toggle:g,expand:j,collapse:w})),[g,w,j]);const M=_((()=>({registerSection:p,toggleExpanded:h,isExpanded:v,animate:o,prefix:b})),[p,h,v,o,b]);return S(r,t({id:l},d),S(B.Provider,{value:M},i))}));function nn(n,e,o,r){let i;if(r&&e){i={[n]:e};for(const e in o)e!=n&&(i[e]=!1)}else i=t(t({},o),{},{[n]:e});return i}function en(n){let{animate:e=!1,as:o="section",children:r,expanded:i=!1,id:a,onExpandStateChange:c}=n,l=y(n,q);const[d]=C(Q),u=a||d,[s]=C(U),[f,m]=C(i),[b,p]=C(null),[h,v]=C(null),{animate:g,isExpanded:j,prefix:E,registerSection:I,toggleExpanded:k}=w(B),A=j?j(u,i):f,H=null!=g?g:e,P=b||`${E||"a"}-content-${u}-${s}`,Y=h||`${E||"a"}-header-${u}-${s}`,z=$(null);z.current=c,M((()=>{if(I)return I(u,i,z)}),[I,u,i]);const L=O((n=>{k?k(u,n):m((e=>{const t=null!=n?n:!e;return x().then((()=>{const n=z.current;n&&n(t)})),t}))}),[u,k]),T=_((()=>({animate:H,contentId:P,headerId:Y,expanded:A,toggleHandler:L,setContentId:p,setHeaderId:v})),[H,P,Y,A,L]);return S(o,t({},l),S(G.Provider,{value:T},r))}function tn(n){let e="class",{as:o="div",children:r,id:i,role:a="button",[e]:c=""}=n,l=y(n,["as","children","id","role",e].map(g));const{contentId:d,expanded:u,headerId:s,setHeaderId:f,toggleHandler:m}=w(G);return M((()=>{f&&f(i)}),[f,i]),S(o,t(t({},l),{},{id:s,role:a,class:`${c} section-child-76fac82 header-76fac82`,tabindex:z(l),"aria-controls":d,onClick:()=>m(),"aria-expanded":String(u)}),r)}function on(n){let e="class",{as:o="div",children:r,id:i,role:a="region",[e]:c=""}=n,l=y(n,["as","children","id","role",e].map(g));const d=$(null),u=$(!1),{animate:s,contentId:f,expanded:m,headerId:b,setContentId:p}=w(G);return E((()=>(u.current=!0,()=>u.current=!1)),[]),M((()=>{p&&p(i)}),[p,i]),M((()=>{const n=u.current,e=d.current;if(s&&n&&e&&e.animate)return m?function(n){return W(n,(()=>{const e=D(n,"height"),t=D(n,"opacity"),o=D(n,"overflowY");F(n,{height:0,opacity:0,overflowY:"auto"});const r=n.scrollHeight;F(n,{height:e,opacity:t,overflowY:o});const i=X(r);return n.animate([{height:0,opacity:0,overflowY:"hidden"},{height:r+"px",opacity:1,overflowY:"hidden"}],{easing:"cubic-bezier(0.47, 0, 0.745, 0.715)",duration:i})}))}(e):function(n){return W(n,(()=>{const e=n.offsetHeight,t=X(e);return n.animate([{height:e+"px",opacity:1,overflowY:"hidden"},{height:"0",opacity:0,overflowY:"hidden"}],{easing:"cubic-bezier(0.39, 0.575, 0.565, 1)",duration:t})}))}(e)}),[m,s]),S(A,{renderable:m},S(o,t(t({},l),{},{ref:d,class:c+" section-child-76fac82"+(m?"":" content-hidden-76fac82"),id:f,"aria-labelledby":b,role:a}),r))}V.displayName="Accordion";var rn=class extends m{init(){const n=n=>e=>{var t;!function(n,e,t){const o=n.hasAttribute(e),r=void 0!==t?t:!o;r!==o&&(r?n.setAttribute(e,""):n.removeAttribute(e))}(n,"expanded",e),null===(t=n.__AMP_PR)||void 0===t||t.call(n),this.triggerEvent(n,e?"expand":"collapse")},{element:e}=this,t=new MutationObserver((()=>{this.mutateProps(an(e,t,n))}));t.observe(e,{attributeFilter:["expanded","id"],subtree:!0,childList:!0});const{"children":o}=an(e,t,n);return{"children":o}}};function an(n,e,o){var r,i,a;return{"children":(i=n,a="section",d(/^[\w-]+$/.test(a)),"> section",(r=i.querySelectorAll(function(n,e){return n.replace(/^|,/g,"$&:scope ")}("> section")))?Array.prototype.slice.call(r):[]).map((n=>{n.__AMP_PR||(n.__AMP_PR=()=>e.takeRecords());const r=l(n,"__AMP_H_SHIM",ln),i=l(n,"__AMP_C_SHIM",un),a=l(n,"__AMP_EXPAND_STATE_SHIM",o),c={"key":n,"expanded":n.hasAttribute("expanded"),"id":n.getAttribute("id"),"onExpandStateChange":a},d={"as":r,"id":n.firstElementChild.getAttribute("id"),"role":n.firstElementChild.getAttribute("role")||void 0},s={"as":i,"id":n.lastElementChild.getAttribute("id"),"role":n.lastElementChild.getAttribute("role")||void 0};return u(en,t({},c),u(tn,t({},d)),u(on,t({},s)))}))}}function cn(n,{"aria-controls":e,"aria-expanded":t,id:o,onClick:r,role:i}){const a=n.firstElementChild;return s((()=>{if(a&&r)return a.setAttribute("id",o),a.classList.add("i-amphtml-accordion-header"),a.addEventListener("click",r),a.hasAttribute("tabindex")||a.setAttribute("tabindex",0),a.setAttribute("aria-expanded",t),a.setAttribute("aria-controls",e),a.setAttribute("role",i),n.__AMP_PR&&n.__AMP_PR(),()=>{a.removeEventListener("click",d(r))}}),[n,a,o,i,r,e,t]),u("header",null)}var ln=n=>cn.bind(null,n);function dn(n,{"aria-labelledby":e,id:t,role:o},r){const i=n.lastElementChild,a=f();return a.current=i,h(a),p(r,i),s((()=>{i&&(i.classList.add("i-amphtml-accordion-content"),i.setAttribute("id",t),i.setAttribute("role",o),i.setAttribute("aria-labelledby",e),n.__AMP_PR&&n.__AMP_PR())}),[n,i,t,o,e]),u("div",null)}var un=n=>b(dn.bind(null,n));rn.Component=V,rn.detached=!0,rn.props={"animate":{attr:"animate",type:"boolean",media:!0},"expandSingleSection":{attr:"expand-single-section",type:"boolean"}};import{defineBentoElement as sn}from"../bento.mjs";sn("bento-accordion",rn,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-accordion-1.0.mjs.map
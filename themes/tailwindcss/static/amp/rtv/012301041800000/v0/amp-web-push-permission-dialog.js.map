{"version":3,"file":"amp-web-push-permission-dialog.js","mappings":"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","names":["Array","isArray","_Object$prototype","Object","prototype","opt_initial","obj","create","assign","hasOwnProperty","toString","regex","match","nil","dash","hexEscape","chars","slice","charCodeAt","QUERY_STRING_REGEX","component","fallback","arguments","decodeURIComponent","e","TAG","target","props","i","length","descriptor","enumerable","configurable","writable","defineProperty","key","self","__AMP_LOG","user","dev","userForEmbed","logs","levelFunc","opt_suffix","Error","callLogConstructor","event","data","cachedAnchorEl","urlCache","LruCache","capacity","this","capacity_","size_","access_","cache_","map","has","_proto","get","cacheable","access","payload","put","evict_","oldestKey","cache","oldest","undefined","LruCache2","url","opt_nocache","document","createElement","__AMP_URL_CACHE","anchorEl","opt_cache","href","protocol","origin","info","host","hostname","port","pathname","search","hash","frozen","parseUrlWithA","Set","WindowMessenger","options","debug","windowContext","window","messages_","listeners_","debug_","listening_","connecting_","connected_","channel_","messagePort_","onListenConnectionMessageReceivedProc_","onConnectConnectionMessageReceivedProc_","onChannelMessageReceivedProc_","window_","Constructor","staticProps","listen","allowedOrigins","Promise","resolve","reject","_this","onListenConnectionMessageReceived_","bind","addEventListener","fine","then","send","Topics","CONNECT_HANDSHAKE","isAllowedOrigin_","normalizedOrigin","parseUrlDeprecated","resolvePromise","rejectPromise","messageChannelEvent","message","getData","messagePorts","ports","removeEventListener","onChannelMessageReceived_","start","connect","remoteWindowContext","expectedRemoteOrigin","_this2","MessageChannel","port1","onConnectConnectionMessageReceived_","postMessage","topic","port2","messagePort","existingMessage","promiseResolver","sendReply_","listeners","listener","on","callback","push","off","callbackIndex","indexOf","splice","id","isReply","_this3","crypto","getRandomValues","Uint8Array","join","_this4","WindowMessenger2","NOTIFICATION_PERMISSION_STATE","SERVICE_WORKER_STATE","SERVICE_WORKER_REGISTRATION","SERVICE_WORKER_QUERY","STORAGE_GET","_defineProperties","AmpWebPushPermissionDialog","ampMessenger_","isCurrentDialogPopup","opener","requestNotificationPermission","Notification","requestPermission","permission","run","onCloseIconClick_","storeNotificationPermission_","showTargetPermissionSection_","showPostloadSection_","onPermissionDefaultOrGranted_","onPermissionDenied_","closeIcon","querySelector","closeDialog","close","queryParams","queryString","params","exec","name","tryDecodeUriComponent","value","replace","parseQueryString","fakeLocation","location","redirectLocation","redirectToUrl","navigator","permissions","query","permissionStatus","onchange","DEFAULT","localStorage","setItem","allSections","querySelectorAll","section","setDomElementVisibility_","ident","String","escaper","preloadSection","postloadSection","domElement","isVisible","invisibilityCssClassName","classList","remove","add","result","closeFrame","parsedUrl","AmpWebPushPermissionDialog2","_ampWebPushPermissionDialog"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["src/core/types/array.js","src/core/types/object/index.js","third_party/css-escape/css-escape.js","src/core/types/string/url.js","build/all/amp-web-push-0.1/vars.js","node_modules/@babel/runtime/helpers/esm/createClass.js","src/utils/log.js","src/utils/event-helper.js","src/core/data-structures/lru-cache.js","src/url.js","build/all/amp-web-push-0.1/window-messenger.js","build/all/amp-web-push-0.1/amp-web-push-permission-dialog.js","src/core/dom/css-selectors.js"]}

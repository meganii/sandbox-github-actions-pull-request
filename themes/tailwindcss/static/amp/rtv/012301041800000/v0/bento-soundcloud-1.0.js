;
!function(n){var t=self.BENTO=self.BENTO||{};(t.bento=t.bento||[]).push((function(n){"use strict";function t(n,e){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,e)}function e(n){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function u(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function i(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function a(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){u(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function l(n,t){if(null==n)return{};var e,r,o={},u=Object.keys(n);for(r=0;r<u.length;r++)e=u[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}var c;Array.isArray;var f="unload",s=(u(c={},"auto",0),u(c,"lazy",1),u(c,"eager",2),u(c,f,3),"loading"),d="complete",b=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],y=function(){return!1},p=(0,n.forwardRef)((function(t,e){var r=t.allow,o=t.allowFullScreen,u=t.iframeStyle,i=t.name,c=t.title,p=t.matchesMessagingOrigin,v=void 0===p?y:p,m=t.messageHandler,h=t.ready,g=void 0===h||h,O=t.loading,j=t.onReadyState,w=t.sandbox,S=t.src,k=l(t,b),R=(0,n.useAmpContext)().playable,I=(0,n.useLoading)(O),E=I!==f,x=(0,n.useRef)(!1),T=(0,n.useValueRef)(j),B=(0,n.useCallback)((function(n){if(n!==x.current){x.current=n;var t=T.current;null==t||t(n?d:s)}}),[T]),C=(0,n.useRef)(null);return(0,n.useImperativeHandle)(e,(function(){return{get readyState(){return x.current?d:s},get node(){return C.current}}}),[]),(0,n.useLayoutEffect)((function(){E||B(!1)}),[E,B]),(0,n.useEffect)((function(){var n=C.current;!R&&n&&(function(n){return!(!n||"about:blank"==n||n.includes("#"))}(n.src)?n.src=n.src:n.parentNode.insertBefore(n,n.nextSibling))}),[R]),(0,n.useLayoutEffect)((function(){var n=C.current;if(n&&E){var t=function(n){var t=C.current;t&&n.source==t.contentWindow&&v(n.origin)&&m(n)},e=n.ownerDocument.defaultView;return e.addEventListener("message",t),function(){return e.removeEventListener("message",t)}}}),[v,m,E,g]),(0,n.createElement)(n.ContainWrapper,a(a({},k),{},{layout:!0,size:!0,paint:!0}),E&&g&&(0,n.createElement)("iframe",{allow:r,allowFullScreen:o,frameBorder:"0",loading:I,name:i,onLoad:function(){return B(!0)},part:"iframe",ref:C,sandbox:w,scrolling:"no",src:S,style:a(a({},u),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:c}))}));p.displayName="IframeEmbed";var v=Object.prototype;v.hasOwnProperty,v.toString,self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var m=["color","onLoad","playlistId","secretToken","trackId","visual"],h=function(n){return"https://w.soundcloud.com"===n},g=function(n){!function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&t(n,e)}(a,n);var r,u,i=(r=a,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=e(r);if(u){var i=e(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return o(this,n)});function a(){return i.apply(this,arguments)}return a.getPreconnects=function(){return["https://api.soundcloud.com/"]},a}(n.PreactBaseElement);g.Component=function(t){var e=t.color,r=t.onLoad,o=t.playlistId,u=t.secretToken,i=t.trackId,c=t.visual,f=void 0!==c&&c,s=l(t,m),d=(0,n.useRef)(null),b=(0,n.useValueRef)(r);(0,n.useEffect)((function(){return function(){var n,t;null===(n=d.current)||void 0===n||null===(t=n.contentWindow)||void 0===t||t.postMessage(JSON.stringify({"method":"pause"}),"https://w.soundcloud.com"),d.current=null}}),[]);var y=(0,n.useCallback)((function(n){var t,e,r=(t=function(n){return n.data}(n),JSON.parse(t));"ready"===r.method&&(null===(e=b.current)||void 0===e||e.call(b))}),[b]);if(!function(n,t){return null!=t||void 0!==n||("data-trackid or data-playlistid is required for <amp-soundcloud>",console.warn("data-trackid or data-playlistid is required for <amp-soundcloud>"),!1)}(i,o))return null;var v=null!=i?i:o,g="https://w.soundcloud.com/player/?url="+encodeURIComponent("https://api.soundcloud.com/"+(null!=i?"tracks":"playlists")+"/"+v);return u&&(g+=encodeURIComponent("?secret_token="+u)),f?g+="&visual=true":e&&(g+="&color="+encodeURIComponent(e)),(0,n.createElement)(p,a({allow:"autoplay",frameborder:"no",ref:d,scrolling:"no",src:g,title:"Soundcloud Widget - "+v,messageHandler:y,matchesMessagingOrigin:h},s))},g.props={"children":{passthroughNonEmpty:!0},"color":{attr:"data-color"},"playlistId":{attr:"data-playlistid"},"secretToken":{attr:"data-secret-token"},"trackId":{attr:"data-trackid"},"visual":{attr:"data-visual",type:"boolean",default:!1}},g.layoutSizeDefined=!0,g.usesShadowDom=!0,g.loadable=!0,(0,n.defineBentoElement)("bento-soundcloud",g,undefined)}))}();
//# sourceMappingURL=bento-soundcloud-1.0.js.map
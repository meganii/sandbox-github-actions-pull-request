;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-font",ev:"0.1",l:!0,f:function(t,i){(()=>{var{hasOwnProperty:i,toString:n}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var s=self.__AMP_LOG;function o(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function e(t,i,n,s,o,e,r,h,l,a,u){return t}function r(t,i){e(function(t,i){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!n||!n.ctor)}(t,i));const n=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return n.obj||(e(n.ctor),e(n.context),n.obj=new n.ctor(n.context),e(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}var h,l=t=>r(t,"timer"),a=["Webkit","webkit","Moz","moz","ms","O","o"];function u(t,i,n,s,o){const e=function(t,i,n){if(i.startsWith("--"))return i;h||(h=Object.create(null));let s=h[i];if(!s||n){if(s=i,void 0===t[i]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),o=function(t,i){for(let n=0;n<a.length;n++){const s=a[n]+i;if(void 0!==t[s])return s}return""}(t,n);void 0!==t[o]&&(s=o)}n||(h[i]=s)}return s}(t.style,i,o);if(!e)return;const r=s?n+s:n;t.style.setProperty(function(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return a.some((t=>i.startsWith(t+"-")))?`-${i}`:i}(e),r)}function f(t,i){for(const n in i)u(t,n,i[n])}var c=["sans-serif","serif"],d=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.WF="",this.QF="",this.ZF="",this.BF="",this.GF=null}buildCallback(){var t,i;this.WF=(t=this.element.getAttribute("font-family"),"The font-family attribute is required for <amp-font> %s",i=this.element,(s.user||(s.user=o()),void s.user.win?s.userForEmbed||(s.userForEmbed=o()):s.user).assert(t,"The font-family attribute is required for <amp-font> %s",i,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined)),this.QF=this.element.getAttribute("font-weight")||"400",this.ZF=this.element.getAttribute("font-style")||"normal",this.BF=this.element.getAttribute("font-variant")||"normal",this.GF=new class{constructor(t){this.ji=t,this.Uu=t.win.document,this.fn=null,this.JF=null,this.iL=!1,this.nL=!1}load(t,i){return this.JF=t,l(this.ji.win).timeoutPromise(i,this.sL()).then((()=>{this.iL=!0,this.oL()}),(t=>{throw this.nL=!0,this.oL(),t}))}sL(){return new Promise(((t,i)=>{const n=this.JF.fontStyle+" "+this.JF.variant+" "+this.JF.weight+" "+this.JF.size+" '"+this.JF.family+"'";this.eL()?this.Uu.fonts.check(n)?t():this.Uu.fonts.load(n).then((()=>this.Uu.fonts.load(n))).then((()=>{this.Uu.fonts.check(n)?t():i(new Error("Font could not be loaded, probably due to incorrect @font-face."))})).catch(i):this.rL().then(t,i)}))}eL(){return"fonts"in this.Uu}rL(){return new Promise(((t,i)=>{const n=(e=this.ji.win,r((h=e).__AMP_TOP||(h.__AMP_TOP=h),"vsync")),s=this.hL(),o=n.createTask({measure:()=>{this.iL?t():this.nL?i(new Error("Font loading timed out.")):s.some((t=>t.compare()))?t():o()}});var e,h;o()}))}hL(){const t=this.fn=this.Uu.createElement("div");f(t,{fontSize:"40px",fontVariant:this.JF.variant,fontWeight:this.JF.weight,fontStyle:this.JF.fontStyle,left:"-999px",lineHeight:"normal",margin:0,padding:0,position:"absolute",top:"-999px",visibility:"hidden"});const i=c.map((i=>new class{constructor(t,i,n){const s=t.ownerDocument,o=`${i},${n}`;this.lL=this.aL(s,n),this.uL=this.aL(s,o),t.appendChild(this.lL),t.appendChild(this.uL)}aL(t,i){const n=t.createElement("div");return n.textContent="MAxmTYklsjo190QW",f(n,{float:"left",fontFamily:i,margin:0,padding:0,whiteSpace:"nowrap"}),n}compare(){const t=Math.abs(this.lL.offsetWidth-this.uL.offsetWidth)>2,i=Math.abs(this.lL.offsetHeight-this.uL.offsetHeight)>2;return t||i}}(t,this.JF.family,i)));return this.ji.getBody().appendChild(t),i}oL(){var t,i;this.fn&&(null===(i=(t=this.fn).parentElement)||void 0===i||i.removeChild(t)),this.fn=null}}(this.getAmpDoc()),this.fL()}fL(){const t={fontStyle:this.ZF,variant:this.BF,weight:this.QF,size:"medium",family:this.WF};this.GF.load(t,this.cL()).then((()=>{this.dL()})).catch((t=>{this._L()}))}dL(){const t=this.element.getAttribute("on-load-add-class"),i=this.element.getAttribute("on-load-remove-class");this.mL(t,i)}_L(){const t=this.element.getAttribute("on-error-add-class"),i=this.element.getAttribute("on-error-remove-class");this.mL(t,i)}mL(t,i){const n=this.getAmpDoc(),s=n.getRootNode().documentElement||n.getBody();t&&s.classList.add(t),i&&s.classList.remove(i),this.oL()}oL(){this.GF=null}cL(){let t=parseInt(this.element.getAttribute("timeout"),10);var i;return t="number"!=typeof(i=t)||!isFinite(i)||t<0?3e3:t,t=Math.max(t-l(this.win).timeSinceStart(),100),t}};t.registerElement("amp-font",d)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-font-0.1.mjs.map
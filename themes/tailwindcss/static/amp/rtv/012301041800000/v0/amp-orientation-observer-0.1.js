;
(self.AMP=self.AMP||[]).push({m:0,v:"2301041800000",n:"amp-orientation-observer",ev:"0.1",l:!0,f:function(n,t){!function(){function t(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function e(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function r(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach((function(e){t(n,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}function i(n,t){return(i=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function o(n){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function f(n,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}Array.isArray;var c=Object.prototype;c.hasOwnProperty,c.toString,self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var a=self.__AMP_LOG;function s(n){return function(n,t){throw new Error("failed to call initLogConstructor")}()}function l(n,t,e,r,i,o,u,f,c,a,s){return n}function h(n){return n.nodeType?(e=n,t=(e.ownerDocument||e).defaultView,function(n,t){return b(n=function(n){return n.__AMP_TOP||(n.__AMP_TOP=n)}(n),"ampdoc")}(t)).getAmpDoc(n):n;var t,e}function b(n,t){l(v(n,t));var e=function(n){var t=n.__AMP_SERVICES;return t||(t=n.__AMP_SERVICES={}),t}(n)[t];return e.obj||(l(e.ctor),l(e.context),e.obj=new e.ctor(e.context),l(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function v(n,t){var e=n.__AMP_SERVICES&&n.__AMP_SERVICES[t];return!(!e||!e.ctor)}var d="amp-orientation-observer",m=["alpha","beta","gamma"],p={"alpha":180,"beta":0,"gamma":0},y={"alpha":[0,360],"beta":[-180,180],"gamma":[-90,90]},j=function(n){!function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&i(n,t)}(c,n);var t,e,u=(t=c,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,r=o(t);if(e){var i=o(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)});function c(n){var t;return(t=u.call(this,n)).te=h(t.element),t.Ks=null,t.KR=r({},y),t.QR=r({},p),t.XR=r({},p),t.ZR={beta:[],alpha:[],gamma:[]},t.$R=null,t}var l=c.prototype;return l.buildCallback=function(){var n,t,e,r,i;this.Ks=(n=this.element,t="action",e=h(n),v(i=(r=h(e)).isSingleDoc()?r.win:r,t)?b(i,t):null),this.te.whenFirstVisible().then(this.zo.bind(this))},l.zo=function(){var n,t=this;n=this.win.DeviceOrientationEvent,(a.user||(a.user=s()),void a.user.win?a.userForEmbed||(a.userForEmbed=s()):a.user).assert(n,"The current browser doesn't support the `window.DeviceOrientationEvent`",undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined,undefined),m.forEach((function(n){t.KR[n]=t.jk("".concat(n,"-range"),t.KR[n])})),this.$R=this.element.hasAttribute("smoothing")?Number(this.element.getAttribute("smoothing"))||4:null,this.win.addEventListener("deviceorientation",(function(n){t.nD(n)}),!0)},l.jk=function(n,t){var e=this.element.getAttribute(n);if(e){var r=e.trim().split(" ");return[parseInt(r[0],10),parseInt(r[1],10)]}return t},l.nD=function(n){var t=this;if(n instanceof DeviceOrientationEvent){var e=this.win.screen,r=n.alpha,i=n.beta,o=n.gamma,u="orientation"in e?e.orientation.angle:e.orientation;if(90==this.win.orientation||-90==this.win.orientation){var f=o;o=i,i=f}u<0&&(o=-o,i=-i);var c={alpha:r,beta:i,gamma:o};m.forEach((function(n){Math.abs(c[n]-t.QR[n])>.1&&(t.$R?t.QR[n]=t.tD(n,c[n]):t.QR[n]=c[n],t.eD(n,t.QR[n],t.KR[n]))}))}},l.tD=function(n,t){this.ZR[n].length>this.$R&&this.ZR[n].shift(),this.ZR[n].push(t);var e=this.ZR[n].reduce((function(n,t){return n+t}))/this.$R;return this.ZR[n].length>this.$R&&this.XR[n]==p[n]&&(this.XR[n]=e),e-this.XR[n]},l.eD=function(n,t,e){var r,i,o,u=e[0]<0?t.toFixed()-e[0]:t.toFixed(),f=function(n,t,e,r){var i={detail:e};if(Object.assign(i,void 0),"function"==typeof n.CustomEvent)return new n.CustomEvent(t,i);var o=n.document.createEvent("CustomEvent");return o.initCustomEvent(t,!!i.bubbles,!!i.cancelable,e),o}(this.win,"".concat(d,".").concat(n),{"angle":(r=t,i=e[0],o=e[1],Math.min(Math.max(r,i),o)).toFixed(),"percent":u/(e[1]-e[0])});this.Ks.trigger(this.element,n,f,1)},c}(n.BaseElement);n.registerElement(d,j)}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-orientation-observer-0.1.js.map
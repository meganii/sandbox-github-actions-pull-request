;
(self.AMP=self.AMP||[]).push({m:0,v:"2301041800000",n:"amp-story-subscriptions",ev:"0.1",l:!1,f:function(t,n){!function(){function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=t[r];return i}function r(t,r){if(t){if("string"==typeof t)return n(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,r):void 0}}function i(t,n){return(i=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function u(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function c(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){s(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}var l=Array.isArray,p=Object.prototype,m=p.hasOwnProperty;function f(t){var n=Object.create(null);return t&&Object.assign(n,t),n}function h(t,n){return m.call(t,n)}function b(t,n){if(!!n!==n&&null!=n)if(Array.isArray(n))n.forEach((function(n){b(t,n)}));else{var r=n;t.appendChild(r.nodeType?r:self.document.createTextNode(String(n)))}}function d(t,n,r){if(!1!==r&&null!=r)if("function"!=typeof r||"o"!==n[0]||"n"!==n[1])t.setAttribute(n,!0===r?"":String(r));else{var i=n.toLowerCase().substring(2);t.addEventListener(i,r)}}function v(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if("string"!=typeof t)return t(c(c({},n),{},{children:i}));var e=null==n?void 0:n.xmlns;e&&delete n.xmlns;var a=e?self.document.createElementNS(e,t):self.document.createElement(t);return b(a,i),n&&Object.keys(n).forEach((function(t){d(a,t,n[t])})),a}p.toString;var y,g=["Webkit","webkit","Moz","moz","ms","O","o"];function T(t){var n=t.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}));return g.some((function(t){return n.startsWith(t+"-")}))?"-".concat(n):n}function A(t,n,r){if(n.startsWith("--"))return n;y||(y=f());var i=y[n];if(!i||r){if(i=n,void 0===t[n]){var o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),e=function(t,n){for(var r=0;r<g.length;r++){var i=g[r]+n;if(void 0!==t[i])return i}return""}(t,o);void 0!==t[e]&&(i=e)}r||(y[n]=i)}return i}function S(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!isFinite(r)||r<0)throw new Error("Invalid depth: "+r);if(t===n)return!0;for(var i=[{a:t,b:n,depth:r}];i.length>0;){var o=i.shift(),a=o.a,s=o.b,u=o.depth;if(u>0){if(e(a)!==e(s))return!1;if(l(a)&&l(s)){if(a.length!==s.length)return!1;for(var c=0;c<a.length;c++)i.push({a:a[c],b:s[c],depth:u-1});continue}if(a&&s&&"object"===e(a)&&"object"===e(s)){var p=Object.keys(a),m=Object.keys(s);if(p.length!==m.length)return!1;for(var f=0,h=p;f<h.length;f++){var b=h[f];i.push({a:a[b],b:s[b],depth:u-1})}continue}}if(a!==s)return!1}return!0}function _(t){return(t.ownerDocument||t).defaultView}var E=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function w(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{return decodeURIComponent(t)}catch(t){return n}}function I(t){if(!t)return null;var n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)(?:\?ssr-css=[0|1])?$/i),r=n?n[2]:void 0,i=n?n[3]:void 0;return r&&i?{extensionId:r,extensionVersion:i}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var O=self.__AMP_LOG;function x(t,n){throw new Error("failed to call initLogConstructor")}function P(t){return O.user||(O.user=N()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(O.user.win,t)?O.userForEmbed||(O.userForEmbed=N()):O.user}function N(t){return x()}function R(){return O.dev||(O.dev=x())}function C(t,n,r,i,o,e,a,s,u,c,l){return t}var U=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))};function j(t,n,r,i){(function(t,n,r,i,o,e){var a=F(t),s=a[r];s||(s=a[r]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),s.ctor||(s.ctor=i,s.context=n,s.sharedInstance=!1,s.resolve&&B(t,r))})(t=L(t),t,n,r),i&&B(t,n)}function k(t,n){return B(t=L(t),n)}function D(t,n){return K(t=L(t),n)?B(t,n):null}function M(t,n){return X(t,n)}function G(t,n){var r=Y(V(t));return K(r,n)?B(r,n):null}function H(t,n){return W(Y(t),n)}function z(t,n){return X(Y(t),n)}function L(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function V(t){return t.nodeType?(n=_(t),k(n,"ampdoc")).getAmpDoc(t):t;var n}function Y(t){var n=V(t);return n.isSingleDoc()?n.win:n}function B(t,n){C(K(t,n));var r=F(t)[n];return r.obj||(C(r.ctor),C(r.context),r.obj=new r.ctor(r.context),C(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function W(t,n){var r=X(t,n);if(r)return r;var i,o,e,a,s=F(t);return s[n]=(o=(i=new U).promise,e=i.reject,a=i.resolve,o.catch((function(){})),{obj:null,promise:o,resolve:a,reject:e,context:null,ctor:null}),s[n].promise}function X(t,n){var r=F(t)[n];return r?r.promise?r.promise:(B(t,n),r.promise=Promise.resolve(r.obj)):null}function F(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function K(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}function Z(t,n,r,i,o){return M(t,n)||function(t,n,r,i,o){return(e=t.document,new Promise((function(t){return function(t,n){!function(t,n,r){if(n())r();else{var i=_(t);if(i.MutationObserver){var o=new i.MutationObserver((function(){n()&&(o.disconnect(),r())}));o.observe(t,{childList:!0})}else var e=i.setInterval((function(){n()&&(i.clearInterval(e),r())}),5)}}(t.documentElement,(function(){return!!t.body}),n)}(e,t)}))).then((function(){var n=k(t,"extensions");return function(t,n,r){return function(t){if(!t)return[];for(var n=t.querySelectorAll("script[custom-element],script[custom-template]"),r=[],i=0;i<n.length;i++){var o=n[i],e=o.getAttribute("custom-element")||o.getAttribute("custom-template"),a=I(o.src);e&&a&&r.push({script:o,extensionId:e,extensionVersion:a.extensionVersion})}return r}(t.document.head).some((function(t){var i=t.extensionId,o=t.extensionVersion;return n==i&&r==o}))}(n.win,r,i)?n.waitForExtension(r,i):null})).then((function(r){return r?o?M(t,n):function(t,n){return W(t,n)}(t,n):null}));var e}(t,n,r,i,o)}function $(t,n,r,i){return function(t,n,r,i){var o=z(t,n);if(o)return o;var e=V(t);return e.whenExtensionsKnown().then((function(){var t=e.getExtensionVersion(r);return t?k(e.win,"extensions").waitForExtension(r,t):null})).then((function(r){return r?i?z(t,n):H(t,n):null}))}(t,n,r,i).then((function(t){return function(t,n,r){return i=t,o=n,e=r,a=r,s=r,P().assert(i,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",o,e,a,s,void 0,void 0,void 0,void 0,void 0);var i,o,e,a,s}(t,n,r)}))}var q,J=function(){function t(){this.Nt=null}var n=t.prototype;return n.add=function(t){var n=this;return this.Nt||(this.Nt=[]),this.Nt.push(t),function(){n.remove(t)}},n.remove=function(t){var n,r,i;this.Nt&&(r=t,-1!=(i=(n=this.Nt).indexOf(r))&&n.splice(i,1))},n.removeAll=function(){this.Nt&&(this.Nt.length=0)},n.fire=function(t){if(this.Nt)for(var n,i=function(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=r(t))||t&&"number"==typeof t.length){i&&(t=i);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.Nt.slice());!(n=i()).done;)(0,n.value)(t)},n.getHandlerCount=function(){var t,n;return null!==(t=null===(n=this.Nt)||void 0===n?void 0:n.length)&&void 0!==t?t:0},t}(),Q="amp-story",tt=function(t){var n=function(t){return D(t,"story-store")}(t);return n||(n=new it(t),j(t,"story-store",(function(){return n}))),n},nt={CAN_INSERT_AUTOMATIC_AD:1,CAN_SHOW_AUDIO_UI:2,CAN_SHOW_NAVIGATION_OVERLAY_HINT:3,CAN_SHOW_PAGINATION_BUTTONS:4,CAN_SHOW_PREVIOUS_PAGE_HELP:5,CAN_SHOW_SHARING_UIS:6,CAN_SHOW_STORY_URL_INFO:7,CAN_SHOW_SYSTEM_LAYER_BUTTONS:8,VIEWER_CUSTOM_CONTROLS:9,AD_STATE:10,PAGE_ATTACHMENT_STATE:11,EDUCATION_STATE:12,GYROSCOPE_PERMISSION_STATE:13,INFO_DIALOG_STATE:14,INTERACTIVE_COMPONENT_STATE:15,INTERACTIVE_REACT_STATE:16,KEYBOARD_ACTIVE_STATE:17,MUTED_STATE:18,PAGE_HAS_AUDIO_STATE:19,PAGE_HAS_CAPTION_STATE:20,CAPTIONS_STATE:21,PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE:22,PANNING_MEDIA_STATE:23,PAUSED_STATE:24,PREVIEW_STATE:25,RTL_STATE:26,SHARE_MENU_STATE:27,SHOPPING_DATA:28,STORY_HAS_BACKGROUND_AUDIO_STATE:29,STORY_HAS_PLAYBACK_UI_STATE:30,SYSTEM_UI_IS_VISIBLE_STATE:31,UI_STATE:32,ACTIONS_ALLOWLIST:33,CONSENT_ID:34,CURRENT_PAGE_ID:35,CURRENT_PAGE_INDEX:36,ADVANCEMENT_MODE:37,NAVIGATION_PATH:38,NEW_PAGE_AVAILABLE_ID:39,PAGE_IDS:40,PAGE_SIZE:41,SUBSCRIPTIONS_DIALOG_UI_STATE:42,SUBSCRIPTIONS_STATE:43,SUBSCRIPTIONS_PAGE_INDEX:44},rt=(s(q={},nt.ACTIONS_ALLOWLIST,(function(t,n){return t.length!==n.length})),s(q,nt.INTERACTIVE_COMPONENT_STATE,(function(t,n){return t.element!==n.element||t.state!==n.state})),s(q,nt.NAVIGATION_PATH,(function(t,n){return t.length!==n.length})),s(q,nt.PAGE_IDS,(function(t,n){return t.length!==n.length})),s(q,nt.PAGE_SIZE,(function(t,n){return null===t||null===n||t.width!==n.width||t.height!==n.height})),s(q,nt.PANNING_MEDIA_STATE,(function(t,n){return null===t||null===n||!S(t,n,2)})),s(q,nt.SHOPPING_DATA,(function(t,n){return null===t||null===n||!S(t,n,2)})),s(q,nt.INTERACTIVE_REACT_STATE,(function(t,n){return!S(t,n,3)})),q),it=function(){function t(t){this.t=t,this.Rr={},this.ji=c(c({},this.oA()),this.aA())}var n=t.prototype;return n.get=function(t){if(h(this.ji,t))return this.ji[t];R().error(Q,"Unknown state %s.",t)},n.subscribe=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];h(this.ji,t)?(this.Rr[t]||(this.Rr[t]=new J),this.Rr[t].add(n),r&&n(this.get(t))):R().error(Q,"Can't subscribe to unknown state %s.",t)},n.dispatch=function(t,n){var r,i=this,o=c({},this.ji);this.ji=function(t,n,r){var i,o,e,a,u;switch(n){case 1:return c(c({},t),{},s({},nt.INTERACTIVE_REACT_STATE,c(c({},t[nt.INTERACTIVE_REACT_STATE]),{},s({},r.interactiveId,r))));case 2:return c(c({},t),{},s({},nt.NEW_PAGE_AVAILABLE_ID,r));case 3:var l=c(c({},t[nt.PANNING_MEDIA_STATE]),r);return c(c({},t),{},s({},nt.PANNING_MEDIA_STATE,l));case 4:var p=c(c({},t[nt.SHOPPING_DATA]),r);return c(c({},t),{},s({},nt.SHOPPING_DATA,p));case 5:var m=[].concat(t[nt.ACTIONS_ALLOWLIST],r);return c(c({},t),{},s({},nt.ACTIONS_ALLOWLIST,m));case 21:return c(c({},t),{},s({},nt.PAGE_ATTACHMENT_STATE,!!r));case 15:return c(c({},t),{},s({},nt.AD_STATE,!!r));case 16:return c(c({},t),{},s({},nt.EDUCATION_STATE,!!r));case 18:return r=r,c(c({},t),{},(s(i={},nt.PAUSED_STATE,1===r.state),s(i,nt.SYSTEM_UI_IS_VISIBLE_STATE,!0),s(i,nt.INTERACTIVE_COMPONENT_STATE,r),i));case 17:return c(c({},t),{},(s(o={},nt.INFO_DIALOG_STATE,!!r),s(o,nt.PAUSED_STATE,!!r),o));case 30:return c(c({},t),{},s({},nt.STORY_HAS_PLAYBACK_UI_STATE,!!r));case 29:return c(c({},t),{},s({},nt.STORY_HAS_BACKGROUND_AUDIO_STATE,!!r));case 20:return c(c({},t),{},s({},nt.MUTED_STATE,!!r));case 22:return c(c({},t),{},s({},nt.PAGE_HAS_AUDIO_STATE,!!r));case 23:return c(c({},t),{},s({},nt.PAGE_HAS_CAPTIONS_STATE,!!r));case 24:return c(c({},t),{},s({},nt.CAPTIONS_STATE,!!r));case 25:return c(c({},t),{},s({},nt.PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE,!!r));case 26:return c(c({},t),{},s({},nt.PAUSED_STATE,!!r));case 27:return c(c({},t),{},s({},nt.RTL_STATE,!!r));case 19:return c(c({},t),{},s({},nt.KEYBOARD_ACTIVE_STATE,!!r));case 28:return c(c({},t),{},(s(e={},nt.PAUSED_STATE,!!r),s(e,nt.SHARE_MENU_STATE,!!r),e));case 33:return c(c({},t),{},s({},nt.SYSTEM_UI_IS_VISIBLE_STATE,!!r));case 34:return 3===t[nt.UI_STATE]&&3!==r?(R().error(Q,"Cannot switch away from UIType_Enum.VERTICAL"),t):c(c({},t),{},s({},nt.UI_STATE,r));case 9:return c(c({},t),{},s({},nt.GYROSCOPE_PERMISSION_STATE,r));case 8:return c(c({},t),{},s({},nt.CONSENT_ID,r));case 6:return c(c({},t),{},(s(a={},nt.CURRENT_PAGE_ID,r.id),s(a,nt.CURRENT_PAGE_INDEX,r.index),a));case 7:return c(c({},t),{},s({},nt.ADVANCEMENT_MODE,r));case 10:return c(c({},t),{},s({},nt.NAVIGATION_PATH,r));case 11:return c(c({},t),{},s({},nt.PAGE_IDS,r));case 12:return c(c({},t),{},s({},nt.PAGE_SIZE,r));case 13:return c(c({},t),{},s({},nt.VIEWER_CUSTOM_CONTROLS,r));case 14:return c(c({},t),{},s({},nt.SUBSCRIPTIONS_PAGE_INDEX,r));case 31:return c(c({},t),{},(s(u={},nt.SUBSCRIPTIONS_DIALOG_UI_STATE,!!r),s(u,nt.PAUSED_STATE,!!r),u));case 32:return c(c({},t),{},s({},nt.SUBSCRIPTIONS_STATE,r));default:return R().error(Q,"Unknown action %s.",n),t}}(this.ji,t,n),Object.keys(this.Rr).forEach((function(t){((r=rt[t])?r(o[t],i.ji[t]):o[t]!==i.ji[t])&&i.Rr[t].fire(i.ji[t])}))},n.oA=function(){var t;return s(t={},nt.CAN_INSERT_AUTOMATIC_AD,!0),s(t,nt.CAN_SHOW_AUDIO_UI,!0),s(t,nt.CAN_SHOW_NAVIGATION_OVERLAY_HINT,!0),s(t,nt.CAN_SHOW_PREVIOUS_PAGE_HELP,!0),s(t,nt.CAN_SHOW_PAGINATION_BUTTONS,!0),s(t,nt.CAN_SHOW_SHARING_UIS,!0),s(t,nt.CAN_SHOW_STORY_URL_INFO,!0),s(t,nt.CAN_SHOW_SYSTEM_LAYER_BUTTONS,!0),s(t,nt.VIEWER_CUSTOM_CONTROLS,[]),s(t,nt.AD_STATE,!1),s(t,nt.EDUCATION_STATE,!1),s(t,nt.GYROSCOPE_PERMISSION_STATE,""),s(t,nt.INFO_DIALOG_STATE,!1),s(t,nt.INTERACTIVE_COMPONENT_STATE,{state:0}),s(t,nt.INTERACTIVE_REACT_STATE,{}),s(t,nt.KEYBOARD_ACTIVE_STATE,!1),s(t,nt.MUTED_STATE,!0),s(t,nt.PAGE_ATTACHMENT_STATE,!1),s(t,nt.PAGE_HAS_AUDIO_STATE,!1),s(t,nt.PAGE_HAS_CAPTIONS_STATE,!1),s(t,nt.CAPTIONS_STATE,!0),s(t,nt.PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE,!1),s(t,nt.PANNING_MEDIA_STATE,{}),s(t,nt.PAUSED_STATE,!1),s(t,nt.RTL_STATE,!1),s(t,nt.SHARE_MENU_STATE,!1),s(t,nt.SHOPPING_DATA,{}),s(t,nt.STORY_HAS_BACKGROUND_AUDIO_STATE,!1),s(t,nt.STORY_HAS_PLAYBACK_UI_STATE,!1),s(t,nt.SYSTEM_UI_IS_VISIBLE_STATE,!0),s(t,nt.UI_STATE,0),s(t,nt.ACTIONS_ALLOWLIST,[]),s(t,nt.CONSENT_ID,null),s(t,nt.CURRENT_PAGE_ID,""),s(t,nt.CURRENT_PAGE_INDEX,0),s(t,nt.ADVANCEMENT_MODE,""),s(t,nt.NEW_PAGE_AVAILABLE_ID,""),s(t,nt.NAVIGATION_PATH,[]),s(t,nt.PAGE_IDS,[]),s(t,nt.PAGE_SIZE,null),s(t,nt.PREVIEW_STATE,!1),s(t,nt.SUBSCRIPTIONS_DIALOG_UI_STATE,!1),s(t,nt.SUBSCRIPTIONS_STATE,0),s(t,nt.SUBSCRIPTIONS_PAGE_INDEX,-1),t},n.aA=function(){var t,n,r,i,o,e;switch(o=function(t){var n,r=f();if(!t)return r;for(;n=E.exec(t);){var i=w(n[1],n[1]),o=n[2]?w(n[2].replace(/\+/g," "),n[2]):"";r[i]=o}return r}(this.t.location.hash).embedMode,0===(i=e=parseInt(o,10))||1===i||2===i||3===i||4===i?e:0){case 1:return s(t={},nt.CAN_INSERT_AUTOMATIC_AD,!1),s(t,nt.CAN_SHOW_NAVIGATION_OVERLAY_HINT,!1),s(t,nt.CAN_SHOW_PAGINATION_BUTTONS,!1),s(t,nt.CAN_SHOW_PREVIOUS_PAGE_HELP,!0),s(t,nt.CAN_SHOW_SYSTEM_LAYER_BUTTONS,!1),s(t,nt.MUTED_STATE,!1),t;case 2:return s({},nt.CAN_SHOW_SHARING_UIS,!1);case 3:return s(n={},nt.PREVIEW_STATE,!0),s(n,nt.CAN_INSERT_AUTOMATIC_AD,!1),s(n,nt.CAN_SHOW_NAVIGATION_OVERLAY_HINT,!1),s(n,nt.CAN_SHOW_PAGINATION_BUTTONS,!1),s(n,nt.CAN_SHOW_PREVIOUS_PAGE_HELP,!1),s(n,nt.CAN_SHOW_SYSTEM_LAYER_BUTTONS,!1),n;case 4:return s(r={},nt.CAN_SHOW_AUDIO_UI,!1),s(r,nt.CAN_SHOW_SHARING_UIS,!1),s(r,nt.CAN_SHOW_STORY_URL_INFO,!1),r;default:return{}}},t}(),ot="storyPageCount",et="storyProgress",at=function(){function t(t){var n;this.sA=(s(n={},"storyInteractiveId",null),s(n,"storyInteractiveResponse",null),s(n,"storyInteractiveType",null),s(n,"storyPageIndex",null),s(n,"storyPageId",null),s(n,ot,null),s(n,et,null),s(n,"storyIsMuted",null),s(n,"storyPreviousPageId",null),s(n,"storyPreviousPageIndex",null),s(n,"storyAdvancementMode",null),s(n,"storyShoppingProductId",null),n),this.eA=tt(t),this.uA()}var n=t.prototype;return n.uA=function(){var t=this;this.eA.subscribe(nt.PAGE_IDS,(function(){return t.hA()})),this.eA.subscribe(nt.CURRENT_PAGE_ID,(function(){return t.hA()}),!0)},n.hA=function(){var t=this.eA.get(nt.PAGE_IDS),n=t.filter((function(t){return!t.startsWith("i-amphtml-ad-")})).length;this.sA.storyPageCount=n;var r=this.eA.get(nt.CURRENT_PAGE_ID);if(r){this.sA.storyPreviousPageId=this.sA.storyPageId,this.sA.storyPageId=r;var i=this.eA.get(nt.CURRENT_PAGE_INDEX),o=t.slice(0,i).filter((function(t){return t.startsWith("i-amphtml-ad-")})).length;this.sA.storyPreviousPageIndex=this.sA.storyPageIndex,this.sA.storyPageIndex=i-o,1===n?this.sA.storyProgress=0:n>1&&(this.sA.storyProgress=(i-o)/(n-1))}},n.onVariableUpdate=function(t,n){this.sA[t]=n},n.get=function(){return this.sA},t}(),st="amp-story-viewer-messaging-handler",ut={"CAPTIONS_STATE":{dataSource:0,property:nt.CAPTIONS_STATE},"CURRENT_PAGE_ID":{dataSource:0,property:nt.CURRENT_PAGE_ID},"EDUCATION_STATE":{dataSource:0,property:nt.EDUCATION_STATE},"MUTED_STATE":{dataSource:0,property:nt.MUTED_STATE},"PAGE_ATTACHMENT_STATE":{dataSource:0,property:nt.PAGE_ATTACHMENT_STATE},"UI_STATE":{dataSource:0,property:nt.UI_STATE},"STORY_PROGRESS":{dataSource:2,property:et},"STORY_PAGE_COUNT":{dataSource:2,property:ot}},ct={"CAPTIONS_STATE":{action:24,isValueValid:function(t){return"boolean"==typeof t}},"MUTED_STATE":{action:20,isValueValid:function(t){return"boolean"==typeof t}}},lt=function(){function t(t,n){this.eA=tt(t),this.cA=function(t){var n=function(t){return D(t,"story-variable")}(t);return n||(n=new at(t),j(t,"story-variable",(function(){return n}))),n}(t),this.co=n}var n=t.prototype;return n.startListening=function(){var t=this;this.co.onMessageRespond("getDocumentState",(function(n){return t.G_(n)})),this.co.onMessage("onDocumentState",(function(n){return t.B_(n)})),this.co.onMessageRespond("setDocumentState",(function(n){return t.F_(n)})),this.co.onMessageRespond("customDocumentUI",(function(n){return t.W_(n)}))},n.send=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.co.sendMessage(t,n,r)},n.G_=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.state,i=ut[r];if(!i)return Promise.reject("Invalid 'state' parameter");switch(i.dataSource){case 0:t=this.eA.get(i.property);break;case 2:t=this.cA.get()[i.property];break;default:R().error(st,"Unknown data source %s.",i.dataSource)}return Promise.resolve({state:r,value:t})},n.B_=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.state,i=ut[r];i?this.eA.subscribe(i.property,(function(n){t.co.sendMessage("documentStateUpdate",{"state":r,"value":n})})):P().error(st,"Invalid 'state' parameter")},n.F_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.state,r=t.value,i=ct[n];return i?i.isValueValid(r)?(this.eA.dispatch(i.action,r),Promise.resolve({state:n,value:r})):Promise.reject("Invalid 'value' parameter"):Promise.reject("Invalid 'state' parameter")},n.W_=function(t){this.eA.dispatch(13,t.controls)},t}(),pt="-shadowcsshost",mt=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)";function ft(t,n,r){var i=function(t,n){return t.closest?t.closest("AMP-STORY"):function(t,n,r){var i;for(i=t;i&&void 0!==i;i=i.parentElement)if(n(i))return i;return null}(t,(function(t){return function(t,n){var r=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector;return!!r&&r.call(t,"AMP-STORY")}(t)}))}(t),o=i.getAttribute(n);return o?function(t){return G(t,"url")}(i).assertHttpsUrl(o,i,n):(r&&P().warn("AMP-STORY","Expected ".concat(n," attribute on <amp-story>")),null)}new RegExp("("+pt+mt,"gim"),new RegExp("(-shadowcsscontext"+mt,"gim"),new RegExp(pt,"gim"),new RegExp("-shadowcsscontext","gim"),"[".concat("data-text-background-color","]");var ht=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&i(t,n)}(u,t);var n,e,s=(n=u,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=o(n);if(e){var i=o(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return a(this,t)});function u(t){var n;return(n=s.call(this,t)).eA=null,n.T5=null,n.co=null,n.kM=null,n}var c=u.prototype;return c.buildCallback=function(){var t,n,i,o=this;return this.co=function(t,n){return B(Y(V(t)),"viewer")}(this.element),this.kM=this.co.isEmbedded()?new lt(this.win,this.co):null,Promise.all([(i=this.win,Z(i,"story-store","amp-story","1.0")),(n=this.element,$(n,"subscriptions","amp-subscriptions")),(t=this.element,H(t,"localization"))]).then((function(t){var n,i=(3,function(t){if(Array.isArray(t))return t}(n=t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var i,o,e=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(i=r.next()).done)&&(e.push(i.value),3!==e.length);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return e}}(n)||r(n,3)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e=i[0],a=i[1];i[2],o.eA=e,o.T5=a;var s=o.win.document.querySelectorAll("amp-story-page:not([ad])");C(s.length>=4);var u,c,l=parseInt(o.element.getAttribute("subscriptions-page-index"),10);l=isNaN(l)?2:l,o.eA.dispatch(14,(u=l,c=s.length-1,Math.min(Math.max(u,2),c))),o.S5(),o.T5.addOnEntitlementResolvedCallback((function(){return o.S5()}));var p=o._5();return function(t,n){var r=function(t){return G(t,"localization")}(n),i=k(_(n),"vsync"),o=[];return t.querySelectorAll("[i-amphtml-i18n-aria-label]").forEach((function(t){o.push(r.getLocalizedStringAsync(t.getAttribute("i-amphtml-i18n-aria-label")).then((function(n){return t.setAttribute("aria-label",n)}))),t.removeAttribute("i-amphtml-i18n-aria-label")})),t.querySelectorAll("[i-amphtml-i18n-text-content]").forEach((function(n){o.push(r.getLocalizedStringAsync(n.getAttribute("i-amphtml-i18n-text-content")).then((function(r){return t.isConnected?i.mutatePromise((function(){n.textContent=r})):n.textContent=r}))),n.removeAttribute("i-amphtml-i18n-text-content")})),Promise.all(o)}(p,o.element).then((function(){o.element.appendChild(p),o.uA()}))}))},c.layoutCallback=function(){var t=ft(this.element,"publisher-logo-src",!0);this.element.querySelector(".i-amphtml-story-subscriptions-publisher-logo").setAttribute("src",t)},c.isLayoutSupported=function(t){return"container"==t},c.S5=function(){var t=this;this.T5.getGrantStatus().then((function(n){t.E5(n)}))},c.E5=function(t){var n=t?2:3;this.eA.dispatch(32,n)},c.uA=function(){var t=this;this.eA.subscribe(nt.SUBSCRIPTIONS_DIALOG_UI_STATE,(function(n){return t.I5(n)})),this.win.document.querySelector("amp-subscriptions-dialog").addEventListener("click",(function(n){return t.O5(n)})),new MutationObserver((function(t){t.forEach((function(t){t.addedNodes.forEach((function(t){"SWG-POPUP-BACKGROUND"===t.tagName&&function(t,n){var r=t.style;for(var i in n)r.setProperty(T(A(r,i)),String(n[i]),"important")}(t,{"pointer-events":"all"})}))}))})).observe(this.win.document.body,{subtree:!1,childList:!0})},c.I5=function(t){var n=this;if(this.mutateElement((function(){return n.element.classList.toggle("i-amphtml-story-subscriptions-visible",t)})),t)return this.T5.maybeRenderDialogForSelectedPlatform().then((function(){n.co.isEmbedded()&&setTimeout((function(){var t=n.win.document.querySelector("amp-subscriptions-dialog .i-amphtml-story-subscriptions-dialog-banner-button");t&&n.mutateElement((function(){return t.classList.add("i-amphtml-story-subscriptions-dialog-banner-button-visible")}))}),2e3)}));this.T5.getDialog().close()},c.O5=function(t){t.target.classList.contains("i-amphtml-story-subscriptions-dialog-banner-button-visible")&&this.kM.send("selectDocument",{"next":!0,"advancementMode":"manualAdvance"})},c._5=function(){return v("div",{"subscriptions-dialog":!0,"subscriptions-display":"NOT granted"},v("div",{class:"i-amphtml-story-subscriptions-dialog-banner"},v("button",{class:"i-amphtml-story-subscriptions-dialog-banner-button","i-amphtml-i18n-text-content":"113"})),v("div",{class:"i-amphtml-story-subscriptions-dialog-content"},v("span",{class:"i-amphtml-story-subscriptions-price"},this.element.getAttribute("price")),this.element.getAttribute("headline")&&v("span",{class:"i-amphtml-story-subscriptions-headline"},this.element.getAttribute("headline")),v("span",{class:"i-amphtml-story-subscriptions-description"},this.element.getAttribute("description")),this.element.getAttribute("additional-description")&&v("span",{class:"i-amphtml-story-subscriptions-additional-description"},this.element.getAttribute("additional-description")),v("button",{class:"i-amphtml-story-subscriptions-publisher-button","subscriptions-action":"subscribe","subscriptions-display":"NOT granted"},v("img",{class:"i-amphtml-story-subscriptions-publisher-logo"}),v("span",{class:"i-amphtml-story-subscriptions-publisher-button-text"},v("span",{"i-amphtml-i18n-text-content":"109"})," ",ft(this.element,"publisher",!0))),v("button",{class:"i-amphtml-story-subscriptions-google-button","subscriptions-action":"subscribe","subscriptions-display":"NOT granted","subscriptions-service":"subscribe.google.com","subscriptions-decorate":"false"},v("span",{class:"i-amphtml-story-subscriptions-google-logo"}),v("span",{class:"i-amphtml-story-subscriptions-google-button-text","i-amphtml-i18n-text-content":"110"})),v("span",{class:"i-amphtml-story-subscriptions-signin"},v("span",{"i-amphtml-i18n-text-content":"107"})," ",v("button",{"subscriptions-action":"login","subscriptions-display":"NOT granted","i-amphtml-i18n-text-content":"108"}))))},u}(t.BaseElement);t.registerElement("amp-story-subscriptions",ht,'@import url("https://fonts.googleapis.com/css2?family=Google+Sans:wght@400");@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700");amp-story-subscriptions{position:absolute!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important;top:0!important;left:0!important;height:100%!important;width:100%!important;z-index:1!important;transform:translateY(100vh)!important;transition-delay:0.15s!important;pointer-events:none!important}amp-story-subscriptions.i-amphtml-story-subscriptions-visible{transform:translateY(0)!important;transition-delay:0s!important}amp-story-subscriptions:before{content:""!important;position:absolute!important;top:0!important;left:0!important;height:100%!important;width:100%!important;background:#000!important;opacity:0!important;pointer-events:auto!important;transition:opacity 0.15s cubic-bezier(0.4,0,1,1)!important}amp-story-subscriptions.i-amphtml-story-subscriptions-visible:before{opacity:0.55!important;transition:opacity 0.2s cubic-bezier(0,0,0.2,1)!important}amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper{border-radius:0.9em 0.9em 0 0!important;font-family:Poppins,sans-serif!important;font-weight:400!important;background:#fff!important;color:#000!important;overflow:hidden!important}amp-story:not([supports-landscape])+amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper,iframe.swg-dialog{width:100%!important;left:0!important;margin-left:0!important}@media(min-aspect-ratio:31/40){amp-story:not([supports-landscape])+amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper,iframe.swg-dialog{width:var(--i-amphtml-story-desktop-one-panel-width)!important;left:50%!important;margin-left:calc(var(--i-amphtml-story-desktop-one-panel-width)*-0.5)!important}}.i-amphtml-story-subscriptions-dialog-banner{height:2.54em!important;background:#ededed!important;padding:0 0.3em!important}.i-amphtml-story-subscriptions-dialog-banner,.i-amphtml-story-subscriptions-dialog-banner-button{display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:end!important;justify-content:flex-end!important;-ms-flex-align:center!important;align-items:center!important}.i-amphtml-story-subscriptions-dialog-banner-button{letter-spacing:0.015em!important;font-size:0.75em!important;opacity:0!important;transform:translateX(-0.2em)!important;transition:opacity 0.3s ease-out,transform 0.3s ease-out!important;padding:0!important;border:none!important;font-family:Poppins,sans-serif!important;font-weight:400!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button{transform:translateX(0.2em)!important}.i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible{opacity:1!important;transform:translateX(0)!important}.i-amphtml-story-subscriptions-dialog-banner-button:after{content:""!important;width:0.93em!important;height:0.93em!important;margin:0 0.6em!important;transform:translateX(-0.1em)!important;transition:transform 0.3s ease-out!important;background-size:contain!important;background-repeat:no-repeat!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" stroke="%23000" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1.75 1.5 6 6l-4.25 4.6"/></svg>\')!important}.i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible:after{transform:translateX(0)!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button:after{transform:translateX(0.1em) scaleX(-1)!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible:after{transform:translateX(0) scaleX(-1)!important}.i-amphtml-story-subscriptions-dialog-content{margin:2.1em 1.6em 0!important;text-align:center!important;white-space:nowrap!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important}.i-amphtml-story-subscriptions-price{display:block!important;font-weight:400!important;font-size:1.4em!important;letter-spacing:-0.02em!important;text-overflow:ellipsis!important;overflow:hidden!important;margin-bottom:0.2em!important}.i-amphtml-story-subscriptions-headline{display:block!important;font-weight:700!important;font-size:1.15em!important;letter-spacing:-0.015em!important;text-overflow:ellipsis!important;overflow:hidden!important;margin:0.4em 0 0.15em!important}.i-amphtml-story-subscriptions-additional-description,.i-amphtml-story-subscriptions-description{display:block!important;font-size:0.9em!important;letter-spacing:-0.015em!important;text-overflow:ellipsis!important;overflow:hidden!important}.i-amphtml-story-subscriptions-google-button,.i-amphtml-story-subscriptions-publisher-button{margin:0 auto 0.8em!important;padding:0!important;border:none!important;--i-amphtml-button-height:2.3em;height:var(--i-amphtml-button-height)!important;border-radius:calc(var(--i-amphtml-button-height)/2)!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;cursor:pointer!important;font-size:calc(var(--story-font-size))!important}.i-amphtml-story-subscriptions-publisher-button{margin-top:2em!important;background:#000!important}.i-amphtml-story-subscriptions-google-button{background:#f2f2f2!important}.i-amphtml-story-subscriptions-google-logo,.i-amphtml-story-subscriptions-publisher-logo{width:1.85em!important;height:1.85em!important;border-radius:50%!important;margin-inline:0.25em 0.65em!important}.i-amphtml-story-subscriptions-google-logo{background-size:contain!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none"><path fill="%23fff" d="M16 32a16 16 0 1 0 0-32 16 16 0 0 0 0 32z"/><path fill="%234285F4" d="M28.56 13.78H16v5h7.19a6.19 6.19 0 0 1-2.67 3.99v3.33h4.3c3.34-3.1 4.46-7.93 3.74-12.32z"/><path fill="%2334A853" d="M16 29.33c3.6 0 6.61-1.2 8.81-3.23l-4.29-3.33A8.04 8.04 0 0 1 16 24.06a7.96 7.96 0 0 1-7.48-5.52H4.1v3.44A13.31 13.31 0 0 0 16 29.33z"/><path fill="%23FBBC05" d="M8.52 18.54a7.93 7.93 0 0 1 0-5.08v-3.44H4.1a13.18 13.18 0 0 0 0 11.96l4.42-3.44z"/><path fill="%23EA4335" d="M16 7.94c1.97 0 3.72.68 5.11 2l3.8-3.8A12.75 12.75 0 0 0 16 2.67c-5.21 0-9.71 3-11.9 7.35l4.42 3.44A7.96 7.96 0 0 1 16 7.94z"/></svg>\')!important}.i-amphtml-story-subscriptions-google-button-text,.i-amphtml-story-subscriptions-publisher-button-text{display:block!important;letter-spacing:0.01em!important;max-width:12.6em!important;text-align:initial!important;white-space:normal!important;margin-inline-end:1.3em!important;font-size:0.75em!important;font-weight:400!important;font-family:Google Sans,sans-serif!important;display:-webkit-box!important;-webkit-line-clamp:2!important;-webkit-box-orient:vertical!important;overflow:hidden!important}.i-amphtml-story-subscriptions-publisher-button-text{color:#fff!important}.i-amphtml-story-subscriptions-google-button-text{color:#5e5e5e!important}.i-amphtml-story-subscriptions-signin{display:block!important;margin-top:2.75em!important;margin-bottom:1.4em!important;font-size:0.7em!important}.i-amphtml-story-subscriptions-signin button{font-weight:600!important;cursor:pointer!important;padding:0!important;border:none!important;font-size:1em!important;font-family:Poppins,sans-serif!important;background-color:#fff!important}\n/*# sourceURL=/extensions/amp-story-subscriptions/0.1/amp-story-subscriptions.css*/')}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-story-subscriptions-0.1.js.map
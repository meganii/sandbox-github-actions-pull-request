{"version":3,"file":"amp-story-captions-0.1.mjs","mappings":"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","names":["obj","key","value","Object","defineProperty","enumerable","configurable","writable","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","target","i","arguments","length","source","ownKeys","forEach","getOwnPropertyDescriptors","defineProperties","arrayLike","Array","prototype","slice","call","optsSupported","isArray","hasOwnProperty","hasOwn_","toString","toString_","parent","child","appendChild","maybeNode","nodeType","self","document","createTextNode","String","tag","props","children","_objectSpread2","xmlns","element","createElementNS","createElement","name","setAttribute","eventName","toLowerCase","substring","addEventListener","eventType","listener","opt_evtListenerOpts","localElement","localListener","wrapped","event","e","__AMP_REPORT_ERROR","undefined","options","capture","removeEventListener","err","detectEvtListenerOptsSupport","internalListenImplementation","__AMP_LOG","user","dev","userForEmbed","shadowDomSupportedVersion","shadowCssSupported","ShadowDomVersion_Enum","func","indexOf","opt_elementClass","Element","attachShadow","createShadowRoot","cssRules","scopeSelector","opt_transformer","cssText","rule","selectorText","style","selector","r","split","p","trim","re","replace","RegExp","selectorReSuffix","makeScopeMatcher","match","selectorNeedsScoping","selectorScope","polyfillHostRe","polyfillHostNoCombinator","applySimpleSelectorScope","applySelectorScope","join","doScopeSelector","content","propertiesFromRule","type","CSSRule","MEDIA_RULE","media","mediaText","scopeRules","x","polyfillHost","parenSuffix","CSS_SELECTOR_BEG_REGEX","CSS_SELECTOR_END_REGEX","hostElement","win","node","ownerDocument","defaultView","existingRoot","shadowRoot","__AMP_SHADOW_ROOT","innerHTML","shadowDomSupported","getShadowDomSupportedVersion","mode","styleSheets","get","items","childNodes","tagName","sheet","doc","classList","add","hostStyle","textContent","host","getElementById","id","escapedId","ident","CSS","escape","querySelector","toArray","styleSheet","contains","ownerNode","createShadowRootPolyfill","isNative","rootId","Math","floor","random","transformer","css","rules","getStylesheetRules","implementation","createHTMLDocument","ShadowCSS","transformRootSelectors","scopeShadowCss","transformShadowCss","TRANSFORMER_PROP","rootSelectorPrefixer","pos","prev","charAt","next","test","head","documentElement","parentNode","removeChild","presetValues","AmpStoryCaptions","AMP","BaseElement","constructor","super","this","container_","video_","textTracksChangeUnlistener_","trackRenderers_","buildCallback","preset","getAttribute","includes","container","containerToUse","createShadowRootWithStyle","hasAttribute","isLayoutSupported","layout","isLayoutSizeDefined","setVideoElement","video","updateTracks_","listen","textTracks","pop","dispose","track","track_","element_","cueTimestamps_","render_","cueChangeUnlistener_","timeUpdateUnlistener_","updateTime_","_element$parentElemen","parentElement","firstChild","removeChildren","activeCues","cue","cueElement","html","getCueAsHTML","section","timestamps","timestamp","exec","parseInt","parseTimestamp","data","videoTime","currentTime","j","toggle","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["node_modules/@babel/runtime/helpers/esm/defineProperty.js","node_modules/@babel/runtime/helpers/esm/objectSpread2.js","src/core/types/array.js","src/core/dom/event-helper-listen.js","src/core/types/object/index.js","src/core/dom/jsx/index.ts","src/utils/event-helper.js","src/utils/log.js","extensions/amp-story-captions/0.1/track-renderer.js","src/core/dom/web-components.js","third_party/webcomponentsjs/ShadowCSS.js","src/shadow-embed.js","src/core/window/index.js","src/core/dom/css-selectors.js","src/style-installer.js","extensions/amp-story/1.0/utils.js","extensions/amp-story-captions/0.1/amp-story-captions.js","build/amp-story-captions-presets-0.1.css.js","src/core/dom/layout/index.js","src/core/dom/index.js","build/amp-story-captions-0.1.css.js"]}

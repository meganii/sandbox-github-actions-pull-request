;
!function(n){var t=self.BENTO=self.BENTO||{};(t.bento=t.bento||[]).push((function(n){"use strict";function t(n,r){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,r)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function i(n,t){if(t&&("object"===e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function o(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function u(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,i,o=[],u=!0,a=!1;try{for(r=r.call(n);!(u=(e=r.next()).done)&&(o.push(e.value),!t||o.length!==t);u=!0);}catch(n){a=!0,i=n}finally{try{u||null==r.return||r.return()}finally{if(a)throw i}}return o}}(n,t)||function(n,t){if(n){if("string"==typeof n)return o(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function l(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function s(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}Array.isArray;var f,c=Object.prototype;function d(n,t){return n.replace(/^|,/g,"$&".concat(t," "))}function p(n,t){if(void 0!==f?f:f=function(n){try{var t=n.ownerDocument,r=t.createElement("div"),e=t.createElement("div");return r.appendChild(e),r.querySelector(":scope div")===e}catch(n){return!1}}(n))return n.querySelector(d(t,":scope"));var r=function(n,t){var r=n.classList,e="i-amphtml-scoped";r.add(e);var i=d(t,".".concat(e)),o=n.querySelectorAll(i);return r.remove(e),o}(n,t)[0];return void 0===r?null:r}function v(n,t){var r=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return!!r&&r.call(n,t)}c.hasOwnProperty,c.toString;var h={info:console.info,warn:console.warn,error:console.error},b={isAndroid:function(){return/Android/i.test(self.navigator.userAgent)},isIos:function(){return/iPhone|iPad|iPod/i.test(self.navigator.userAgent)},isSafari:function(){return/Safari/i.test(self.navigator.userAgent)&&!this.isChrome()&&!this.isEdge()&&!this.isFirefox()&&!this.isOpera()},isChrome:function(){return/Chrome|CriOS/i.test(self.navigator.userAgent)&&!this.isEdge()&&!this.isOpera()},isFirefox:function(){return/Firefox|FxiOS/i.test(self.navigator.userAgent)&&!this.isEdge()},isOpera:function(){return/OPR\/|Opera|OPiOS/i.test(self.navigator.userAgent)},isEdge:function(){return/Edge/i.test(self.navigator.userAgent)},isWebKit:function(){return/WebKit/i.test(self.navigator.userAgent)&&!this.isEdge()},isWindows:function(){return/Windows/i.test(self.navigator.userAgent)},isStandalone:function(){return this.isIos()&&self.navigator.standalone||this.isChrome()&&self.matchMedia("(display-mode: standalone)").matches},isBot:function(){return/bot/i.test(self.navigator.userAgent)},getMajorVersion:function(){return this.isSafari()?this.isIos()?this.getIosMajorVersion()||0:this.dh(/\sVersion\/(\d+)/,1):this.isChrome()?this.dh(/(Chrome|CriOS)\/(\d+)/,2):this.isFirefox()?this.dh(/(Firefox|FxiOS)\/(\d+)/,2):this.isOpera()?this.dh(/(OPR|Opera|OPiOS)\/(\d+)/,2):this.isEdge()?this.dh(/Edge\/(\d+)/,1):0},dh:function(n,t){if(!self.navigator.userAgent)return 0;var r=self.navigator.userAgent.match(n);return!r||t>=r.length?0:parseInt(r[t],10)},getIosVersionString:function(){var n,t,r;return this.isIos()&&(null===(n=self.navigator.userAgent)||void 0===n||null===(t=n.match(/OS ([0-9]+[_.][0-9]+([_.][0-9]+)?)\b/))||void 0===t||null===(r=t[1])||void 0===r?void 0:r.replace(/_/g,"."))||""},getIosMajorVersion:function(){var n=this.getIosVersionString();return""===n?null:Number(n.split(".")[0])}},m=function(){function n(){}return n.getTop=function(n){return n.top},n.getLocation=function(n){return n.location},n.getDocumentReferrer=function(n){return n.document.referrer},n.getHostname=function(n){return n.location.hostname},n.getUserAgent=function(n){return n.navigator.userAgent},n.getUserLanguage=function(n){return n.navigator.userLanguage||n.navigator.language},n.getDevicePixelRatio=function(){return self.devicePixelRatio||1},n.getSendBeacon=function(n){if(n.navigator.sendBeacon)return n.navigator.sendBeacon.bind(n.navigator)},n.getXMLHttpRequest=function(n){return n.XMLHttpRequest},n.getImage=function(n){return n.Image},n}(),g=["javascript:","data:","vbscript:"],O={Qnn:function(){return this.uc||(this.uc=self.document.createElement("a")),this.uc},parse:function(n){var t=this.Qnn();return t.href="",new URL(n,t.href)},isProtocolValid:function(n){var t=this.parse(n);return!g.includes(t.protocol)},assertHttpsUrl:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"url";if(!this.isSecureUrl(n))throw new Error("".concat(t,' must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: ').concat(n))},isSecureUrl:function(n){var t,r=this.parse(n);return"https:"===r.protocol||"localhost"===r.hostname||"127.0.0.1"===r.hostname||(null===(t=r.hostname)||void 0===t?void 0:t.endsWith(".localhost"))}},y={getMetaByName:function(n){var t,r=self.document.head.querySelectorAll("meta[name]");return(null===(t=Array.from(r).find((function(t){return t.getAttribute("name")===n&&t.getAttribute("content")})))||void 0===t?void 0:t.getAttribute("content"))||null},get sourceUrl(){return self.location.href},get canonicalUrl(){var n,t=self.document,r=null==t||null===(n=t.AMP)||void 0===n?void 0:n.canonicalUrl;if(r)return r;var e=t.querySelector("link[rel=canonical]");return e?O.parse(e.href).href:this.sourceUrl}};function w(n,t,r,e,i,o,u){try{var a=n[o](u),l=a.value}catch(n){return void r(n)}a.done?t(l):Promise.resolve(l).then(e,i)}var A={fetchJson:function(n,t){return this.fetch(n,t).then((function(n){return n.json()}))},fetch:function(n,t){return(r=regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,self.fetch(n,t);case 2:if((e=r.sent).ok){r.next=5;break}throw new Error(e.statusText);case 5:return r.abrupt("return",e);case 6:case"end":return r.stop()}}),r)})),function(){var n=this,t=arguments;return new Promise((function(e,i){var o=r.apply(n,t);function u(n){w(o,e,i,u,a,"next",n)}function a(n){w(o,e,i,u,a,"throw",n)}u(void 0)}))})();var r}};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var x=self.__AMP_LOG;function N(n,t,r,e){var i,o,u;try{i=n.open(t,r,e)}catch(n){(x.dev||(x.dev=function(n,t){throw new Error("failed to call initLogConstructor")}())).error("DOM","Failed to open url on target: ",r,n)}return!i&&"_top"!=r&&("number"!=typeof u&&(u=0),u+"noopener".length>(o=e||"").length||-1===o.indexOf("noopener",u))&&(i=n.open(t,"_top")),i}function P(){if(b.isAndroid()&&b.isChrome())return h.info("BENTO-APP-BANNER","Not rendering bento-app-banner:","Browser supports builtin banners."),null;var n=self.document.head.querySelector("link[rel=manifest],link[rel=origin-manifest]");if(!n)return null;var t=n.getAttribute("href");O.assertHttpsUrl(t,void 0,"manifest href");var r=A.fetchJson(t).then(E);return{promise:r,openOrInstall:function(){return r.then((function(n){if(n){var t=n.installAppUrl,r=n.openInAppUrl;setTimeout((function(){m.getTop(window).location.assign(t)}),1500),N(window,r,"_top")}}))}}}function E(n){var t=n.related_applications;if(!t)return h.error("BENTO-APP-BANNER","Invalid manifest:","related_applications is missing from manifest.json file"),null;var r,e,i,o,u,a=t.find((function(n){return"play"===n.platform}));return a?{installAppUrl:"https://play.google.com/store/apps/details?id=".concat(a.id),openInAppUrl:(r=a.id,e=O.parse(y.canonicalUrl),i=e.protocol.replace(":",""),o=e.host,u=e.pathname,"android-app://".concat(r,"/").concat(i,"/").concat(o).concat(u))}:(h.error("BENTO-APP-BANNER","Invalid manifest:","Could not find a platform=play app in manifest"),null)}function j(){if(b.isSafari())return h.info("BENTO-APP-BANNER","Not rendering bento-app-banner:","Browser supports builtin banners."),null;var n=y.getMetaByName("apple-itunes-app");if(!n)return h.error("BENTO-APP-BANNER","Not rendering bento-app-banner:",'could not find a <meta name="apple-itunes-app" /> tag'),null;var t=function(n){var t=function(n){return n.replace(/\s/,"").split(",").reduce((function(n,t){var r=u(t.split("="),2),e=r[0],i=r[1];return n[e]=i,n}),{})}(n),r=t["app-id"],e=t["app-argument"];e?O.isProtocolValid(e)||(h.warn("BENTO-APP-BANNER","The url in app-argument has invalid protocol: ".concat(e)),e=""):h.warn("BENTO-APP-BANNER",'<meta name="apple-itunes-app">\'s content should contain app-argument to allow opening an already installed application on iOS.');var i="https://itunes.apple.com/us/app/id".concat(r);return{installAppUrl:i,openInAppUrl:e||i}}(n),r=t.installAppUrl,e=t.openInAppUrl;return{installAppUrl:r,openInAppUrl:e,openOrInstall:function(){setTimeout((function(){N(window,r,"_top")}),1500),N(window,e,"_top")}}}var B=["children","dismissButtonAriaLabel","onDismiss","onInstall"];function S(t){var r=t.children,e=t.dismissButtonAriaLabel,i=void 0===e?"Dismiss":e,o=t.onDismiss,u=t.onInstall,a=function(n,t){if(null==n)return{};var r,e,i={},o=Object.keys(n);for(e=0;e<o.length;e++)r=o[e],t.indexOf(r)>=0||(i[r]=n[r]);return i}(t,B),l=(0,n.useRef)(null);return(0,n.useEffect)((function(){var n=l.current.querySelector("button[open-button]");if(!n){var t=l.current.querySelector("slot");t&&(n=function(n,t){for(var r=n.assignedElements(),e=0;e<r.length;e++){var i=r[e];if(v(i,t))return i;var o=p(i,t);if(o)return o}return null}(t,"button[open-button]"))}if(n)return n.addEventListener("click",u),function(){return n.removeEventListener("click",u)};h.error("BENTO-APP-BANNER","Component children should contain a <button open-button>")}),[u]),(0,n.createElement)(n.ContainWrapper,s({},a),(0,n.createElement)("div",{class:"banner-dd356a4",ref:l},(0,n.createElement)("div",{class:"banner-padding-dd356a4"}),(0,n.createElement)("button",{class:"dismiss-dd356a4","aria-label":i,onClick:o}),r))}function R(t){var r=(0,n.useMemo)(j,[]);return r?(0,n.createElement)(S,s(s({},t),{},{onInstall:r.openOrInstall})):null}function I(t){var r=(0,n.useMemo)(P,[]);return r?(0,n.createElement)(S,s(s({},t),{},{onInstall:r.openOrInstall})):null}var T=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&t(n,r)}(a,n);var e,o,u=(e=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=r(e);if(o){var u=r(this).constructor;n=Reflect.construct(t,arguments,u)}else n=t.apply(this,arguments);return i(this,n)});function a(){return u.apply(this,arguments)}return a}(n.PreactBaseElement);T.Component=function(t){t.id||h.warn("BENTO-APP-BANNER","component should have an id");var r,e,i,o,a,l=(a=t.id,r="bento-app-banner:"+a,!1,i=(e=u((0,n.useState)((function(){try{var n,t=null===(n=self.localStorage)||void 0===n?void 0:n.getItem(r);return!!t&&JSON.parse(t)}catch(n){return false}})),2))[0],o=e[1],[i,(0,n.useCallback)((function(n){try{var t,e=JSON.stringify(n);null===(t=self.localStorage)||void 0===t||t.setItem(r,e)}catch(n){h.warn("useLocalStorage","Could not write value to local storage",r,n)}o(n)}),[r])]),f=u(l,2),c=f[0],d=f[1];if(c)return null;var p=b.isIos()?R:b.isAndroid()?I:null;return p?(0,n.createElement)(p,s(s({},t),{},{onDismiss:function(){return d(!0)}})):(h.info("BENTO-APP-BANNER","Component not rendered:","OS not supported"),null)},T.props={"children":{passthrough:!0},"dismissButtonAriaLabel":{attr:"dismiss-button-aria-label"},"id":{attr:"id"}},T.layoutSizeDefined=!0,T.usesShadowDom=!0,T.shadowCss='.banner-dd356a4{left:0;width:100%;bottom:0!important;z-index:13;position:fixed!important;background:#fff;box-shadow:0 0 5px 0 rgba(0,0,0,0.2)!important;box-sizing:border-box;max-height:100px!important}.banner-padding-dd356a4{top:0;left:0;right:0;height:4px;z-index:15;position:absolute;background:#fff}.dismiss-dd356a4{top:-28px;right:0;width:28px;border:none;height:28px;z-index:14;position:absolute;box-shadow:0 -1px 1px 0 rgba(0,0,0,0.2);border-radius:12px 0 0 0;background-size:13px 13px;background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="13" height="13" viewBox="341 8 13 13" xmlns="http://www.w3.org/2000/svg"><path fill="%234F4F4F" d="M354 9.31 352.69 8l-5.19 5.19L342.31 8 341 9.31l5.19 5.19-5.19 5.19 1.31 1.31 5.19-5.19 5.19 5.19 1.31-1.31-5.19-5.19z" fill-rule="evenodd"/></svg>\');background-repeat:no-repeat;background-position:9px}.dismiss-dd356a4:before{top:-20px;left:-20px;right:0;bottom:0;content:"";position:absolute}[dir=rtl] .dismiss-dd356a4{left:0;right:auto;background-position:6px;border-top-left-radius:0;border-top-right-radius:12px}[dir=rtl] .dismiss-dd356a4:before{left:0;right:-20px}',(0,n.defineBentoElement)("bento-app-banner",T,undefined)}))}();
//# sourceMappingURL=bento-app-banner-1.0.js.map
;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-mathml",ev:"0.1",l:!0,f:function(t,n){(()=>{var n,{isArray:e}=Array,{hasOwnProperty:r,toString:o}=Object.prototype;function i(t){const n=Object.create(null);return t&&Object.assign(n,t),n}function c(t,n,e,r,o,i,c,u,l,s,a){return t}function u(t){return JSON.parse(t)}function l(t,n){try{return u(t)}catch(t){return null==n||n(t),null}}function s(t){const n=parseFloat(t);return"number"==typeof(e=n)&&isFinite(e)?n:void 0;var e}function a(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:e,stack:r}=t,o=new Error(e);for(const n in t)o[n]=t[n];return o.stack=r,o}function f(t){let n=null,e="";for(const t of arguments)t instanceof Error&&!n?n=a(t):(e&&(e+=" "),e+=t);return n?e&&(n.message=e+": "+n.message):n=new Error(e),n}function m(t){var n,e;null===(n=(e=self).__AMP_REPORT_ERROR)||void 0===n||n.call(e,t)}var p=["Webkit","webkit","Moz","moz","ms","O","o"];function d(t,e,r,o,c){const u=function(t,e,r){if(e.startsWith("--"))return e;n||(n=i());let o=n[e];if(!o||r){if(o=e,void 0===t[e]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),r=function(t,n){for(let e=0;e<p.length;e++){const r=p[e]+n;if(void 0!==t[r])return r}return""}(t,n);void 0!==t[r]&&(o=r)}r||(n[e]=o)}return o}(t.style,e,c);if(!u)return;const l=o?r+o:r;t.style.setProperty(function(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return p.some((t=>n.startsWith(t+"-")))?`-${n}`:n}(u),l)}var v=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function h(t,n=""){try{return decodeURIComponent(t)}catch(t){return n}}function b(t){const n=i();if(!t)return n;let e;for(;e=v.exec(t);){const t=h(e[1],e[1]),r=e[2]?h(e[2].replace(/\+/g," "),e[2]):"";n[t]=r}return n}function g(t){const{location:n}=t||self;return b(n.originalHash||n.hash)}var w="";function y(t){const n=t||self;return n.__AMP_MODE?n.__AMP_MODE:n.__AMP_MODE=function(t){return{localDev:!1,development:O(t,g(t)),esm:!0,test:!1,rtvVersion:j(t),ssrReady:!1}}(n)}function j(t){var n;return w||(w=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"012301041800000"),w}function O(t,n){const e=n||g(t);return["1","actions","amp","amp4ads","amp4email"].includes(e.development)||!!t.AMP_DEV_MODE}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var S=self.__AMP_LOG;function $(t){return S.user||(S.user=k()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(S.user.win,t)?S.userForEmbed||(S.userForEmbed=k()):S.user}function k(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function x(t,n,e,r,o,i,c,u,l,s,a){return t}function E(t,n,e,r,o,i,c,u,l,s,a){return $().assert(t,n,e,r,o,i,c,u,l,s,a)}function F(t,n){return L(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function A(t,n){return L(function(t){const n=I(t);return n.isSingleDoc()?n.win:n}(I(t)),n)}function I(t){return t.nodeType?(e=t,n=(e.ownerDocument||e).defaultView,F(n,"ampdoc")).getAmpDoc(t):t;var n,e}function L(t,n){x(function(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}(t,n));const e=function(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(x(e.ctor),x(e.context),e.obj=new e.ctor(e.context),x(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}var M=class{static generate(t){return function(t){const{length:n}=t;let e=5381;for(let r=0;r<n;r++)e=33*e^t.charCodeAt(r);return String(e>>>0)}(function(t){const n=[];let e=0;for(;1==(null==(r=t)?void 0:r.nodeType)&&e<25;){let r="";t.id&&(r=`/${t.id}`);const o=t.nodeName.toLowerCase();n.push(`${o}${r}${N(t)}`),e++,t=t.parentElement}var r;return n.join()}(t))}};function N(t){const{nodeName:n}=t;let e=0,r=0,o=t.previousElementSibling;for(;o&&r<25&&e<100;)o.nodeName==n&&r++,e++,o=o.previousElementSibling;return r<25&&e<100?`.${r}`:""}function C(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function R(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function T(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?R(Object(e),!0).forEach((function(n){C(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):R(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}var U="__AMP__EXPERIMENT_TOGGLES";function _(t){var n,r,o,l,s;if(t[U])return t[U];t[U]=i();const a=t[U];c(a);const f=T(T({},null!==(n=t.AMP_CONFIG)&&void 0!==n?n:{}),null!==(r=t.AMP_EXP)&&void 0!==r?r:u((null===(o=t.__AMP_EXP)||void 0===o?void 0:o.textContent)||"{}"));for(const t in f){const n=f[t];"number"==typeof n&&n>=0&&n<=1&&(a[t]=Math.random()<n)}const m=null===(l=t.AMP_CONFIG)||void 0===l?void 0:l["allow-doc-opt-in"];if(e(m)&&m.length){const n=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(n){var p;const t=(null===(p=n.getAttribute("content"))||void 0===p?void 0:p.split(","))||[];for(const n of t)m.includes(n)&&(a[n]=!0)}}Object.assign(a,function(t){var n;let e="";try{var r;"localStorage"in t&&(e=null!==(r=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==r?r:"")}catch(t){}const o=(null===(n=e)||void 0===n?void 0:n.split(/\s*,\s*/g))||[],c=i();for(const t of o)t&&("-"==t[0]?c[t.substr(1)]=!1:c[t]=!0);return c}(t));const d=null===(s=t.AMP_CONFIG)||void 0===s?void 0:s["allow-url-opt-in"];if(e(d)&&d.length){const n=b(t.location.originalHash||t.location.hash);for(const t of d){const e=n[`e-${t}`];"1"==e&&(a[t]=!0),"0"==e&&(a[t]=!1)}}return a}var G,V=(()=>self.AMP.config.urls)();function D(t,n){return G||(G=self.document.createElement("a")),function(t,n,e){return t.href="",new URL(n,t.href)}(G,t)}new Set(["c","v","a","ad"]);var J=(()=>self.AMP.config.urls)(),P={};function W(t,n,e,r){const o=e||n.getAttribute("type");E(o,"Attribute type required for <amp-ad>: %s",n);const i=function(t){let n=0;for(let e=t;e&&e!=e.parent;e=e.parent)n++;return String(n)+"-"+q(t)}(t);let c={};return function(t,n){const{dataset:e}=t;for(const t in e)t.startsWith("vars")||(n[t]=e[t]);const r=t.getAttribute("json");if(r){const e=l(r);if(void 0===e)throw $().createError("Error parsing JSON in json attribute in element %s",t);for(const t in e)n[t]=e[t]}}(n,c),c=function(t,n,e,r){const o=Date.now(),i=n.getAttribute("width"),c=n.getAttribute("height");(r=r||{}).width=s(i),r.height=s(c),n.getAttribute("title")&&(r.title=n.getAttribute("title"));let u=t.location.href;"about:srcdoc"==u&&(u=t.parent.location.href);const l=I(n),a=A(n,"documentInfo").get(),f=(p=n,A(p,"viewer")).getUnconfirmedReferrerUrl(),m=function(t){const n=t.ownerDocument.body;let e=0,r=0;for(let o=t;o&&o!=n;o=o.offsetParent)e+=o.offsetLeft,r+=o.offsetTop;const{offsetHeight:o,offsetWidth:i}=t;return function(t,n,e,r){return{left:t,top:n,width:e,height:r,bottom:n+r,right:t+e,x:t,y:n}}(e,r,i,o)}(n);var p,d,v,h;r._context={"ampcontextVersion":"2301041800000","ampcontextFilepath":`${V.thirdParty}/2301041800000/ampcontext-v0.js`,"sourceUrl":a.sourceUrl,"referrer":f,"canonicalUrl":a.canonicalUrl,"pageViewId":a.pageViewId,"location":{"href":u},"startTime":o,"tagName":n.tagName,"mode":{localDev:!1,development:!1,esm:y(h).esm,test:!1,rtvVersion:y(h).rtvVersion},"canary":(d=t,!(null===(v=d.AMP_CONFIG)||void 0===v||!v.canary)),"hidden":!l.isVisible(),"initialLayoutRect":m?{"left":m.left,"top":m.top,"width":m.width,"height":m.height}:null,"domFingerprint":M.generate(n),"experimentToggles":_(t),"sentinel":e};const b=n.getAttribute("src");return b&&(r.src=b),r}(t,n,i,c),c.type=o,Object.assign(c._context,r),c}function q(t){let n;if(t.crypto&&t.crypto.getRandomValues){const e=new Uint32Array(2);t.crypto.getRandomValues(e),n=String(e[0])+e[1]}else n=String(t.Math.random()).substr(2)+"0";return n}function z(t){return"string"==typeof t&&t.startsWith("amp-")&&-1!=t.indexOf("{")}function H(t){return t.data}var X="unlisten";function Z(t,n,e){const r=function(t,n){let{listeningFors:e}=t;return!e&&n&&(e=t.listeningFors=Object.create(null)),e||null}(t,e);if(!r)return r;let o=r[n];return!o&&e&&(o=r[n]=[]),o||null}function B(t,n){for(let e=n;e&&e!=e.parent;e=e.parent)if(e==t)return!0;return!1}function K(t){const n={"sentinel":X};for(let e=t.length-1;e>=0;e--){const r=t[e];if(!r.frame.contentWindow){t.splice(e,1);const{events:o}=r;for(const t in o)o[t].splice(0,1/0).forEach((t=>{t(n)}))}}}var Q=class extends t.BaseElement{constructor(t){super(t),this.Lv=null}preconnectCallback(){var t;(t=this.win,F(t,"preconnect")).url(this.getAmpDoc(),"https://cdnjs.cloudflare.com")}buildCallback(){let t;this.element.hasAttribute("inline")&&(t="1px"),this.mutateElement((()=>{!function(t,n){for(const e in n)d(t,e,n[e])}(this.element,{width:t,height:"1rem"})}))}layoutCallback(){const t=function(t,n,e,r,o={}){const{allowFullscreen:i=!1,initialIntersection:c}=o;x(void 0===n.isConnected||!0===n.isConnected);const u=W(t,n,e,r);c&&(u._context.initialIntersection=c);const l=t.document.createElement("iframe");P[u.type]||(P[u.type]=0),P[u.type]+=1;const s=function(t,n,e){return function(t,n,e){const r=n.getMetaByName("amp-3p-iframe-src");if(!r)return null;const o=function(t,n,e="source"){return E(null!=t,"%s %s must be available",n,e),E(function(t){return"https:"==(t=(t=>"string"==typeof t?D(t):t)(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||function(t,n){const e=t.length-n.length;return e>=0&&t.indexOf(n,e)==e}(t.hostname,".localhost")}(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,e,t),t}(r,'meta[name="amp-3p-iframe-src"]');E(-1==o.indexOf("?"),"3p iframe url must not include query string %s in element %s.",o,r);const i=D(o);return E("localhost"==i.hostname||i.origin!=D(t.location.href).origin,"3p iframe url must not be on the same origin as the current document %s (%s) in element %s. See https://github.com/ampproject/amphtml/blob/main/docs/spec/amp-iframe-origin-policy.md for details.",o,i.origin,r),`${o}?2301041800000`}(t,n)||function(t,n){return t.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN=t.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN||"d-"+q(t),"https://"+t.__AMP_DEFAULT_BOOTSTRAP_SUBDOMAIN+`.${J.thirdPartyFrameHost}/2301041800000/frame.html`}(t)}(t,n.getAmpDoc()),a=D(s).hostname,f=JSON.stringify({"host":a,"bootstrap":(m=u.type,`${J.thirdParty}/2301041800000/vendor/${m}.mjs`),"type":u.type,"count":P[u.type],"attributes":u});var m;return l.src=s,l.ampLocation=D(s),l.name=f,u.width&&(l.width=u.width),u.height&&(l.height=u.height),u.title&&(l.title=u.title),i&&l.setAttribute("allowfullscreen","true"),l.setAttribute("scrolling","no"),d(l,"border","none"),l.onload=function(){this.readyState="complete"},l.setAttribute("allow","sync-xhr 'none';"),["facebook"].includes(e)||function(t){if(!t.sandbox||!t.sandbox.supports)return;const n=["allow-top-navigation-by-user-activation","allow-popups-to-escape-sandbox"];for(let e=0;e<n.length;e++){const r=n[e];if(!t.sandbox.supports(r))return}t.sandbox=n.join(" ")+" "+["allow-forms","allow-modals","allow-pointer-lock","allow-popups","allow-same-origin","allow-scripts"].join(" ")}(l),l.setAttribute("data-amp-3p-sentinel",u._context.sentinel),l}(this.win,this.element,"mathml");return t.title=this.element.title||"MathML formula",t.classList.add("i-amphtml-fill-content"),function(t,n,e,r,o,i){x(t.src),x(!t.parentNode),x(e);const u=t.ownerDocument.defaultView;!function(t){t.listeningFors||t.addEventListener("message",(function(n){if(!H(n))return;const e=function(t){return"string"==typeof t&&(t="{"==t.charAt(0)?l(t,(t=>{}))||null:z(t)?function(t){if(!z(t))return null;const n=t.indexOf("{");return c(-1!=n),l(t.substr(n),(n=>{!function(t){const n=f.apply(null,arguments);setTimeout((()=>{throw m(n),n}))}(new Error(`MESSAGING: Failed to parse message: ${t}\n${n.message}`))}))}(t):null),t}(H(n));if(!e||!e.sentinel)return;const r=function(t,n,e,r){const o=Z(t,n);if(!o)return o;let i;for(let t=0;t<o.length;t++){const n=o[t],{contentWindow:e}=n.frame;if(e){if(r==e||B(e,r)){i=n;break}}else setTimeout(K,0,o)}return i?i.events:null}(t,e.sentinel,n.origin,n.source);if(!r)return;let o=r[e.type];if(o){o=o.slice();for(let t=0;t<o.length;t++)(0,o[t])(e,n.source,n.origin,n)}}))}(u);const s=function(t,n,e){const r=function(t,n){return t.getAttribute("data-amp-3p-sentinel")}(n),o=Z(t,r,!0);let i;for(let t=0;t<o.length;t++){const e=o[t];if(e.frame===n){i=e;break}}return i||(i={frame:n,events:Object.create(null)},o.push(i)),i.events}(u,t),a=D(t.src).origin;let p,d=s["embed-size"]||(s["embed-size"]=[]),v=function(n,r,o,i){if("amp"==n.sentinel){if(r!=t.contentWindow)return;const n="null"==o&&undefined;if(a!=o&&!n)return}r==t.contentWindow&&(n.sentinel!=X?e(n,r,o,i):p())};d.push(v),p=function(){if(v){const t=d.indexOf(v);t>-1&&d.splice(t,1),v=null,d=null,e=null}}}(t,0,(t=>{var n;this.element.hasAttribute("inline")||(t.width=void 0),(n=this.getAmpDoc(),A(n,"mutator")).forceChangeSize(this.element,t.height,t.width)})),this.element.appendChild(t),this.Lv=t,this.loadPromise(t)}unlayoutCallback(){var t,n;return this.Lv&&(null===(n=(t=this.Lv).parentElement)||void 0===n||n.removeChild(t),this.Lv=null),!0}isLayoutSupported(t){return"container"==t}};t.registerElement("amp-mathml",Q,"amp-mathml[inline]{display:inline-block;vertical-align:middle}\n/*# sourceURL=/extensions/amp-mathml/0.1/amp-mathml.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-mathml-0.1.mjs.map
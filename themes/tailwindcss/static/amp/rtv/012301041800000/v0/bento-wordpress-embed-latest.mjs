;
import{PreactBaseElement as e}from"../bento.mjs";function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?n(Object(o),!0).forEach((function(n){t(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}import*as a from"../bento.mjs";import{forwardRef as l}from"../bento.mjs";import{useValueRef as s}from"../bento.mjs";import{createElement as i}from"../bento.mjs";import{useCallback as u,useEffect as c,useImperativeHandle as m,useLayoutEffect as f,useRef as d}from"../bento.mjs";import{forwardRef as b}from"../bento.mjs";import{ContainWrapper as g,useValueRef as j}from"../bento.mjs";import{useAmpContext as p,useLoading as v}from"../bento.mjs";var w=["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"],O=()=>!1,y=b((function(e,t){let{allow:n,allowFullScreen:a,iframeStyle:l,name:s,title:b,matchesMessagingOrigin:y=O,messageHandler:h,ready:R=!0,loading:S,onReadyState:L,sandbox:$,src:E}=e,U=o(e,w);const{playable:k}=p(),x=v(S),F="unload"!==x,M=d(!1),P=j(L),z=u((e=>{if(e!==M.current){M.current=e;const t=P.current;null==t||t(e?"complete":"loading")}}),[P]),C=d(null);return m(t,(()=>({get readyState(){return M.current?"complete":"loading"},get node(){return C.current}})),[]),f((()=>{F||z(!1)}),[F,z]),c((()=>{const e=C.current;if(!k&&e){const{src:t}=e;(e=>!(!e||"about:blank"==e||e.includes("#")))(t)?e.src=e.src:e.parentNode.insertBefore(e,e.nextSibling)}}),[k]),f((()=>{const e=C.current;if(!e||!F)return;const t=e=>{const t=C.current;t&&e.source==t.contentWindow&&y(e.origin)&&h(e)},{defaultView:n}=e.ownerDocument;return n.addEventListener("message",t),()=>n.removeEventListener("message",t)}),[y,h,F,R]),i(g,r(r({},U),{},{layout:!0,size:!0,paint:!0}),F&&R&&i("iframe",{allow:n,allowFullScreen:a,frameBorder:"0",loading:x,name:s,onLoad:()=>z(!0),part:"iframe",ref:C,sandbox:$,scrolling:"no",src:E,style:r(r({},l),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:b}))}));y.displayName="IframeEmbed";var{hasOwnProperty:h,toString:R}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var S=["onLoad","requestResize","title","url"],{useCallback:L,useEffect:$,useMemo:E,useRef:U,useState:k}=a,x={},F=l((function(e,t){let{onLoad:n,requestResize:l,title:i="WordPress Embed",url:u}=e,c=o(e,S);const[m,f]=k(x),[d,b]=k(0),g=U(null),[j,p]=k(null),v=s(n),w=E((()=>function(e,t,n,r){return function(e,t,n){if(!t)return e;const r=e.split("#",2),o=r[0].split("?",2);let a=o[0]+(o[1]?`?${o[1]}&${t}`:`?${t}`);return a+=r[1]?`#${r[1]}`:"",a}(e,`${encodeURIComponent("embed")}=${encodeURIComponent("true")}`)}(u)),[u]),O=L((e=>{const t=new URL(u),n=new URL(e);return t.origin===n.origin}),[u]),h=L((e=>{var t;const n=function(e){return e.data}(e);switch(n.message){case"height":if("number"==typeof n.value){const e=n.value;l&&l(e),f({"height":e}),b(1)}null===(t=v.current)||void 0===t||t.call(v);break;case"link":O(n.value)&&j&&(j.top.location.href=n.value)}}),[l,O,j,v]);return $((()=>{var e,t;p(null===(e=g.current)||void 0===e||null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)}),[]),function(e){try{return new URL(e),!0}catch(e){return console.warn("Please provide a valid url"),!1}}(u)?a.createElement(y,r({iframeStyle:{opacity:d},matchesMessagingOrigin:O,messageHandler:h,ref:t,contentRef:g,src:w,wrapperStyle:m,title:i},c)):null}));F.displayName="BentoWordPressEmbed";var M=class extends e{};M.Component=F,M.props={url:{attr:"data-url",default:""},title:{attr:"title"}},M.layoutSizeDefined=!0,M.usesShadowDom=!0;import{defineBentoElement as P}from"../bento.mjs";P("bento-wordpress-embed",M,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-wordpress-embed-1.0.mjs.map
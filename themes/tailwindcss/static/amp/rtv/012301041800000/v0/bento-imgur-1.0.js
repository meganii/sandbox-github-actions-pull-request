;
!function(n){var t=self.BENTO=self.BENTO||{};(t.bento=t.bento||[]).push((function(n){"use strict";function t(n,r){return(t=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,r)}function r(n){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function o(n,t){if(t&&("object"===e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}function u(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function i(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function c(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function a(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function f(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,u=[],i=!0,c=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(u.push(e.value),!t||u.length!==t);i=!0);}catch(n){c=!0,o=n}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return u}}(n,t)||function(n,t){if(n){if("string"==typeof n)return a(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(n,t){if(null==n)return{};var r,e,o={},u=Object.keys(n);for(e=0;e<u.length;e++)r=u[e],t.indexOf(r)>=0||(o[r]=n[r]);return o}var s,b="loading",m="complete",y=(Array.isArray,Object.prototype),d=(y.hasOwnProperty,y.toString);var v="unload",g=(u(s={},"auto",0),u(s,"lazy",1),u(s,"eager",2),u(s,v,3),["allow","allowFullScreen","iframeStyle","name","title","matchesMessagingOrigin","messageHandler","ready","loading","onReadyState","sandbox","src"]),p=function(){return!1},h=(0,n.forwardRef)((function(t,r){var e=t.allow,o=t.allowFullScreen,u=t.iframeStyle,i=t.name,a=t.title,f=t.matchesMessagingOrigin,s=void 0===f?p:f,y=t.messageHandler,d=t.ready,h=void 0===d||d,j=t.loading,O=t.onReadyState,w=t.sandbox,S=t.src,I=l(t,g),R=(0,n.useAmpContext)().playable,A=(0,n.useLoading)(j),E=A!==v,T=(0,n.useRef)(!1),x=(0,n.useValueRef)(O),F=(0,n.useCallback)((function(n){if(n!==T.current){T.current=n;var t=x.current;null==t||t(n?m:b)}}),[x]),z=(0,n.useRef)(null);return(0,n.useImperativeHandle)(r,(function(){return{get readyState(){return T.current?m:b},get node(){return z.current}}}),[]),(0,n.useLayoutEffect)((function(){E||F(!1)}),[E,F]),(0,n.useEffect)((function(){var n=z.current;!R&&n&&(function(n){return!(!n||"about:blank"==n||n.includes("#"))}(n.src)?n.src=n.src:n.parentNode.insertBefore(n,n.nextSibling))}),[R]),(0,n.useLayoutEffect)((function(){var n=z.current;if(n&&E){var t=function(n){var t=z.current;t&&n.source==t.contentWindow&&s(n.origin)&&y(n)},r=n.ownerDocument.defaultView;return r.addEventListener("message",t),function(){return r.removeEventListener("message",t)}}}),[s,y,E,h]),(0,n.createElement)(n.ContainWrapper,c(c({},I),{},{layout:!0,size:!0,paint:!0}),E&&h&&(0,n.createElement)("iframe",{allow:e,allowFullScreen:o,frameBorder:"0",loading:A,name:i,onLoad:function(){return F(!0)},part:"iframe",ref:z,sandbox:w,scrolling:"no",src:S,style:c(c({},u),{},{width:"100%",height:"100%",contentVisibility:"auto"}),title:a}))}));h.displayName="IframeEmbed";var j={info:console.info,warn:console.warn,error:console.error},O=["imgurId","title"],w=function(n){return"https://imgur.com"===n},S=(0,n.forwardRef)((function(t,r){var e=t.imgurId,o=t.title,u=void 0===o?"imgur post":o,i=l(t,O),a=f((0,n.useState)(b),2),s=a[0],y=a[1],v=f((0,n.useState)({}),2),g=v[0],p=v[1],S=(0,n.useRef)(!1);(0,n.useEffect)((function(){if(s===b&&(S.current=!1),s===m){var n=setTimeout((function(){S.current||j.error("bento-imgur",'Failed to load.  Is "'.concat(e,'" a correct id?'))}),500);return function(){return clearTimeout(n)}}}),[s,e]);var I=function(n){var t=function(n){return n.replace(/^(a\/)?(.*)/,(function(n,t,r){return(t||"")+encodeURIComponent(r)}))}(n);return"https://imgur.com/".concat(t,"/embed?pub=true")}(e);return(0,n.createElement)(h,c({ref:r,allowFullScreen:!0,onReadyState:y,title:u,src:I,matchesMessagingOrigin:w,messageHandler:function(n){S.current=!0;var t=function(n){return t=n.data,"[object Object]"===d.call(t)?n.data:function(n,t){try{return function(n){return JSON.parse(n)}(n)}catch(n){return null==t||t(n),null}}(n.data);var t}(n)||{};"resize_imgur"===t.message&&p({height:Number(t.height)})},wrapperStyle:g},i))}));S.displayName="Imgur";var I=function(n){!function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&t(n,r)}(c,n);var e,u,i=(e=c,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}(),function(){var n,t=r(e);if(u){var i=r(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return o(this,n)});function c(){return i.apply(this,arguments)}return c}(n.PreactBaseElement);I.Component=S,I.props={"imgurId":{attr:"data-imgur-id"}},I.layoutSizeDefined=!0,I.usesShadowDom=!0,(0,n.defineBentoElement)("bento-imgur",I,undefined)}))}();
//# sourceMappingURL=bento-imgur-1.0.js.map
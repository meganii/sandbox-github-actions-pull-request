{"version":3,"file":"amp-link-rewriter-0.1.js","mappings":"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","names":["o","p","_setPrototypeOf","Object","setPrototypeOf","__proto__","_getPrototypeOf","getPrototypeOf","obj","_typeof","Symbol","iterator","constructor","prototype","self","call","TypeError","ReferenceError","assertThisInitialized","Array","isArray","scopeSelectorSupported","_Object$prototype","hasOwn_","hasOwnProperty","key","selector","distribute","replace","toString","__AMP_LOG","user","dev","userForEmbed","logs","opt_element","getUserLogger","win","ownerDocument","defaultView","isFromEmbed","suffix","levelFunc","opt_suffix","Error","callLogConstructor","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","elementOrAmpDoc","id","getServiceInternal","getAmpdocServiceHolder","getAmpdoc","nodeOrDoc","nodeType","node","__AMP_TOP","getTopWindow","getService","getAmpDoc","ampdoc","isSingleDoc","holder","devAssert","isServiceRegistered","s","services","__AMP_SERVICES","getServices","ctor","context","resolve","service","Services","getServiceForDoc","get","Priority_Enum","Set","element","attribute","newAttr","config","parent","tagName","root","scripts","test","undefined","el","doc","testElement","createElement","testChild","appendChild","querySelector","e","testScopeSelector","querySelectorAll","prependSelectorsWith","classList","unique","add","scopedSelector","elements","remove","scopedQuerySelectionFallback","length","json","script","getAttribute","toUpperCase","isJsonScriptTag","textContent","JSON","parse","_unused","getChildJsonConfig","createError","getConfigJson","assert","output","section","hasOwn","keys","forEach","vars","scopeDocument","htmlElement","configOpts","anchorAttr","every","RegExp","WL_ANCHOR_ATTR","PREFIX_DATA_ATTR","REG_DOMAIN_URL","PAGE_PROP_ALLOWLIST","SOURCE_URL","DOCUMENT_REFERRER","AMP_GEO","LinkRewriter","referrer","ampElement","ampDoc","this","ampDoc_","configOpts_","getConfigOpts","listElements_","getRootNode","cssSelector","join","selection","filteredSelection","hasAttributeValues","push","getScopeElements","referrer_","rewrittenUrl_","urlReplacementService_","handleClick","anchor","isRewritten_","isNotFiltered_","sourceTrimmedDomain","sourceUrl","match","canonicalTrimmedDomain","canonicalUrl","isInternalLink_","setRedirectUrl_","_proto","href","isListed_","closest","callback","opt_stopAt","parentElement","matcher","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","isBelongsToContainer","filter","trimmedDomains","some","domain","domainHrefMatch","replacePageProp_","replaceVars_","expandUrlSync","val","dataset","opt_computeParamNameFunc","opt_paramPattern","params","paramPattern","toLowerCase","substr","getDataParamsFromAttributes","assign","Math","random","_this","encodeURIComponent","LinkRewriter2","AmpLinkRewriter","subClass","superClass","create","value","writable","configurable","_inherits","Derived","hasNativeReflectConstruct","_super","AmpLinkRewriter2","Reflect","construct","sham","Proxy","Boolean","valueOf","isNativeReflectConstruct","result","Super","NewTarget","arguments","apply","possibleConstructorReturn","rewriter_","buildCallback","viewer","whenReady","then","getReferrerUrl","_this2","letsRockIt_","bind","attachClickEvent_","_this3","registerAnchorMutator","isLayoutSupported","layout","AMP","BaseElement","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","node_modules/@babel/runtime/helpers/esm/typeof.js","node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","src/core/types/array.js","src/core/types/object/index.js","src/core/dom/css-selectors.js","src/utils/log.js","src/service-helpers.js","src/core/window/index.js","src/service/index.js","src/service/navigation.js","src/url.js","extensions/amp-link-rewriter/0.1/config-options.js","src/core/dom/index.js","src/core/dom/query.js","src/core/types/object/json.js","extensions/amp-link-rewriter/0.1/scope.js","extensions/amp-link-rewriter/0.1/link-rewriter.js","extensions/amp-link-rewriter/0.1/amp-link-rewriter.js","node_modules/@babel/runtime/helpers/esm/inherits.js","node_modules/@babel/runtime/helpers/esm/createSuper.js","node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","src/core/dom/layout/index.js"]}

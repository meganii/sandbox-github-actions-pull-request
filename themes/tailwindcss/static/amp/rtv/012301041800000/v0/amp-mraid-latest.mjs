;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-mraid",ev:"0.1",l:!0,f:function(t,i){(()=>{var{hasOwnProperty:i,toString:n}=Object.prototype,r=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function e(t,i=""){try{return decodeURIComponent(t)}catch(t){return i}}function s(t){const{location:i}=t||self;return function(t){const i=Object.create(null);if(!t)return i;let n;for(;n=r.exec(t);){const t=e(n[1],n[1]),r=n[2]?e(n[2].replace(/\+/g," "),n[2]):"";i[t]=r}return i}(i.originalHash||i.hash)}var o="";function c(t){var i;return o||(o=(null===(i=t.AMP_CONFIG)||void 0===i?void 0:i.v)||"012301041800000"),o}function l(t,i){const n=i||s(t);return["1","actions","amp","amp4ads","amp4email"].includes(n.development)||!!t.AMP_DEV_MODE}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var u=self.__AMP_LOG;function a(){return u.dev||(u.dev=function(t,i){throw new Error("failed to call initLogConstructor")}())}function h(t,i,n,r,e,s,o,c,l,u,a){return t}function f(t,i,n,r){const e=d(t),s=p(e);!function(t,i,n,r,e,s){const o=y(t);let c=o[n];c||(c=o[n]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),c.ctor||(c.ctor=r,c.context=i,c.sharedInstance=!1,c.resolve&&b(t,n))}(s,e,i,n),r&&b(s,i)}function v(t,i,n){!function(t,i,n){const r=y(t),e=r[i];e?e.reject&&e.reject(n):(r[i]=F(),r[i].reject(n))}(p(d(t)),i,n)}function m(t,i){return function(t,i){const n=function(t,i){const n=y(t)[i];return n?n.promise?n.promise:(b(t,i),n.promise=Promise.resolve(n.obj)):null}(t,i);if(n)return n;const r=y(t);return r[i]=F(),r[i].promise}(p(t),i)}function d(t){return t.nodeType?(n=t,i=(n.ownerDocument||n).defaultView,function(t,i){return b(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),"ampdoc")}(i)).getAmpDoc(t):t;var i,n}function p(t){const i=d(t);return i.isSingleDoc()?i.win:i}function b(t,i){h(function(t,i){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!n||!n.ctor)}(t,i));const n=y(t)[i];return n.obj||(h(n.ctor),h(n.context),n.obj=new n.ctor(n.context),h(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function y(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}function F(){const t=new class{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}},{promise:i,reject:n,resolve:r}=t;return i.catch((()=>{})),{obj:null,promise:i,resolve:r,reject:n,context:null,ctor:null}}var P="host-visibility",j="host-fullscreen",x="host-exit",g=class{static isAvailable(t){return!!(i=t,d(i)).getHeadNode().querySelector("script[host-service]");var i}static visibilityForDoc(t){return m(t,P)}static installVisibilityServiceForDoc(t,i){f(t,P,i,!0)}static rejectVisibilityServiceForDoc(t,i){v(t,P,i)}static fullscreenForDoc(t){return m(t,j)}static installFullscreenServiceForDoc(t,i){f(t,j,i,!0)}static rejectFullscreenServiceForDoc(t,i){v(t,j,i)}static exitForDoc(t){return m(t,x)}static installExitServiceForDoc(t,i){f(t,x,i,!0)}static rejectExitServiceForDoc(t,i){v(t,x,i)}},w=(()=>self.AMP.config.urls)(),D="amp-mraid";t.registerServiceForDoc(D,class{constructor(t){this.ji=t,this.Fut=!1,this.jut=null,this.Dut=!0;const i=this.ji.getHeadNode().querySelectorAll('script[host-service="amp-mraid"]');if(i.length>1)return void a().error(D,"Multiple amp-mraid scripts.");if(i.length<1)return void a().error(D,"Missing amp-mraid scripts.");if(null!=i[0].getAttribute("no-fallback")&&(this.Dut=!1),"inabox"!==function(t){const i=self;return i.__AMP_MODE?i.__AMP_MODE:i.__AMP_MODE=function(t){return{localDev:!1,development:l(t,s(t)),esm:!0,test:!1,rtvVersion:c(t),ssrReady:!1}}(i)}().runtime)return void this.Sut();const n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",`${w.cdn}/mraid.js`),n.addEventListener("load",(()=>{this.kut()})),n.addEventListener("error",(()=>{this.Fut||this.Sut()})),document.getElementsByTagName("head").item(0).appendChild(n)}Eut(){const t=new class{constructor(t){this.jut=t,this.Vut=!1}onVisibilityChange(t){this.jut.addEventListener("exposureChange",((i,n,r)=>{var e,s,o,c;t({visibleRect:(e=n&&n.x?n.x:0,s=n&&n.y?n.y:0,o=n&&n.width?n.width:0,c=n&&n.height?n.height:0,{left:e,top:s,width:o,height:c,bottom:s+c,right:e+o,x:e,y:s}),visibleRatio:i/100})}))}enterFullscreenOverlay(t){return this.Vut?Promise.resolve(!1):(this.jut.expand(),this.Vut=!0,Promise.resolve(!0))}exitFullscreenOverlay(t){return this.Vut?(this.jut.close(),this.Vut=!1,Promise.resolve(!0)):Promise.resolve(!1)}openUrl(t){return this.jut.open(t),Promise.resolve(!0)}}(this.jut);this.jut.addEventListener?g.installVisibilityServiceForDoc(this.ji,(()=>t)):g.rejectVisibilityServiceForDoc(this.ji,{fallback:!1}),this.jut.expand&&this.jut.close?g.installFullscreenServiceForDoc(this.ji,(()=>t)):g.rejectFullscreenServiceForDoc(this.ji,{fallback:!1}),this.jut.open?g.installExitServiceForDoc(this.ji,(()=>t)):g.rejectExitServiceForDoc(this.ji,{fallback:!0}),this.Fut=!0}kut(){const t=window.mraid;t&&t.getState?(this.jut=t,"loading"===t.getState()?t.addEventListener("ready",(()=>{this.Eut()})):this.Eut()):this.Sut()}Sut(){g.rejectVisibilityServiceForDoc(this.ji,{fallback:this.Dut}),g.rejectExitServiceForDoc(this.ji,{fallback:!0}),g.rejectFullscreenServiceForDoc(this.ji,{fallback:this.Dut})}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-mraid-0.1.mjs.map
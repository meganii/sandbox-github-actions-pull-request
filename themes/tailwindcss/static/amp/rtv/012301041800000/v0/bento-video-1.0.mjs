;
import{PreactBaseElement as t}from"../bento.mjs";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var{hasOwnProperty:i,toString:l}=Object.prototype;function s(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(null!=e&&e.writable)return t;const{message:n,stack:o}=t,r=new Error(n);for(const e in t)r[e]=t[e];return r.stack=o,r}function c(t){let e=null,n="";for(const t of arguments)t instanceof Error&&!e?e=s(t):(n&&(n+=" "),n+=t);return e?n&&(e.message=n+": "+e.message):e=new Error(n),e}function u(t){const e=c.apply(null,arguments);return e.expected=!0,e}function f(t,...e){var n,o,r;n=u.apply(null,e),null===(o=(r=self).__AMP_REPORT_ERROR)||void 0===o||o.call(r,n)}import{Fragment as p,createElement as m}from"../bento.mjs";import{useCallback as d,useEffect as b,useImperativeHandle as y,useLayoutEffect as v,useMemo as g,useRef as h,useState as j}from"../bento.mjs";import{forwardRef as w}from"../bento.mjs";import{ContainWrapper as k,useValueRef as O}from"../bento.mjs";import{useAmpContext as q,useLoading as x}from"../bento.mjs";import{useCallback as S,useLayoutEffect as P}from"../bento.mjs";import{useAmpContext as E}from"../bento.mjs";self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var C={"title":"","artist":"","album":"","artwork":[{"src":""}]};function R(t){const e=t.querySelector('script[type="application/ld+json"]');if(!e)return;const n=function(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null}}(e.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}function I(t){const e=t.querySelector('meta[property="og:image"]');return e?e.getAttribute("content"):void 0}function N(t){const e=t.querySelector('link[rel="shortcut icon"]')||t.querySelector('link[rel="icon"]');return e?e.getAttribute("href"):void 0}function z({displayIcon:t,displayOverlay:e,metadata:n,onOverlayClick:o,pause:r,play:a,playing:i,wrapperRef:l}){const{playable:s}=q();return b((()=>{if(!s)return void r();const t=new IntersectionObserver((t=>{t[t.length-1].isIntersecting?a().catch((()=>{})):r()}),{threshold:.5});return t.observe(l.current),()=>{t.disconnect()}}),[l,a,r,s]),m(p,null,t&&m("div",{class:"eq-9e7199f"+(i?" eq-playing-9e7199f":"")},m(F,null)),e&&m("button",{"aria-label":n&&n.title||"Unmute video",tabindex:"0",class:"autoplay-mask-button-9e7199f fill-content-overlay-fc551a7",onClick:o}))}var F=function(t){let e=!1,n=null,o=()=>[1,2,3,4].map((t=>m("div",{class:"eq-col-9e7199f",key:t})));return(...t)=>(e||(n=o.apply(self,t),e=!0,o=null),n)}(),L=w((function(t,e){let o="class",{autoplay:r=!1,component:i="video",controls:l=!1,loading:s,loop:c=!1,mediasession:u=!0,noaudio:p=!1,onPlayingState:w,onReadyState:S,poster:F,sources:L,src:T,style:Y,[o]:A}=t,J=function(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,["autoplay","component","controls","loading","loop","mediasession","noaudio","onPlayingState","onReadyState","poster","sources","src","style",o].map(n));!function(){const{notify:t}=E();P((()=>{t&&t()}))}();const{playable:M}=q(),U=x(s),V="unload"!==U,[W,B]=j(r),[D,G]=j(!1),[H,K]=j(null),[Q,X]=j(!r),Z=h(null),$=h(null),_=g((()=>new class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}),[]),tt=h("loading"),et=O(S),nt=d(((t,e)=>{if(t!==tt.current){tt.current=t;const n=et.current;n&&n(t,e)}}),[et]),ot=O(w),rt=d((t=>{G(t);const e=ot.current;e&&e(t)}),[ot]);v((()=>{V||rt(!1)}),[V,rt]);const at=d((()=>_.promise.then((()=>function(t,e){const n=(o=()=>t.play(!1),new Promise((t=>{t(o())})));var o;return n.catch((t=>{f(0,t)})),n}($.current)))),[_]),it=d((()=>{_.promise.then((()=>{var t;return null===(t=$.current)||void 0===t?void 0:t.pause()}))}),[_]),lt=d((()=>_.promise.then((()=>$.current.requestFullscreen()))),[_]),st=d((()=>{B(!1),X(!0)}),[]);return v((()=>{var t;const e=null===(t=$.current)||void 0===t?void 0:t.readyState;null!=e&&nt(e>0?"complete":"loading")}),[nt]),v((()=>(u&&D&&H&&function(t,e,n,o){const{navigator:r}=t;"mediaSession"in r&&t.MediaMetadata&&(r.mediaSession.metadata=new t.MediaMetadata(C),r.mediaSession.metadata=new t.MediaMetadata(e),r.mediaSession.setActionHandler("play",n),r.mediaSession.setActionHandler("pause",o))}(window,H,at,it),()=>{})),[u,D,H,at,it]),b((()=>{M||it()}),[M,it]),y(e,(()=>({get readyState(){return tt.current},play:at,pause:it,requestFullscreen:lt,get currentTime(){return $.current?$.current.currentTime:0},get duration(){return $.current?$.current.duration:NaN},get autoplay(){return r},get controls(){return l},get loop(){return c},userInteracted:st,mute:()=>B(!0),unmute:()=>{Q&&B(!1)}})),[at,it,lt,st,Q,r,l,c]),m(k,{contentRef:Z,class:A,style:Y,size:!0,layout:!0,paint:!0},V&&m(i,a(a({},J),{},{ref:$,loading:U,muted:W,loop:c,controls:l&&(!r||Q),onCanPlay:()=>{_.resolve(),nt("complete")},onLoadedMetadata:()=>{u&&_.promise.then((()=>{var t,e;K((t=$.current,a({"title":(e=J).title||e["aria-label"]||document.title,"artist":e.artist||"","album":e.album||"","artwork":[{"src":e.artwork||e.poster||R(document)||I(document)||N(document)||""}]},t&&t.getMetadata?t.getMetadata():Object.create(null))))})),nt("complete")},onPlaying:()=>rt(!0),onPause:()=>rt(!1),onEnded:()=>rt(!1),onError:t=>{nt("error",t),_.reject(t)},class:"fill-stretch-fc551a7",src:T,poster:F}),L),r&&!Q&&m(z,{metadata:H,playing:D,displayIcon:!p&&W,wrapperRef:Z,play:at,pause:it,displayOverlay:l,onOverlayClick:st}))}));L.displayName="VideoWrapper";var T=class extends t{};T.Component=L,T.loadable=!0,T.layoutSizeDefined=!0,T.staticProps,T.props={"album":{attr:"album"},"alt":{attr:"alt"},"artist":{attr:"artist"},"artwork":{attr:"artwork"},"attribution":{attr:"attribution"},"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"controlslist":{attr:"controlslist"},"crossorigin":{attr:"crossorigin"},"disableremoteplayback":{attr:"disableremoteplayback"},"loop":{attr:"loop",type:"boolean"},"noaudio":{attr:"noaudio",type:"boolean"},"poster":{attr:"poster"},"sources":{selector:"source",single:!1,clone:!0},"src":{attr:"src"},"title":{attr:"title"},"dock":{attr:"dock",media:!0},"rotate-to-fullscreen":{attr:"rotate-to-fullscreen",type:"boolean",media:!0}},T.shadowCss='.fill-stretch-fc551a7{width:100%;height:100%;position:relative}.fill-content-overlay-fc551a7{top:0;left:0;right:0;bottom:0;position:absolute}.autoplay-mask-button-9e7199f{width:100%;border:none;display:block;-webkit-appearance:none;appearance:none;background:transparent}.eq-9e7199f{right:7px;width:20px;bottom:7px;height:12px;display:-ms-flexbox;display:flex;opacity:0.8;z-index:1;overflow:hidden;position:absolute;-ms-flex-align:end;align-items:flex-end;pointer-events:none!important}.eq-playing-9e7199f>div:after,.eq-playing-9e7199f>div:before{animation-play-state:running}.eq-col-9e7199f{-ms-flex:1;flex:1;height:100%;position:relative;margin-right:1px}.eq-col-9e7199f:after,.eq-col-9e7199f:before{width:100%;height:100%;content:"";position:absolute;animation:keyframes-eq-animation-9e7199f 0s linear infinite alternate;will-change:transform;background-color:#fafafa;animation-play-state:paused}.eq-col-9e7199f:nth-child(4):before{animation-duration:0.4s}.eq-col-9e7199f:nth-child(4):after{animation-duration:0.25s}.eq-col-9e7199f:nth-child(3):before{animation-duration:0.3s}.eq-col-9e7199f:nth-child(3):after{animation-duration:0.35s}.eq-col-9e7199f:nth-child(2):before{animation-duration:0.5s}.eq-col-9e7199f:nth-child(2):after{animation-duration:0.4s}.eq-col-9e7199f:first-child:before{animation-duration:0.3s}.eq-col-9e7199f:first-child:after{animation-duration:0.45s}@keyframes keyframes-eq-animation-9e7199f{0%{transform:translateY(100%)}to{transform:translateY(0)}}',T.usesShadowDom=!0;import{defineBentoElement as Y}from"../bento.mjs";Y("bento-video",T,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-video-1.0.mjs.map
{"version":3,"file":"amp-app-banner-0.1.mjs","mappings":"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","names":["resolved","Promise","resolve","undefined","hasOwnProperty","hasOwn_","toString","toString_","Object","prototype","error","messageProperty","getOwnPropertyDescriptor","writable","message","stack","e","Error","prop","var_args","arg","arguments","duplicateErrorIfNecessary","__AMP_REPORT_ERROR","self","__AMP_LOG","user","dev","userForEmbed","logs","levelFunc","opt_suffix","opt_element","getUserLogger","win","ownerDocument","defaultView","isFromEmbed","suffix","callLogConstructor","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","assert","id","getServiceInternal","__AMP_TOP","getTopWindow","elementOrAmpDoc","getAmpdocServiceHolder","getAmpdoc","nodeOrDoc","nodeType","node","getService","getAmpDoc","ampdoc","isSingleDoc","holder","devAssert","isServiceRegistered","s","getServices","obj","ctor","context","services","__AMP_SERVICES","service","Services","window","cached","promise","getServicePromiseOrNullInternal","deferred","constructor","this","res","rej","reject","catch","emptyServiceHolderWithPromise","getServicePromiseInternal","getServicePromiseForDoc","element","getServiceForDocOrNull","getServiceForDoc","url","target","opt_features","open","string","start","length","indexOf","TAG","OPEN_LINK_TIMEOUT","AbstractAppBanner","AMP","BaseElement","super","openButton_","canShowBuiltinBanner_","openButtonClicked","unusedOpenInAppUrl","unusedInstallAppUrl","setupOpenButton_","button","openInAppUrl","installAppUrl","addEventListener","addDismissButton_","paddingBar","document","createElement","appendChild","dismissButton","classList","add","setAttribute","getAttribute","boundOnDismissButtonClick","onDismissButtonClick_","bind","getVsync","run","measure","mutate","handleDismiss","viewport","getViewport","storagePromise","storageKey","getStorageKey_","userAssert","isDismissed","then","storage","get","persistedValue","reason","checkIfDismissed_","hide_","updateViewportPadding_","expand","runPromise","hideBanner","measureBanner","updateViewportPadding","AmpIosAppBanner","viewer_","metaContent_","preconnectCallback","opt_onLayout","parentNode","buildCallback","platform","isEmbedded","isSafari","hasCapability","getMetaByName","querySelector","parseIosMetaContent_","layoutCallback","resolvedPromise","delay","sendMessage","openWindowDialog","metaContent","config","parseKeyValues","appId","openUrl","isProtocolValid","replace","split","reduce","result","keyValue","key","value","AmpAndroidAppBanner","manifestLink_","manifestHref_","missingDataSources_","preload","viewer","head","isChromeAndroid","isAndroid","isChrome","isProxyOrigin","location","assertHttpsUrl","fetchJson","json","parseManifest_","createError","apply","setTimeout","maybeReportError","rethrowAsync","redirectTopLocation_","link","top","assign","manifestJson","apps","playApp","find","a","getAndroidIntentForUrl_","canonicalUrl","parsedUrl","parse","cleanProtocol","protocol","host","pathname","state","set","_element$parentElemen","removeFromFixedLayer","parentElement","removeChild","updatePaddingBottom","bannerHeight","getLayoutRect","height","addToFixedLayer","registerElement","upgradeCallback","isIos"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["src/core/data-structures/promise.js","src/core/types/object/index.js","src/core/error/index.js","src/utils/log.js","src/service-helpers.js","src/core/window/index.js","src/service/index.js","src/open-window-dialog.js","src/core/types/string/index.js","extensions/amp-app-banner/0.1/amp-app-banner.js","src/core/dom/index.js","build/amp-app-banner-0.1.css.js"]}

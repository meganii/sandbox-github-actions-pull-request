;
import{PreactBaseElement as e}from"../bento.mjs";function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}var o,{hasOwnProperty:i,toString:c}=Object.prototype,l=["Webkit","webkit","Moz","moz","ms","O","o"];function s(e,n,t,r,i){const c=function(e,n,t){if(n.startsWith("--"))return n;o||(o=Object.create(null));let r=o[n];if(!r||t){if(r=n,void 0===e[n]){const t=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(n),o=function(e,n){for(let t=0;t<l.length;t++){const r=l[t]+n;if(void 0!==e[r])return r}return""}(e,t);void 0!==e[o]&&(r=o)}t||(o[n]=r)}return r}(e.style,n,i);if(!c)return;const s=r?t+r:t;e.style.setProperty(function(e){const n=e.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()));return l.some((e=>n.startsWith(e+"-")))?`-${n}`:n}(c),s)}function u(e){return(e.ownerDocument||e).defaultView}import{createElement as a}from"../bento.mjs";import{useCallback as f,useEffect as d,useMemo as m,useRef as b}from"../bento.mjs";import{ContainWrapper as v}from"../bento.mjs";function j(e,n,t={}){const{needsRootBounds:r,rootMargin:o,threshold:i}=t,c=function(e){return e.parent&&e.parent!=e}(n)&&(r||o)?n.document:void 0;return new n.IntersectionObserver(e,{threshold:i,root:c,rootMargin:o})}var w=new WeakMap,g=new WeakMap;function p(e){const n=new Set;for(let t=e.length-1;t>=0;t--){const r=e[t],{target:o}=r;if(n.has(o))continue;n.add(o);const i=g.get(o);if(i)for(let e=0;e<i.length;e++)(0,i[e])(r)}}import{useCallback as O,useEffect as y,useRef as h,useState as R}from"../bento.mjs";import{useCallback as x,useLayoutEffect as P}from"../bento.mjs";import{useAmpContext as S}from"../bento.mjs";self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG,new Set(["c","v","a","ad"]);var q=[0,.05,.1,.15,.2,.25,.3,.35,.4,.45,.5,.55,.6,.65,.7,.75,.8,.85,.9,.95,1];function z(e){return{"time":e.time,"rootBounds":e.rootBounds,"boundingClientRect":e.boundingClientRect,"intersectionRect":e.intersectionRect,"intersectionRatio":e.intersectionRatio}}Date.now();var k=["allowFullScreen","allowPaymentRequest","iframeStyle","onLoad","referrerPolicy","requestResize","sandbox","src","srcdoc"],F=()=>{},M=class extends e{};M.Component=function(e){let{allowFullScreen:n,allowPaymentRequest:t,iframeStyle:o,onLoad:i=F,referrerPolicy:c,requestResize:l,sandbox:y,src:R,srcdoc:P}=e,S=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,k);const M=b(),B=b(null),C=b(null),L=b(null),W=b(null),A=b(null),E=e=>{const n=M.current,t=A.current;n&&t&&function(e,n,t,r,o){!function(e,n,t,r,o){if(!e.contentWindow)return;r.type="intersection",r.sentinel="amp";let i=r;for(let e=0;e<n.length;e++){const t=n[e];t.win.postMessage(i,t.origin)}}(e,[{win:e.contentWindow,origin:r}],0,t)}(n,0,{"changes":e.map(z)},t)},I=f((e=>{var n;const t=M.current;if(!t)return;if(e.source!==t.contentWindow||"send-intersections"!==(null===(n=e.data)||void 0===n?void 0:n.type))return;A.current=e.origin;const r=u(t);W.current=new r.IntersectionObserver(E,{threshold:q}),W.current.observe(t)}),[]);d((()=>{const e=M.current;if(!e)return;const n=u(e);n.addEventListener("message",I);let t=W.current;return()=>{var r;null===(r=t)||void 0===r||r.unobserve(e),t=null,n.removeEventListener("message",I)}}),[I]);const N=f((()=>{var e,n;let t=Number(null===(e=B.current)||void 0===e?void 0:e.height),r=Number(null===(n=B.current)||void 0===n?void 0:n.width);if(B.current=null,!t&&!r)return void console.error("Ignoring resize request because width and height value is invalid");const o=M.current;t||(t=o.offsetHeight),r||(r=o.offsetWidth),l?l(t,r):!1===C.current&&((e,n)=>{const t=L.current;t&&(s(t,"width",n,"px"),s(t,"height",e,"px"))})(t,r)}),[l]),D=f((e=>{var n;"embed-size"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(B.current=e.data,!1===C.current&&N())}),[N]);d((()=>{const e=M.current;if(!e)return;const n=u(e);return n?(n.addEventListener("message",D),()=>{n.removeEventListener("message",D)}):void 0}),[D]);const Z=function(e,n){const t=h(null);return O((r=>{const o=t.current;o&&(o(),t.current=null),r&&(t.current=function(e,n,t){const r=u(e);let o=w.get(r);o||w.set(r,o=j(p,r));let i=g.get(e);return i||(i=[],g.set(e,i)),i.push(n),o.observe(e),()=>{!function(e,n){const t=g.get(e);if(!t)return;if(!function(e,n){const t=e.indexOf(n);return-1!=t&&(e.splice(t,1),!0)}(t,n))return;if(t.length)return;const r=u(e),o=w.get(r);null==o||o.unobserve(e),g.delete(e)}(e,n)}}(r,e,n))}),[e,n])}(f((({isIntersecting:e})=>{e!==C.current&&(C.current=e,!e&&B.current&&N())}),[N])),$=m((()=>({src:R,srcdoc:P,sandbox:y,allowFullScreen:n,allowPaymentRequest:t,referrerPolicy:c,onLoad:i,frameBorder:"0"})),[R,P,y,n,t,c,i]);return a(v,r({contentAs:"iframe",contentProps:$,contentRef:(G=[M,Z],x((e=>{for(let r=0;r<G.length;r++)t=e,"function"==typeof(n=G[r])?n(t):n&&(n.current=t);var n,t}),G)),contentStyle:r({"box-sizing":"border-box"},o),ref:L,size:!0,layout:!0,paint:!0},S));var G},M.props={"src":{attr:"src"},"srcdoc":{attr:"srcdoc"},"sandbox":{attr:"sandbox"},"allowFullScreen":{attr:"allowfullscreen"},"allowPaymentRequest":{attr:"allowpaymentrequest"},"referrerPolicy":{attr:"referrerpolicy"}},M.layoutSizeDefined=!0,M.usesShadowDom=!0;import{defineBentoElement as B}from"../bento.mjs";B("bento-iframe",M,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-iframe-1.0.mjs.map
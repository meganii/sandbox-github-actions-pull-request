;
import{PreactBaseElement as t}from"../bento.mjs";function e(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,"string");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===n(e)?e:String(e)}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}};function s(t){return new Promise((e=>{e(t())}))}var u,{isArray:c}=Array,{hasOwnProperty:f,toString:d}=Object.prototype;function m(t){const e=Object.create(null);return t&&Object.assign(e,t),e}function p(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(null!=e&&e.writable)return t;const{message:n,stack:o}=t,r=new Error(n);for(const e in t)r[e]=t[e];return r.stack=o,r}function b(t){let e=null,n="";for(const t of arguments)t instanceof Error&&!e?e=p(t):(n&&(n+=" "),n+=t);return e?n&&(e.message=n+": "+e.message):e=new Error(n),e}function y(t){const e=b.apply(null,arguments);return e.expected=!0,e}function g(t,...e){var n,o,r;n=y.apply(null,e),null===(o=(r=self).__AMP_REPORT_ERROR)||void 0===o||o.call(r,n)}var v=["Webkit","webkit","Moz","moz","ms","O","o"];function h(t,e,n,o,r){const a=function(t,e,n){if(e.startsWith("--"))return e;u||(u=m());let o=u[e];if(!o||n){if(o=e,void 0===t[e]){const n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(e),r=function(t,e){for(let n=0;n<v.length;n++){const o=v[n]+e;if(void 0!==t[o])return o}return""}(t,n);void 0!==t[r]&&(o=r)}n||(u[e]=o)}return o}(t.style,e,r);if(!a)return;const i=o?n+o:n;t.style.setProperty(function(t){const e=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return v.some((t=>e.startsWith(t+"-")))?`-${e}`:e}(a),i)}function w(t){return null==t.__AMP_AUTOPLAY&&(t.__AMP_AUTOPLAY=function(t){const e=t.document.createElement("video");var n;return e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("height","0"),e.setAttribute("width","0"),e.muted=!0,e.playsInline=!0,e.playsinline=!0,e.webkitPlaysinline=!0,function(t,e){for(const n in e)h(t,n,e[n])}(e,{position:"fixed",top:"0",width:"0",height:"0",opacity:"0"}),n=e,s((()=>n.play())).catch((()=>{})),Promise.resolve(!e.paused)}(t)),t.__AMP_AUTOPLAY}import{Fragment as j,createElement as k}from"../bento.mjs";import{useCallback as O,useEffect as x,useImperativeHandle as q,useLayoutEffect as S,useMemo as C,useRef as I,useState as P}from"../bento.mjs";import{forwardRef as E}from"../bento.mjs";import{ContainWrapper as M,useValueRef as R}from"../bento.mjs";import{useAmpContext as L,useLoading as N}from"../bento.mjs";import{useCallback as $,useLayoutEffect as F}from"../bento.mjs";import{useAmpContext as T}from"../bento.mjs";var U={bubbles:!0,cancelable:!0};function z(t,e,n,o){const r=n||{};t.ownerDocument;const a=t.ownerDocument.createEvent("Event");a.data=r;const{bubbles:i,cancelable:l}=o||U;a.initEvent(e,i,l),t.dispatchEvent(a)}var A=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function H(t,e=""){try{return decodeURIComponent(t)}catch(t){return e}}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var V={"title":"","artist":"","album":"","artwork":[{"src":""}]};function J(t){const e=t.querySelector('script[type="application/ld+json"]');if(!e)return;const n=function(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null}}(e.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}function W(t){const e=t.querySelector('meta[property="og:image"]');return e?e.getAttribute("content"):void 0}function Y(t){const e=t.querySelector('link[rel="shortcut icon"]')||t.querySelector('link[rel="icon"]');return e?e.getAttribute("href"):void 0}function B({displayIcon:t,displayOverlay:e,metadata:n,onOverlayClick:o,pause:r,play:a,playing:i,wrapperRef:l}){const{playable:s}=L();return x((()=>{if(!s)return void r();const t=new IntersectionObserver((t=>{t[t.length-1].isIntersecting?a().catch((()=>{})):r()}),{threshold:.5});return t.observe(l.current),()=>{t.disconnect()}}),[l,a,r,s]),k(j,null,t&&k("div",{class:"eq-9e7199f"+(i?" eq-playing-9e7199f":"")},k(D,null)),e&&k("button",{"aria-label":n&&n.title||"Unmute video",tabindex:"0",class:"autoplay-mask-button-9e7199f fill-content-overlay-fc551a7",onClick:o}))}var D=function(t){let e=!1,n=null,o=()=>[1,2,3,4].map((t=>k("div",{class:"eq-col-9e7199f",key:t})));return(...t)=>(e||(n=o.apply(self,t),e=!0,o=null),n)}(),Z=E((function(t,n){let r="class",{autoplay:a=!1,component:u="video",controls:c=!1,loading:f,loop:d=!1,mediasession:m=!0,noaudio:p=!1,onPlayingState:b,onReadyState:y,poster:v,sources:h,src:w,style:j,[r]:E}=t,$=e(t,["autoplay","component","controls","loading","loop","mediasession","noaudio","onPlayingState","onReadyState","poster","sources","src","style",r].map(o));!function(){const{notify:t}=T();F((()=>{t&&t()}))}();const{playable:U}=L(),z=N(f),A="unload"!==z,[H,D]=P(a),[Z,G]=P(!1),[K,Q]=P(null),[X,_]=P(!a),tt=I(null),et=I(null),nt=C((()=>new l),[]),ot=I("loading"),rt=R(y),at=O(((t,e)=>{if(t!==ot.current){ot.current=t;const n=rt.current;n&&n(t,e)}}),[rt]),it=R(b),lt=O((t=>{G(t);const e=it.current;e&&e(t)}),[it]);S((()=>{A||lt(!1)}),[A,lt]);const st=O((()=>nt.promise.then((()=>function(t,e){const n=s((()=>t.play(!1)));return n.catch((t=>{g(0,t)})),n}(et.current)))),[nt]),ut=O((()=>{nt.promise.then((()=>{var t;return null===(t=et.current)||void 0===t?void 0:t.pause()}))}),[nt]),ct=O((()=>nt.promise.then((()=>et.current.requestFullscreen()))),[nt]),ft=O((()=>{D(!1),_(!0)}),[]);return S((()=>{var t;const e=null===(t=et.current)||void 0===t?void 0:t.readyState;null!=e&&at(e>0?"complete":"loading")}),[at]),S((()=>(m&&Z&&K&&function(t,e,n,o){const{navigator:r}=t;"mediaSession"in r&&t.MediaMetadata&&(r.mediaSession.metadata=new t.MediaMetadata(V),r.mediaSession.metadata=new t.MediaMetadata(e),r.mediaSession.setActionHandler("play",n),r.mediaSession.setActionHandler("pause",o))}(window,K,st,ut),()=>{})),[m,Z,K,st,ut]),x((()=>{U||ut()}),[U,ut]),q(n,(()=>({get readyState(){return ot.current},play:st,pause:ut,requestFullscreen:ct,get currentTime(){return et.current?et.current.currentTime:0},get duration(){return et.current?et.current.duration:NaN},get autoplay(){return a},get controls(){return c},get loop(){return d},userInteracted:ft,mute:()=>D(!0),unmute:()=>{X&&D(!1)}})),[st,ut,ct,ft,X,a,c,d]),k(M,{contentRef:tt,class:E,style:j,size:!0,layout:!0,paint:!0},A&&k(u,i(i({},$),{},{ref:et,loading:z,muted:H,loop:d,controls:c&&(!a||X),onCanPlay:()=>{nt.resolve(),at("complete")},onLoadedMetadata:()=>{m&&nt.promise.then((()=>{var t,e;Q((t=et.current,i({"title":(e=$).title||e["aria-label"]||document.title,"artist":e.artist||"","album":e.album||"","artwork":[{"src":e.artwork||e.poster||J(document)||W(document)||Y(document)||""}]},t&&t.getMetadata?t.getMetadata():Object.create(null))))})),at("complete")},onPlaying:()=>lt(!0),onPause:()=>lt(!1),onEnded:()=>lt(!1),onError:t=>{at("error",t),nt.reject(t)},class:"fill-stretch-fc551a7",src:w,poster:v}),h),a&&!X&&k(B,{metadata:K,playing:Z,displayIcon:!p&&H,wrapperRef:tt,play:st,pause:ut,displayOverlay:c,onOverlayClick:ft}))}));Z.displayName="VideoWrapper";var G=class extends t{};function K(t,e){return JSON.stringify({"command":t,"parameters":e})}G.Component=Z,G.loadable=!0,G.layoutSizeDefined=!0,G.staticProps,G.props={"album":{attr:"album"},"alt":{attr:"alt"},"artist":{attr:"artist"},"artwork":{attr:"artwork"},"attribution":{attr:"attribution"},"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"controlslist":{attr:"controlslist"},"crossorigin":{attr:"crossorigin"},"disableremoteplayback":{attr:"disableremoteplayback"},"loop":{attr:"loop",type:"boolean"},"noaudio":{attr:"noaudio",type:"boolean"},"poster":{attr:"poster"},"sources":{selector:"source",single:!1,clone:!0},"src":{attr:"src"},"title":{attr:"title"},"dock":{attr:"dock",media:!0},"rotate-to-fullscreen":{attr:"rotate-to-fullscreen",type:"boolean",media:!0}},G.shadowCss='.fill-stretch-fc551a7{width:100%;height:100%;position:relative}.fill-content-overlay-fc551a7{top:0;left:0;right:0;bottom:0;position:absolute}.autoplay-mask-button-9e7199f{width:100%;border:none;display:block;-webkit-appearance:none;appearance:none;background:transparent}.eq-9e7199f{right:7px;width:20px;bottom:7px;height:12px;display:-ms-flexbox;display:flex;opacity:0.8;z-index:1;overflow:hidden;position:absolute;-ms-flex-align:end;align-items:flex-end;pointer-events:none!important}.eq-playing-9e7199f>div:after,.eq-playing-9e7199f>div:before{animation-play-state:running}.eq-col-9e7199f{-ms-flex:1;flex:1;height:100%;position:relative;margin-right:1px}.eq-col-9e7199f:after,.eq-col-9e7199f:before{width:100%;height:100%;content:"";position:absolute;animation:keyframes-eq-animation-9e7199f 0s linear infinite alternate;will-change:transform;background-color:#fafafa;animation-play-state:paused}.eq-col-9e7199f:nth-child(4):before{animation-duration:0.4s}.eq-col-9e7199f:nth-child(4):after{animation-duration:0.25s}.eq-col-9e7199f:nth-child(3):before{animation-duration:0.3s}.eq-col-9e7199f:nth-child(3):after{animation-duration:0.35s}.eq-col-9e7199f:nth-child(2):before{animation-duration:0.5s}.eq-col-9e7199f:nth-child(2):after{animation-duration:0.4s}.eq-col-9e7199f:first-child:before{animation-duration:0.3s}.eq-col-9e7199f:first-child:after{animation-duration:0.45s}@keyframes keyframes-eq-animation-9e7199f{0%{transform:translateY(100%)}to{transform:translateY(0)}}',G.usesShadowDom=!0,new Set(["c","v","a","ad"]);import{createElement as Q}from"../bento.mjs";import{useCallback as X,useImperativeHandle as _,useLayoutEffect as tt,useMemo as et,useRef as nt}from"../bento.mjs";import{forwardRef as ot}from"../bento.mjs";var rt=["loading","unloadOnPause","sandbox","muted","controls","origin","onCanPlay","onMessage","playerStateRef","makeMethodMessage","makeFullscreenMessage","onIframeLoad"],at=["allow-scripts","allow-same-origin","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].join(" ");function it(t,e,n){t&&t.contentWindow&&e.then((()=>{t.contentWindow.postMessage(n(),"*")}))}var lt=ot((function(t,n){let{loading:o,unloadOnPause:r=!1,sandbox:a=at,muted:s=!1,controls:u=!1,origin:c,onCanPlay:f,onMessage:d,playerStateRef:m,makeMethodMessage:p,makeFullscreenMessage:b,onIframeLoad:y}=t,g=e(t,rt);const v=nt(null),h=et((()=>new l),[]),w=nt(p),j=X((t=>{it(null==v?void 0:v.current,h.promise,(()=>w.current(t)))}),[h.promise]),k=nt(b),O=X((()=>it(null==v?void 0:v.current,h.promise,k.current)),[h.promise]);_(n,(()=>({get currentTime(){var t,e;return null!==(t=null==m||null===(e=m.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:NaN},get duration(){var t,e;return null!==(t=null==m||null===(e=m.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:NaN},requestFullscreen:()=>{if(!k.current)return h.promise.then((()=>{v.current.requestFullscreen()}));O()},play:()=>j("play"),pause:()=>{if(r){const t=v.current;t&&(t.src=t.src)}else j("pause")}})),[m,j,O,h.promise,r]);const x=function(t){const e=nt(null);return e.current=t,e}(d);return tt((()=>{if(!v.current)return;function t(t){x.current&&(c&&!c.test(t.origin)||t.source!=v.current.contentWindow||x.current({currentTarget:v.current,target:v.current,data:t.data}))}const{defaultView:e}=v.current.ownerDocument;return e.addEventListener("message",t),()=>e.removeEventListener("message",t)}),[c,x]),tt((()=>{j(s?"mute":"unmute")}),[s,j]),tt((()=>{j(u?"showControls":"hideControls")}),[u,j]),Q("iframe",i(i({},g),{},{ref:v,allowfullscreen:!0,frameborder:"0",sandbox:a,loading:o,onCanPlay:()=>{f&&h.promise.then(f),h.resolve()},onLoad:t=>{null==y||y(t)}}))}));lt.displayName="VideoIframeInternal";var st=ot((function(t,e){return Q(Z,i(i({ref:e},t),{},{component:lt}))}));st.displayName="VideoIframe";import{createElement as ut}from"../bento.mjs";import{useMemo as ct}from"../bento.mjs";import{forwardRef as ft}from"../bento.mjs";var dt=["autoplay","endscreenEnable","info","mute","sharingEnable","start","uiHighlight","uiLogo","videoId"];function mt(t){switch(t){case"mute":return K("muted",[!0]);case"unmute":return K("muted",[!1]);case"showControls":return K("controls",[!0]);case"hideControls":return K("controls",[!1]);default:return K(t)}}function pt({currentTarget:t,data:e}){const n=function(t){const e=m();if(!t)return e;let n;for(;n=A.exec(t);){const t=H(n[1],n[1]),o=n[2]?H(n[2].replace(/\+/g," "),n[2]):"";e[t]=o}return e}(e),o=null==n?void 0:n.event;"pause"===o?z(t,"pause"):"play"===o?z(t,"playing"):"end"===o?(z(t,"pause"),z(t,"end")):"apiready"===o&&z(t,"canplay")}var bt=ft((function(t,n){let{autoplay:o,endscreenEnable:r,info:a,mute:l,sharingEnable:s,start:u,uiHighlight:f,uiLogo:d,videoId:m}=t,p=e(t,dt);const b=ct((()=>function(t,e,n=!1,o=!0,r=!0,a=!1,l=!0,s,u,f=!0,d){return function(t,e,n){if(!e)return t;const o=t.split("#",2),r=o[0].split("?",2);let a=r[0]+(r[1]?`?${r[1]}&${e}`:`?${e}`);return a+=o[1]?`#${o[1]}`:"",a}(`https://www.dailymotion.com/embed/video/${encodeURIComponent(e)}?api=1&html=1&app=amp`,function(t){const e=[];for(const a in t){let i=t[a];if(null!=i){i=c(r=i)?r:[r];for(let t=0;t<i.length;t++)e.push((n=a,o=i[t],`${encodeURIComponent(n)}=${encodeURIComponent(o)}`))}}var n,o,r;return e.join("&")}(i({"endscreen-enable":o?void 0:o,"info":r?void 0:r,"mute":a||n&&w(t)?1:void 0,"sharing-enable":l?void 0:l,"start":s,"ui-highlight":u,"ui-logo":f?void 0:f},d)))}(window,m,o,r,a,l,s,u,f,d)),[m,o,r,a,l,s,u,f,d]);return ut(st,i(i({autoplay:o,controls:!0,ref:n},p),{},{src:b,makeMethodMessage:mt,onMessage:pt}))}));bt.displayName="BentoDailymotion";var yt=class extends G{};yt.Component=bt,yt.props={"autoplay":{attr:"autoplay",type:"boolean"},"videoId":{attr:"data-videoid"},"start":{attr:"data-start"},"uiHighlight":{attr:"data-ui-highlight"},"implicitParams":{attrPrefix:"data-param-"}},yt.layoutSizeDefined=!0,yt.usesShadowDom=!0;import{defineBentoElement as gt}from"../bento.mjs";gt("bento-dailymotion",yt,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-dailymotion-1.0.mjs.map
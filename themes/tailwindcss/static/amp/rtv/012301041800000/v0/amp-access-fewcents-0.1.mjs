;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-access-fewcents",ev:"0.1",l:!1,f:function(t,e){(()=>{var{hasOwnProperty:e,toString:n}=Object.prototype;function i(t,e,n){return function(t,e){for(const n in e)t.setAttribute(n,e[n]);return t}(t.createElement(e),n)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var r,s=self.__AMP_LOG;function a(t){return s.user||(s.user=o()),function(t,e){return e&&e.ownerDocument.defaultView!=t}(s.user.win,t)?s.userForEmbed||(s.userForEmbed=o()):s.user}function o(t){return function(t,e){throw new Error("failed to call initLogConstructor")}()}function c(t,e,n,i,r,s,a,o,c,l,f){return t}function l(t,e){return p(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),e)}function f(t,e){return d(h(t),e)}function u(t){return t.nodeType?(n=t,e=(n.ownerDocument||n).defaultView,l(e,"ampdoc")).getAmpDoc(t):t;var e,n}function h(t){const e=u(t);return e.isSingleDoc()?e.win:e}function p(t,e){c(function(t,e){const n=t.__AMP_SERVICES&&t.__AMP_SERVICES[e];return!(!n||!n.ctor)}(t,e));const n=m(t)[e];return n.obj||(c(n.ctor),c(n.context),n.obj=new n.ctor(n.context),c(n.obj),n.context=null,n.resolve&&n.resolve(n.obj)),n.obj}function d(t,e){const n=m(t)[e];return n?n.promise?n.promise:(p(t,e),n.promise=Promise.resolve(n.obj)):null}function m(t){let e=t.__AMP_SERVICES;return e||(e=t.__AMP_SERVICES={}),e}function x(t,e,n,i){return function(t,e,n,i){const r=f(t,e);if(r)return r;const s=u(t);return s.whenExtensionsKnown().then((()=>{const t=s.getExtensionVersion(n);return t?l(s.win,"extensions").waitForExtension(n,t):null})).then((n=>n?i?f(t,e):function(t,e){return function(t,e){const n=d(t,e);if(n)return n;const i=m(t);return i[e]=function(){const t=new class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}},{promise:e,reject:n,resolve:i}=t;return e.catch((()=>{})),{obj:null,promise:e,resolve:i,reject:n,context:null,ctor:null}}(),i[e].promise}(h(t),e)}(t,e):null))}(t,e,n,i).then((t=>function(t,e,n){return i=t,r=e,s=n,o=n,c=n,a().assert(i,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",r,s,o,c,void 0,void 0,void 0,void 0,void 0);var i,r,s,o,c}(t,e,n)))}var g,v,w={fcTitleText:"Instant Access With Fewcents.",fcPromptText:"I already bought this",fcButtonText:"Unlock",fcPoweredImageRef:"https://images.fewcents.co/paywall/powered-fewcents.png",fcTermsRef:"https://www.fewcents.co/terms",fcPrivacyRef:"https://www.fewcents.co/privacy",fcContactUsRef:"mailto:support@fewcents.co"};function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t,e,n,i){return function(t,e,n,i){let r=t,s=n,a=t=>{try{return s(t)}catch(t){var e,n;throw null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t),t}};const o=function(){if(void 0!==g)return g;g=!1;try{const t={get capture(){return g=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return g}(),c=!(null==i||!i.capture);return r.addEventListener(e,a,o?i:c),()=>{null==r||r.removeEventListener(e,a,o?i:c),s=null,r=null,a=null}}(t,e,n,i)}function R(t,e,n){if(e[n])return e[n];const i=t.querySelector(`style[${n}], link[${n}]`);return i?(e[n]=i,i):null}function y(t,e){const n=t.styleSheets;for(let t=0;t<n.length;t++)if(n[t].ownerNode==e)return!0;return!1}new Set(["c","v","a","ad"]),t.registerServiceForDoc("fewcents",(function(t){return(e=t.getHeadNode(),x(e,"access","amp-access")).then((t=>{const e=t.getVendorSource("fewcents"),n=new class{constructor(t,e){this.ampdoc=t.ampdoc,this.u$=e,this.tft=null,this.eft=null,this.nft=this.u$.getAdapterConfig(),this.ift=this.rft(),this.sft=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},w),this.aft=null,this.f$=l(this.ampdoc.win,"xhr"),this.Qe=(t=>p(this.ampdoc.win,"timer"))(),this.Xh=(t=>l(this.ampdoc.win,"vsync"))(),this.oft=null,this.cft=null,function(t,e,n,i,r){const s=t.getHeadNode(),a=function(t,e,n,i){let r=t.__AMP_CSS_SM;r||(r=t.__AMP_CSS_SM=Object.create(null));const s=!n&&i&&"amp-custom"!=i&&"amp-keyframes"!=i,a=n?"amp-runtime":s?`amp-extension=${i}`:null;if(a){const n=R(t,r,a);if(n)return"STYLE"==n.tagName&&n.textContent!==e&&(n.textContent=e),n}const o=(t.ownerDocument||t).createElement("style");o.textContent=e;let c=null;return n?o.setAttribute("amp-runtime",""):s?(o.setAttribute("amp-extension",i||""),c=R(t,r,"amp-runtime")):(i&&o.setAttribute(i,""),c=t.lastChild),function(t,e,n=null){if(!n)return void function(t,e){t.insertBefore(e,t.firstChild)}(t,e);const i=n.nextSibling;t.insertBefore(e,i)}(t,o,c),a&&(r[a]=o),o}(s,function(t,e){const n=t.__AMP_CSS_TR;return n?n(e):e}(s,e),i||!1,r||null);if(n){const e=t.getRootNode();if(y(e,a))return n(a),a;const i=setInterval((()=>{y(e,a)&&(clearInterval(i),n(a))}),4)}}(this.ampdoc,"#amp-access-fewcents-dialog{padding:16px;-ms-flex-pack:center;justify-content:center;line-height:1.2;transition:opacity 300ms ease 0s}#amp-access-fewcents-dialog,.aaf-container{margin:0px;display:-ms-flexbox;display:flex}.aaf-container{-ms-flex-align:center;align-items:center;-ms-flex-direction:column;flex-direction:column;position:relative;height:auto;border:0px;background:#fff;font-family:Georgia,Times,Times New Roman,serif;font-weight:400;border-radius:5px;box-shadow:0px 4px 10px 0px rgb(0 0 0/20%),0px 4px 20px 0px rgb(0 0 0/19%);transition:all 0.5s ease 0s;width:300px;padding:8px}.aaf-headerText{font-size:17px;text-align:center;overflow-wrap:normal;overflow:hidden;margin-top:8px;color:rgba(0,0,0,0.87)}.aaf-purchase-button{-ms-flex-align:center;-ms-flex-pack:center;align-items:center;font-family:Georgia,Times,Times New Roman,serif;width:100%;outline:none;cursor:pointer;color:#fff;background:#08289a;margin:8px auto 0px;max-width:200px;border-radius:5px;border:0px;height:40px;display:-ms-flexbox;display:flex;justify-content:center;line-height:40px;font-size:16px;padding:0px 5px}.aaf-imageTag{max-height:25px;margin-top:6px}.aaf-already-bought{font-size:13px;font-weight:500;text-align:center;margin-top:8px;margin-bottom:0px;color:#08289a}.aaf-price-btn-div{display:-ms-flexbox;-ms-flex-align:center;display:flex;-ms-flex-direction:column;flex-direction:column}.aaf-article-price,.aaf-price-btn-div{text-align:center;-ms-flex-pack:center;justify-content:center;width:100%}.aaf-article-price{font-size:24px;font-weight:400;color:rgba(0,0,0,0.87);margin-top:8px}.aaf-btn-div{line-height:1.2;width:100%;-ms-flex-direction:column;flex-direction:column}.aaf-bottom-div,.aaf-btn-div{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center}.aaf-bottom-div{-ms-flex-align:center;margin-top:12px;font-size:9px;color:rgba(0,0,0,0.87);align-items:center;opacity:0.6}.aaf-fewcents-image-tag{max-height:25px}.aaf-refRow{word-break:break-word}.aaf-refElements,.aaf-refRow{text-align:center;color:#a8a3a3}.aaf-refElements{padding:2px;font-size:9px;text-decoration:none}.aaf-refElements:hover{text-decoration:underline}.aaf-partition-bar{font-size:11px;margin:0px 4px}@media (max-width:786px){#amp-access-fewcents-dialog{width:350px}}\n/*# sourceURL=/extensions/amp-access-fewcents/0.1/amp-access-fewcents.css*/",(()=>{}),!1,"amp-access-fewcents")}authorize(){return this.lft().then((t=>(this.fft(),{access:t.data.access,data:JSON.stringify(t)})),(t=>{if(!t||!t.response)throw t;const{response:e}=t;if(402!==e.status)throw t;return e.json().catch((()=>{throw t})).then((t=>(this.uft(t),this.fft().then(this.hft.bind(this)),{access:!1,data:JSON.stringify(t)})))})).catch((()=>(this.fft(),{access:!0})))}rft(){const t=this.nft.accessKey,e=this.nft.articleIdentifier,n=this.nft.category,{hostname:i}=(v||(v=self.document.createElement("a")),(r=v).href="",new URL(void 0,r.href));var r;return this.pft()+"v1/amp/authorizeBid?articleUrl=SOURCE_URL&ampReaderId=READER_ID&returnUrl=RETURN_URL&accessKey="+encodeURIComponent(t)+"&category="+encodeURIComponent(n)+"&articleIdentifier="+encodeURIComponent(e)+"&domain="+encodeURIComponent(i)}pft(){const t=this.nft.environment;return"development"===t?"https://api.hounds.fewcents.co/":"demo"===t?"https://api.demo.fewcents.co/":"https://api.fewcents.co/"}uft(t){var e,n,i;const r=null==t||null===(e=t.data)||void 0===e?void 0:e.purchaseOptions;this.oft=null==r?void 0:r[0],this.cft=null==t||null===(n=t.data)||void 0===n?void 0:n.loginUrl;const s=null==t||null===(i=t.data)||void 0===i?void 0:i.bidId;s&&(this.aft=s)}lft(){let t=this.ift;return this.aft&&(t=t+"&bidId="+this.aft),this.u$.buildUrl(t,!1).then((t=>this.u$.getLoginUrl(t))).then((t=>this.Qe.timeoutPromise(1e4,this.f$.fetchJson(t,{})).then((t=>t.json()))))}fft(){return this.dft?r||(r=Promise.resolve(void 0)):(this.mft&&(this.mft=null),this.xft&&(this.xft=null),this.Xh.mutatePromise((()=>{this.dft=!0,this.tft=null,function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(this.gft())})))}gft(){const t=this.nft.contentSelector,e=this.ampdoc.getElementById(t);return a().assertElement(e,"No element found with given id",t)}hft(){this.eft=this.gft(),this.tft=i(this.ampdoc.win.document,"div",{class:"aaf-container"}),this.vft(),this.wft(),this.bft();const t=i(this.ampdoc.win.document,"div",{class:"aaf-bottom-div"}),e=this._ft();t.appendChild(e);const n=i(this.ampdoc.win.document,"img",{class:"aaf-fewcents-image-tag",src:this.sft.fcPoweredImageRef});t.appendChild(n),this.tft.appendChild(t),this.eft.appendChild(this.tft),this.dft=!1}vft(){const t=i(this.ampdoc.win.document,"img",{class:"aaf-imageTag",src:this.nft.publisherLogoUrl});this.tft.appendChild(t);const e=i(this.ampdoc.win.document,"div",{class:"aaf-headerText"});e.textContent=this.sft.fcTitleText,this.tft.appendChild(e)}wft(){const t=i(this.ampdoc.win.document,"a",{class:"aaf-already-bought",href:this.cft,target:"_blank",rel:"noopener noreferrer"});t.textContent=this.sft.fcPromptText,this.xft=P(t,"click",(t=>{this.Pft(t)})),this.tft.appendChild(t)}bft(){var t,e;const n=i(this.ampdoc.win.document,"div",{class:"aaf-price-btn-div"});this.tft.appendChild(n);const r=i(this.ampdoc.win.document,"div",{class:"aaf-article-price"});r.textContent=null===(t=this.oft)||void 0===t||null===(e=t.price)||void 0===e?void 0:e.price,n.appendChild(r);const s=i(this.ampdoc.win.document,"div",{class:"aaf-btn-div"}),a=i(this.ampdoc.win.document,"button",{class:"aaf-purchase-button",style:"background:".concat(this.nft.primaryColor)});a.textContent=this.sft.fcButtonText,this.mft=P(a,"click",(t=>{this.Pft(t)})),s.appendChild(a),n.appendChild(s)}_ft(){const t=i(this.ampdoc.win.document,"div",{class:"aaf-refRow"}),e=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.sft.fcTermsRef,target:"_blank",rel:"noopener noreferrer"});e.textContent="Terms",t.appendChild(e),this.Rft(t);const n=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.sft.fcPrivacyRef,target:"_blank",rel:"noopener noreferrer"});n.textContent="Privacy",t.appendChild(n),this.Rft(t);const r=i(this.ampdoc.win.document,"a",{class:"aaf-refElements",href:this.sft.fcContactUsRef,target:"_blank",rel:"noopener noreferrer"});return r.textContent="Contact Us",t.appendChild(r),this.Rft(t),t}Rft(t){const e=i(this.ampdoc.win.document,"span",{class:"aaf-partition-bar"});e.textContent="|",t.appendChild(e)}Pft(t){return t.preventDefault(),this.u$.buildUrl(this.cft,!1).then((t=>{this.u$.loginWithUrl(t)}))}}(t,e);return e.getAdapter().registerVendor(n),n}));var e}))})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-access-fewcents-0.1.mjs.map
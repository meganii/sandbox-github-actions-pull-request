{"version":3,"file":"amp-web-push-permission-dialog.mjs","mappings":"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","names":["cachedAnchorEl","hasOwnProperty","hasOwn_","toString","toString_","Object","prototype","QUERY_STRING_REGEX","component","fallback","decodeURIComponent","e","event","data","url","opt_nocache","self","document","createElement","anchorEl","opt_cache","href","URL","parseUrlWithA","__AMP_LOG","user","dev","userForEmbed","Set","constructor","options","debug","windowContext","window","this","messages_","listeners_","debug_","listening_","connecting_","connected_","channel_","messagePort_","onListenConnectionMessageReceivedProc_","onConnectConnectionMessageReceivedProc_","onChannelMessageReceivedProc_","window_","listen","allowedOrigins","Promise","resolve","reject","Error","Array","isArray","onListenConnectionMessageReceived_","bind","addEventListener","then","send","WindowMessenger","Topics","CONNECT_HANDSHAKE","isAllowedOrigin_","origin","normalizedOrigin","parseUrlDeprecated","i","length","resolvePromise","rejectPromise","messageChannelEvent","message","getData","ports","messagePorts","removeEventListener","onChannelMessageReceived_","start","connect","remoteWindowContext","expectedRemoteOrigin","MessageChannel","port1","onConnectConnectionMessageReceived_","postMessage","topic","port2","messagePort","NOTIFICATION_PERMISSION_STATE","SERVICE_WORKER_STATE","SERVICE_WORKER_REGISTRATION","SERVICE_WORKER_QUERY","STORAGE_GET","existingMessage","promiseResolver","sendReply_","listeners","listener","on","callback","push","off","callbackIndex","indexOf","splice","id","payload","isReply","crypto","getRandomValues","Uint8Array","join","_ampWebPushPermissionDialog","ampMessenger_","isCurrentDialogPopup","opener","requestNotificationPermission","Notification","requestPermission","permission","run","onCloseIconClick_","storeNotificationPermission_","showTargetPermissionSection_","showPostloadSection_","onPermissionDefaultOrGranted_","onPermissionDenied_","closeIcon","querySelector","closeDialog","close","queryParams","queryString","params","opt_initial","obj","create","map","match","exec","name","tryDecodeUriComponent","value","replace","parseQueryString","fakeLocation","location","search","redirectLocation","redirectToUrl","navigator","permissions","query","permissionStatus","onchange","DEFAULT","localStorage","setItem","allSections","querySelectorAll","section","setDomElementVisibility_","ident","CSS","escape","preloadSection","postloadSection","domElement","isVisible","invisibilityCssClassName","classList","remove","add","result","closeFrame","parsedUrl","protocol"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["src/core/types/object/index.js","src/url.js","src/core/types/string/url.js","src/utils/event-helper.js","src/utils/log.js","build/all/amp-web-push-0.1/window-messenger.js","build/all/amp-web-push-0.1/amp-web-push-permission-dialog.js","build/all/amp-web-push-0.1/vars.js","src/core/dom/css-selectors.js"]}

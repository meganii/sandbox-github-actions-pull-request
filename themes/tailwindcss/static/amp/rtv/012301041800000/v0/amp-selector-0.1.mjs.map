{"version":3,"file":"amp-selector-0.1.mjs","mappings":"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","names":["resolved","Promise","resolve","undefined","arrayLike","Array","prototype","slice","call","arr1","arr2","length","i","hasOwnProperty","hasOwn_","toString","toString_","Object","Keys_Enum","doc","body","getAttribute","documentElement","self","__AMP_LOG","user","dev","userForEmbed","logs","suffix","levelFunc","opt_suffix","Error","callLogConstructor","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","getUserLogger","win","assert","nodeOrDoc","nodeType","node","ownerDocument","defaultView","id","getServiceInternal","__AMP_TOP","getTopWindow","getService","getAmpDoc","holder","devAssert","isServiceRegistered","s","services","__AMP_SERVICES","getServices","obj","ctor","context","service","TAG","KEYBOARD_SELECT_MODES","AmpSelector","AMP","BaseElement","static","constructor","element","super","this","isMultiple_","selectedElements_","elements_","inputs_","action_","focusedIndex_","kbSelectMode_","isLayoutSupported","buildCallback","elementOrAmpDoc","ampdoc","getAmpdoc","isSingleDoc","getAmpdocServiceHolder","getServiceForDocOrNull","hasAttribute","setAttribute","kbSelectMode","toLowerCase","userAssert","registerAction","clearAllSelections_","bind","init_","addEventListener","clickHandler_","keyDownHandler_","invocation","args","trust","delta","select_","toggle_","reject","addToAllowlist","maybeRefreshOnUpdate_","mutatedAttributesCallback","mutations","selected","selectedAttributeMutated_","disabled","removeAttribute","newValue","isArray","areEqualOrdered","selectedOptions_","sort","isSelected","reduce","map","value","create","setSelection_","clearSelection_","updateFocus_","setInputs_","opt_focusEl","forEach","option","tabIndex","focusElement","indexOf","unusedEvent","newElements","toArray","querySelectorAll","opt_elements","elements","el","selectedValues","elementName","formId","input","removeChild","document","fragment","createDocumentFragment","hidden","createElement","push","appendChild","onOptionPicked_","mutateElement","fireSelectEvent_","event","target","closest","index","indexCurrentStatus","indexFinalStatus","selectedIndex","resolvedPromise","selectedEl","selectEvent","type","detail","opt_eventInit","eventInit","assign","createCustomEvent","CustomEvent","targetOption","selectedOptions","trigger","previousIndex","normalizedIndex","a","b","previousEl","key","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","HOME","navigationKeyDownHandler_","ENTER","selectionKeyDownHandler_","dir","isRTL","preventDefault","getElementsSizes_","then","sizes","originalIndex","isElementHidden","newSelectedOption","focus","e","tryFocus","focusedOption","includes","selIndex","splice","pop","getElementsForTesting","getSelectedElementsForTesting","measureElement","getBoundingClientRect","rect","height","width","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["src/core/data-structures/promise.js","src/core/types/array.js","src/core/types/object/index.js","src/core/constants/key-codes.js","src/core/dom/index.js","src/utils/log.js","src/service-helpers.js","src/core/window/index.js","src/service/index.js","extensions/amp-selector/0.1/amp-selector.js","src/core/constants/action-constants.js","src/core/constants/amp-events.js","src/core/dom/query.js","src/utils/event-helper.js","src/core/math.js","build/amp-selector-0.1.css.js"]}

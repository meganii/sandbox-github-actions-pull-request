;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-story-subscriptions",ev:"0.1",l:!1,f:function(t,n){(()=>{function n(t,n,i){return n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function i(t,n){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),i.push.apply(i,r)}return i}function r(t){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{};r%2?i(Object(s),!0).forEach((function(i){n(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))}))}return t}var{isArray:s}=Array,{hasOwnProperty:o,toString:e}=Object.prototype;function a(t){const n=Object.create(null);return t&&Object.assign(n,t),n}function l(t,n){return o.call(t,n)}function p(t,n){if(!!n===n||null==n)return;if(Array.isArray(n))return void n.forEach((n=>{p(t,n)}));const i=n;t.appendChild(i.nodeType?i:self.document.createTextNode(String(n)))}function u(t,n,...i){if("string"!=typeof t)return t(r(r({},n),{},{children:i}));const s=null==n?void 0:n.xmlns;s&&delete n.xmlns;const o=s?self.document.createElementNS(s,t):self.document.createElement(t);return p(o,i),n&&Object.keys(n).forEach((t=>{!function(t,n,i){if(!1!==i&&null!=i)if("function"!=typeof i||"o"!==n[0]||"n"!==n[1])t.setAttribute(n,!0===i?"":String(i));else{const r=n.toLowerCase().substring(2);t.addEventListener(r,i)}}(o,t,n[t])})),o}var c,m=["Webkit","webkit","Moz","moz","ms","O","o"];function h(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return m.some((t=>n.startsWith(t+"-")))?`-${n}`:n}function b(t,n,i){if(n.startsWith("--"))return n;c||(c=a());let r=c[n];if(!r||i){if(r=n,void 0===t[n]){const i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),s=function(t,n){for(let i=0;i<m.length;i++){const r=m[i]+n;if(void 0!==t[r])return r}return""}(t,i);void 0!==t[s]&&(r=s)}i||(c[n]=r)}return r}function d(t,n,i=5){if(!isFinite(i)||i<0)throw new Error("Invalid depth: "+i);if(t===n)return!0;const r=[{a:t,b:n,depth:i}];for(;r.length>0;){const{a:t,b:n,depth:i}=r.shift();if(i>0){if(typeof t!=typeof n)return!1;if(s(t)&&s(n)){if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)r.push({a:t[s],b:n[s],depth:i-1});continue}if(t&&n&&"object"==typeof t&&"object"==typeof n){const s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(const o of s)r.push({a:t[o],b:n[o],depth:i-1});continue}}if(t!==n)return!1}return!0}function f(t){return(t.ownerDocument||t).defaultView}var g=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function A(t,n=""){try{return decodeURIComponent(t)}catch(t){return n}}function _(t){if(!t)return null;const n=t.match(/^(.*)\/(.*)-([0-9.]+|latest)(\.max)?\.(?:js|mjs)(?:\?ssr-css=[0|1])?$/i),i=n?n[2]:void 0,r=n?n[3]:void 0;return i&&r?{extensionId:i,extensionVersion:r}:null}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var y=self.__AMP_LOG;function T(t,n){throw new Error("failed to call initLogConstructor")}function S(t){return y.user||(y.user=E()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(y.user.win,t)?y.userForEmbed||(y.userForEmbed=E()):y.user}function E(t){return T()}function v(){return y.dev||(y.dev=T())}function I(t,n,i,r,s,o,e,a,l,p,u){return t}function P(t,n,i,r){(function(t,n,i,r,s,o){const e=j(t);let a=e[i];a||(a=e[i]={obj:null,promise:null,resolve:null,reject:null,context:null,ctor:null,sharedInstance:!1}),a.ctor||(a.ctor=r,a.context=n,a.sharedInstance=!1,a.resolve&&k(t,i))})(t=U(t),t,n,i),r&&k(t,n)}function O(t,n){return k(t=U(t),n)}function w(t,n){return L(t=U(t),n)?k(t,n):null}function x(t,n){return G(t,n)}function N(t,n){const i=D(M(t));return L(i,n)?k(i,n):null}function R(t,n){return V(D(t),n)}function C(t,n){return G(D(t),n)}function U(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}function M(t){return t.nodeType?(n=f(t),O(n,"ampdoc")).getAmpDoc(t):t;var n}function D(t){const n=M(t);return n.isSingleDoc()?n.win:n}function k(t,n){I(L(t,n));const i=j(t)[n];return i.obj||(I(i.ctor),I(i.context),i.obj=new i.ctor(i.context),I(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}function V(t,n){const i=G(t,n);if(i)return i;const r=j(t);return r[n]=function(){const t=new class{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}},{promise:n,reject:i,resolve:r}=t;return n.catch((()=>{})),{obj:null,promise:n,resolve:r,reject:i,context:null,ctor:null}}(),r[n].promise}function G(t,n){const i=j(t)[n];return i?i.promise?i.promise:(k(t,n),i.promise=Promise.resolve(i.obj)):null}function j(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function L(t,n){const i=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!i||!i.ctor)}function z(t,n,i,r,s){return x(t,n)||function(t,n,i,r,s){return(o=t.document,new Promise((t=>function(t,n){!function(t,n,i){if(n())i();else{const r=new(f(t).MutationObserver)((()=>{n()&&(r.disconnect(),i())}));r.observe(t,{childList:!0})}}(t.documentElement,(()=>!!t.body),n)}(o,t)))).then((()=>{const n=O(t,"extensions");return function(t,n,i){return function(t){if(!t)return[];const n=t.querySelectorAll("script[custom-element],script[custom-template]"),i=[];for(let t=0;t<n.length;t++){const r=n[t],s=r.getAttribute("custom-element")||r.getAttribute("custom-template"),o=_(r.src);s&&o&&i.push({script:r,extensionId:s,extensionVersion:o.extensionVersion})}return i}(t.document.head).some((({extensionId:t,extensionVersion:r})=>n==t&&i==r))}(n.win,i,r)?n.waitForExtension(i,r):null})).then((i=>i?s?x(t,n):function(t,n){return V(t,n)}(t,n):null));var o}(t,n,i,r,s)}function H(t,n,i,r){return function(t,n,i,r){const s=C(t,n);if(s)return s;const o=M(t);return o.whenExtensionsKnown().then((()=>{const t=o.getExtensionVersion(i);return t?O(o.win,"extensions").waitForExtension(i,t):null})).then((i=>i?r?C(t,n):R(t,n):null))}(t,n,i,r).then((t=>function(t,n,i){return r=t,s=n,o=i,e=i,a=i,S().assert(r,"Service %s was requested to be provided through %s, but %s is not loaded in the current page. To fix this problem load the JavaScript file for %s in this page.",s,o,e,a,void 0,void 0,void 0,void 0,void 0);var r,s,o,e,a}(t,n,i)))}var Y="amp-story",B=t=>{let n=(t=>w(t,"story-store"))(t);return n||(n=new F(t),P(t,"story-store",(function(){return n}))),n},W={CAN_INSERT_AUTOMATIC_AD:1,CAN_SHOW_AUDIO_UI:2,CAN_SHOW_NAVIGATION_OVERLAY_HINT:3,CAN_SHOW_PAGINATION_BUTTONS:4,CAN_SHOW_PREVIOUS_PAGE_HELP:5,CAN_SHOW_SHARING_UIS:6,CAN_SHOW_STORY_URL_INFO:7,CAN_SHOW_SYSTEM_LAYER_BUTTONS:8,VIEWER_CUSTOM_CONTROLS:9,AD_STATE:10,PAGE_ATTACHMENT_STATE:11,EDUCATION_STATE:12,GYROSCOPE_PERMISSION_STATE:13,INFO_DIALOG_STATE:14,INTERACTIVE_COMPONENT_STATE:15,INTERACTIVE_REACT_STATE:16,KEYBOARD_ACTIVE_STATE:17,MUTED_STATE:18,PAGE_HAS_AUDIO_STATE:19,PAGE_HAS_CAPTION_STATE:20,CAPTIONS_STATE:21,PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE:22,PANNING_MEDIA_STATE:23,PAUSED_STATE:24,PREVIEW_STATE:25,RTL_STATE:26,SHARE_MENU_STATE:27,SHOPPING_DATA:28,STORY_HAS_BACKGROUND_AUDIO_STATE:29,STORY_HAS_PLAYBACK_UI_STATE:30,SYSTEM_UI_IS_VISIBLE_STATE:31,UI_STATE:32,ACTIONS_ALLOWLIST:33,CONSENT_ID:34,CURRENT_PAGE_ID:35,CURRENT_PAGE_INDEX:36,ADVANCEMENT_MODE:37,NAVIGATION_PATH:38,NEW_PAGE_AVAILABLE_ID:39,PAGE_IDS:40,PAGE_SIZE:41,SUBSCRIPTIONS_DIALOG_UI_STATE:42,SUBSCRIPTIONS_STATE:43,SUBSCRIPTIONS_PAGE_INDEX:44},X={[W.ACTIONS_ALLOWLIST]:(t,n)=>t.length!==n.length,[W.INTERACTIVE_COMPONENT_STATE]:(t,n)=>t.element!==n.element||t.state!==n.state,[W.NAVIGATION_PATH]:(t,n)=>t.length!==n.length,[W.PAGE_IDS]:(t,n)=>t.length!==n.length,[W.PAGE_SIZE]:(t,n)=>null===t||null===n||t.width!==n.width||t.height!==n.height,[W.PANNING_MEDIA_STATE]:(t,n)=>null===t||null===n||!d(t,n,2),[W.SHOPPING_DATA]:(t,n)=>null===t||null===n||!d(t,n,2),[W.INTERACTIVE_REACT_STATE]:(t,n)=>!d(t,n,3)},F=class{constructor(t){this.i=t,this.te={},this.Ri=r(r({},this.xy()),this.Ny())}get(t){if(l(this.Ri,t))return this.Ri[t];v().error(Y,"Unknown state %s.",t)}subscribe(t,n,i=!1){l(this.Ri,t)?(this.te[t]||(this.te[t]=new class{constructor(){this.Fn=null}add(t){return this.Fn||(this.Fn=[]),this.Fn.push(t),()=>{this.remove(t)}}remove(t){this.Fn&&function(t,n){const i=t.indexOf(n);-1!=i&&t.splice(i,1)}(this.Fn,t)}removeAll(){this.Fn&&(this.Fn.length=0)}fire(t){if(this.Fn)for(const n of this.Fn.slice())n(t)}getHandlerCount(){var t,n;return null!==(t=null===(n=this.Fn)||void 0===n?void 0:n.length)&&void 0!==t?t:0}}),this.te[t].add(n),i&&n(this.get(t))):v().error(Y,"Can't subscribe to unknown state %s.",t)}dispatch(t,n){const i=r({},this.Ri);let s;this.Ri=((t,n,i)=>{switch(n){case 1:return r(r({},t),{},{[W.INTERACTIVE_REACT_STATE]:r(r({},t[W.INTERACTIVE_REACT_STATE]),{},{[i.interactiveId]:i})});case 2:return r(r({},t),{},{[W.NEW_PAGE_AVAILABLE_ID]:i});case 3:const s=r(r({},t[W.PANNING_MEDIA_STATE]),i);return r(r({},t),{},{[W.PANNING_MEDIA_STATE]:s});case 4:const o=r(r({},t[W.SHOPPING_DATA]),i);return r(r({},t),{},{[W.SHOPPING_DATA]:o});case 5:const e=[].concat(t[W.ACTIONS_ALLOWLIST],i);return r(r({},t),{},{[W.ACTIONS_ALLOWLIST]:e});case 21:return r(r({},t),{},{[W.PAGE_ATTACHMENT_STATE]:!!i});case 15:return r(r({},t),{},{[W.AD_STATE]:!!i});case 16:return r(r({},t),{},{[W.EDUCATION_STATE]:!!i});case 18:return i=i,r(r({},t),{},{[W.PAUSED_STATE]:1===i.state,[W.SYSTEM_UI_IS_VISIBLE_STATE]:!0,[W.INTERACTIVE_COMPONENT_STATE]:i});case 17:return r(r({},t),{},{[W.INFO_DIALOG_STATE]:!!i,[W.PAUSED_STATE]:!!i});case 30:return r(r({},t),{},{[W.STORY_HAS_PLAYBACK_UI_STATE]:!!i});case 29:return r(r({},t),{},{[W.STORY_HAS_BACKGROUND_AUDIO_STATE]:!!i});case 20:return r(r({},t),{},{[W.MUTED_STATE]:!!i});case 22:return r(r({},t),{},{[W.PAGE_HAS_AUDIO_STATE]:!!i});case 23:return r(r({},t),{},{[W.PAGE_HAS_CAPTIONS_STATE]:!!i});case 24:return r(r({},t),{},{[W.CAPTIONS_STATE]:!!i});case 25:return r(r({},t),{},{[W.PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE]:!!i});case 26:return r(r({},t),{},{[W.PAUSED_STATE]:!!i});case 27:return r(r({},t),{},{[W.RTL_STATE]:!!i});case 19:return r(r({},t),{},{[W.KEYBOARD_ACTIVE_STATE]:!!i});case 28:return r(r({},t),{},{[W.PAUSED_STATE]:!!i,[W.SHARE_MENU_STATE]:!!i});case 33:return r(r({},t),{},{[W.SYSTEM_UI_IS_VISIBLE_STATE]:!!i});case 34:return 3===t[W.UI_STATE]&&3!==i?(v().error(Y,"Cannot switch away from UIType_Enum.VERTICAL"),t):r(r({},t),{},{[W.UI_STATE]:i});case 9:return r(r({},t),{},{[W.GYROSCOPE_PERMISSION_STATE]:i});case 8:return r(r({},t),{},{[W.CONSENT_ID]:i});case 6:return r(r({},t),{},{[W.CURRENT_PAGE_ID]:i.id,[W.CURRENT_PAGE_INDEX]:i.index});case 7:return r(r({},t),{},{[W.ADVANCEMENT_MODE]:i});case 10:return r(r({},t),{},{[W.NAVIGATION_PATH]:i});case 11:return r(r({},t),{},{[W.PAGE_IDS]:i});case 12:return r(r({},t),{},{[W.PAGE_SIZE]:i});case 13:return r(r({},t),{},{[W.VIEWER_CUSTOM_CONTROLS]:i});case 14:return r(r({},t),{},{[W.SUBSCRIPTIONS_PAGE_INDEX]:i});case 31:return r(r({},t),{},{[W.SUBSCRIPTIONS_DIALOG_UI_STATE]:!!i,[W.PAUSED_STATE]:!!i});case 32:return r(r({},t),{},{[W.SUBSCRIPTIONS_STATE]:i});default:return v().error(Y,"Unknown action %s.",n),t}})(this.Ri,t,n),Object.keys(this.te).forEach((t=>{s=X[t],(s?s(i[t],this.Ri[t]):i[t]!==this.Ri[t])&&this.te[t].fire(this.Ri[t])}))}xy(){return{[W.CAN_INSERT_AUTOMATIC_AD]:!0,[W.CAN_SHOW_AUDIO_UI]:!0,[W.CAN_SHOW_NAVIGATION_OVERLAY_HINT]:!0,[W.CAN_SHOW_PREVIOUS_PAGE_HELP]:!0,[W.CAN_SHOW_PAGINATION_BUTTONS]:!0,[W.CAN_SHOW_SHARING_UIS]:!0,[W.CAN_SHOW_STORY_URL_INFO]:!0,[W.CAN_SHOW_SYSTEM_LAYER_BUTTONS]:!0,[W.VIEWER_CUSTOM_CONTROLS]:[],[W.AD_STATE]:!1,[W.EDUCATION_STATE]:!1,[W.GYROSCOPE_PERMISSION_STATE]:"",[W.INFO_DIALOG_STATE]:!1,[W.INTERACTIVE_COMPONENT_STATE]:{state:0},[W.INTERACTIVE_REACT_STATE]:{},[W.KEYBOARD_ACTIVE_STATE]:!1,[W.MUTED_STATE]:!0,[W.PAGE_ATTACHMENT_STATE]:!1,[W.PAGE_HAS_AUDIO_STATE]:!1,[W.PAGE_HAS_CAPTIONS_STATE]:!1,[W.CAPTIONS_STATE]:!0,[W.PAGE_HAS_ELEMENTS_WITH_PLAYBACK_STATE]:!1,[W.PANNING_MEDIA_STATE]:{},[W.PAUSED_STATE]:!1,[W.RTL_STATE]:!1,[W.SHARE_MENU_STATE]:!1,[W.SHOPPING_DATA]:{},[W.STORY_HAS_BACKGROUND_AUDIO_STATE]:!1,[W.STORY_HAS_PLAYBACK_UI_STATE]:!1,[W.SYSTEM_UI_IS_VISIBLE_STATE]:!0,[W.UI_STATE]:0,[W.ACTIONS_ALLOWLIST]:[],[W.CONSENT_ID]:null,[W.CURRENT_PAGE_ID]:"",[W.CURRENT_PAGE_INDEX]:0,[W.ADVANCEMENT_MODE]:"",[W.NEW_PAGE_AVAILABLE_ID]:"",[W.NAVIGATION_PATH]:[],[W.PAGE_IDS]:[],[W.PAGE_SIZE]:null,[W.PREVIEW_STATE]:!1,[W.SUBSCRIPTIONS_DIALOG_UI_STATE]:!1,[W.SUBSCRIPTIONS_STATE]:0,[W.SUBSCRIPTIONS_PAGE_INDEX]:-1}}Ny(){switch(function(t){const n=function(t){const n=a();if(!t)return n;let i;for(;i=g.exec(t);){const t=A(i[1],i[1]),r=i[2]?A(i[2].replace(/\+/g," "),i[2]):"";n[t]=r}return n}(t).embedMode,i=parseInt(n,10);return 0===(r=i)||1===r||2===r||3===r||4===r?i:0;var r}(this.i.location.hash)){case 1:return{[W.CAN_INSERT_AUTOMATIC_AD]:!1,[W.CAN_SHOW_NAVIGATION_OVERLAY_HINT]:!1,[W.CAN_SHOW_PAGINATION_BUTTONS]:!1,[W.CAN_SHOW_PREVIOUS_PAGE_HELP]:!0,[W.CAN_SHOW_SYSTEM_LAYER_BUTTONS]:!1,[W.MUTED_STATE]:!1};case 2:return{[W.CAN_SHOW_SHARING_UIS]:!1};case 3:return{[W.PREVIEW_STATE]:!0,[W.CAN_INSERT_AUTOMATIC_AD]:!1,[W.CAN_SHOW_NAVIGATION_OVERLAY_HINT]:!1,[W.CAN_SHOW_PAGINATION_BUTTONS]:!1,[W.CAN_SHOW_PREVIOUS_PAGE_HELP]:!1,[W.CAN_SHOW_SYSTEM_LAYER_BUTTONS]:!1};case 4:return{[W.CAN_SHOW_AUDIO_UI]:!1,[W.CAN_SHOW_SHARING_UIS]:!1,[W.CAN_SHOW_STORY_URL_INFO]:!1};default:return{}}}},K="storyPageCount",Z="storyProgress",$="amp-story-viewer-messaging-handler",q={"CAPTIONS_STATE":{dataSource:0,property:W.CAPTIONS_STATE},"CURRENT_PAGE_ID":{dataSource:0,property:W.CURRENT_PAGE_ID},"EDUCATION_STATE":{dataSource:0,property:W.EDUCATION_STATE},"MUTED_STATE":{dataSource:0,property:W.MUTED_STATE},"PAGE_ATTACHMENT_STATE":{dataSource:0,property:W.PAGE_ATTACHMENT_STATE},"UI_STATE":{dataSource:0,property:W.UI_STATE},"STORY_PROGRESS":{dataSource:2,property:Z},"STORY_PAGE_COUNT":{dataSource:2,property:K}},J={"CAPTIONS_STATE":{action:24,isValueValid:t=>"boolean"==typeof t},"MUTED_STATE":{action:20,isValueValid:t=>"boolean"==typeof t}},Q="-shadowcsshost",tt=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)";function nt(t,n,i){const r=function(t,n){return t.closest("AMP-STORY")}(t),s=r.getAttribute(n);return s?(t=>N(t,"url"))(r).assertHttpsUrl(s,r,n):null}new RegExp("("+Q+tt,"gim"),new RegExp("(-shadowcsscontext"+tt,"gim"),new RegExp(Q,"gim"),new RegExp("-shadowcsscontext","gim");var it=class extends t.BaseElement{constructor(t){super(t),this.Dy=null,this.i4=null,this.br=null,this.CI=null}buildCallback(){return this.br=function(t,n){return k(D(M(t)),"viewer")}(this.element),this.CI=this.br.isEmbedded()?new class{constructor(t,n){this.Dy=B(t),this.Fy=(t=>{let n=(t=>w(t,"story-variable"))(t);return n||(n=new class{constructor(t){this.Ly={storyInteractiveId:null,storyInteractiveResponse:null,storyInteractiveType:null,storyPageIndex:null,storyPageId:null,[K]:null,[Z]:null,storyIsMuted:null,storyPreviousPageId:null,storyPreviousPageIndex:null,storyAdvancementMode:null,storyShoppingProductId:null},this.Dy=B(t),this.Uy()}Uy(){this.Dy.subscribe(W.PAGE_IDS,(()=>this.jy())),this.Dy.subscribe(W.CURRENT_PAGE_ID,(()=>this.jy()),!0)}jy(){const t=this.Dy.get(W.PAGE_IDS),n=t.filter((t=>!t.startsWith("i-amphtml-ad-"))).length;this.Ly.storyPageCount=n;const i=this.Dy.get(W.CURRENT_PAGE_ID);if(!i)return;this.Ly.storyPreviousPageId=this.Ly.storyPageId,this.Ly.storyPageId=i;const r=this.Dy.get(W.CURRENT_PAGE_INDEX),s=t.slice(0,r).filter((t=>t.startsWith("i-amphtml-ad-"))).length;this.Ly.storyPreviousPageIndex=this.Ly.storyPageIndex,this.Ly.storyPageIndex=r-s,1===n?this.Ly.storyProgress=0:n>1&&(this.Ly.storyProgress=(r-s)/(n-1))}onVariableUpdate(t,n){this.Ly[t]=n}get(){return this.Ly}}(t),P(t,"story-variable",(function(){return n}))),n})(t),this.br=n}startListening(){this.br.onMessageRespond("getDocumentState",(t=>this.kw(t))),this.br.onMessage("onDocumentState",(t=>this.Sw(t))),this.br.onMessageRespond("setDocumentState",(t=>this.Ow(t))),this.br.onMessageRespond("customDocumentUI",(t=>this.Cw(t)))}send(t,n,i=!1){this.br.sendMessage(t,n,i)}kw(t={}){const{state:n}=t,i=q[n];if(!i)return Promise.reject("Invalid 'state' parameter");let r;switch(i.dataSource){case 0:r=this.Dy.get(i.property);break;case 2:r=this.Fy.get()[i.property];break;default:v().error($,"Unknown data source %s.",i.dataSource)}return Promise.resolve({state:n,value:r})}Sw(t={}){const{state:n}=t,i=q[n];i?this.Dy.subscribe(i.property,(t=>{this.br.sendMessage("documentStateUpdate",{"state":n,"value":t})})):S().error($,"Invalid 'state' parameter")}Ow(t={}){const{state:n,value:i}=t,r=J[n];return r?r.isValueValid(i)?(this.Dy.dispatch(r.action,i),Promise.resolve({state:n,value:i})):Promise.reject("Invalid 'value' parameter"):Promise.reject("Invalid 'state' parameter")}Cw(t){this.Dy.dispatch(13,t.controls)}}(this.win,this.br):null,Promise.all([(i=this.win,z(i,"story-store","amp-story","1.0")),(n=this.element,H(n,"subscriptions","amp-subscriptions")),(t=this.element,R(t,"localization"))]).then((([t,n,i])=>{this.Dy=t,this.i4=n;const r=this.win.document.querySelectorAll("amp-story-page:not([ad])");I(r.length>=4);let s=parseInt(this.element.getAttribute("subscriptions-page-index"),10);var o,e;s=isNaN(s)?2:s,this.Dy.dispatch(14,(o=s,e=r.length-1,Math.min(Math.max(o,2),e))),this.s4(),this.i4.addOnEntitlementResolvedCallback((()=>this.s4()));const a=this.o4();return function(t,n){const i=(t=>N(t,"localization"))(n),r=O(f(n),"vsync"),s=[];return t.querySelectorAll("[i-amphtml-i18n-aria-label]").forEach((t=>{s.push(i.getLocalizedStringAsync(t.getAttribute("i-amphtml-i18n-aria-label")).then((n=>t.setAttribute("aria-label",n)))),t.removeAttribute("i-amphtml-i18n-aria-label")})),t.querySelectorAll("[i-amphtml-i18n-text-content]").forEach((n=>{s.push(i.getLocalizedStringAsync(n.getAttribute("i-amphtml-i18n-text-content")).then((i=>t.isConnected?r.mutatePromise((()=>{n.textContent=i})):n.textContent=i))),n.removeAttribute("i-amphtml-i18n-text-content")})),Promise.all(s)}(a,this.element).then((()=>{this.element.appendChild(a),this.Uy()}))}));var t,n,i}layoutCallback(){const t=nt(this.element,"publisher-logo-src");this.element.querySelector(".i-amphtml-story-subscriptions-publisher-logo").setAttribute("src",t)}isLayoutSupported(t){return"container"==t}s4(){this.i4.getGrantStatus().then((t=>{this.e4(t)}))}e4(t){const n=t?2:3;this.Dy.dispatch(32,n)}Uy(){this.Dy.subscribe(W.SUBSCRIPTIONS_DIALOG_UI_STATE,(t=>this.a4(t))),this.win.document.querySelector("amp-subscriptions-dialog").addEventListener("click",(t=>this.l4(t))),new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{"SWG-POPUP-BACKGROUND"===t.tagName&&function(t,n){const{style:i}=t;for(const t in n)i.setProperty(h(b(i,t)),String(n[t]),"important")}(t,{"pointer-events":"all"})}))}))})).observe(this.win.document.body,{subtree:!1,childList:!0})}a4(t){if(this.mutateElement((()=>this.element.classList.toggle("i-amphtml-story-subscriptions-visible",t))),t)return this.i4.maybeRenderDialogForSelectedPlatform().then((()=>{this.br.isEmbedded()&&setTimeout((()=>{const t=this.win.document.querySelector("amp-subscriptions-dialog .i-amphtml-story-subscriptions-dialog-banner-button");t&&this.mutateElement((()=>t.classList.add("i-amphtml-story-subscriptions-dialog-banner-button-visible")))}),2e3)}));this.i4.getDialog().close()}l4(t){t.target.classList.contains("i-amphtml-story-subscriptions-dialog-banner-button-visible")&&this.CI.send("selectDocument",{"next":!0,"advancementMode":"manualAdvance"})}o4(){return u("div",{"subscriptions-dialog":!0,"subscriptions-display":"NOT granted"},u("div",{class:"i-amphtml-story-subscriptions-dialog-banner"},u("button",{class:"i-amphtml-story-subscriptions-dialog-banner-button","i-amphtml-i18n-text-content":"113"})),u("div",{class:"i-amphtml-story-subscriptions-dialog-content"},u("span",{class:"i-amphtml-story-subscriptions-price"},this.element.getAttribute("price")),this.element.getAttribute("headline")&&u("span",{class:"i-amphtml-story-subscriptions-headline"},this.element.getAttribute("headline")),u("span",{class:"i-amphtml-story-subscriptions-description"},this.element.getAttribute("description")),this.element.getAttribute("additional-description")&&u("span",{class:"i-amphtml-story-subscriptions-additional-description"},this.element.getAttribute("additional-description")),u("button",{class:"i-amphtml-story-subscriptions-publisher-button","subscriptions-action":"subscribe","subscriptions-display":"NOT granted"},u("img",{class:"i-amphtml-story-subscriptions-publisher-logo"}),u("span",{class:"i-amphtml-story-subscriptions-publisher-button-text"},u("span",{"i-amphtml-i18n-text-content":"109"})," ",nt(this.element,"publisher"))),u("button",{class:"i-amphtml-story-subscriptions-google-button","subscriptions-action":"subscribe","subscriptions-display":"NOT granted","subscriptions-service":"subscribe.google.com","subscriptions-decorate":"false"},u("span",{class:"i-amphtml-story-subscriptions-google-logo"}),u("span",{class:"i-amphtml-story-subscriptions-google-button-text","i-amphtml-i18n-text-content":"110"})),u("span",{class:"i-amphtml-story-subscriptions-signin"},u("span",{"i-amphtml-i18n-text-content":"107"})," ",u("button",{"subscriptions-action":"login","subscriptions-display":"NOT granted","i-amphtml-i18n-text-content":"108"}))))}};t.registerElement("amp-story-subscriptions",it,'@import url("https://fonts.googleapis.com/css2?family=Google+Sans:wght@400");@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700");amp-story-subscriptions{position:absolute!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important;top:0!important;left:0!important;height:100%!important;width:100%!important;z-index:1!important;transform:translateY(100vh)!important;transition-delay:0.15s!important;pointer-events:none!important}amp-story-subscriptions.i-amphtml-story-subscriptions-visible{transform:translateY(0)!important;transition-delay:0s!important}amp-story-subscriptions:before{content:""!important;position:absolute!important;top:0!important;left:0!important;height:100%!important;width:100%!important;background:#000!important;opacity:0!important;pointer-events:auto!important;transition:opacity 0.15s cubic-bezier(0.4,0,1,1)!important}amp-story-subscriptions.i-amphtml-story-subscriptions-visible:before{opacity:0.55!important;transition:opacity 0.2s cubic-bezier(0,0,0.2,1)!important}amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper{border-radius:0.9em 0.9em 0 0!important;font-family:Poppins,sans-serif!important;font-weight:400!important;background:#fff!important;color:#000!important;overflow:hidden!important}amp-story:not([supports-landscape])+amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper,iframe.swg-dialog{width:100%!important;left:0!important;margin-left:0!important}@media(min-aspect-ratio:31/40){amp-story:not([supports-landscape])+amp-subscriptions-dialog.i-amphtml-story-subscriptions-dialog-wrapper,iframe.swg-dialog{width:var(--i-amphtml-story-desktop-one-panel-width)!important;left:50%!important;margin-left:calc(var(--i-amphtml-story-desktop-one-panel-width)*-0.5)!important}}.i-amphtml-story-subscriptions-dialog-banner{height:2.54em!important;background:#ededed!important;padding:0 0.3em!important}.i-amphtml-story-subscriptions-dialog-banner,.i-amphtml-story-subscriptions-dialog-banner-button{display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:end!important;justify-content:flex-end!important;-ms-flex-align:center!important;align-items:center!important}.i-amphtml-story-subscriptions-dialog-banner-button{letter-spacing:0.015em!important;font-size:0.75em!important;opacity:0!important;transform:translateX(-0.2em)!important;transition:opacity 0.3s ease-out,transform 0.3s ease-out!important;padding:0!important;border:none!important;font-family:Poppins,sans-serif!important;font-weight:400!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button{transform:translateX(0.2em)!important}.i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible{opacity:1!important;transform:translateX(0)!important}.i-amphtml-story-subscriptions-dialog-banner-button:after{content:""!important;width:0.93em!important;height:0.93em!important;margin:0 0.6em!important;transform:translateX(-0.1em)!important;transition:transform 0.3s ease-out!important;background-size:contain!important;background-repeat:no-repeat!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" stroke="%23000" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1.75 1.5 6 6l-4.25 4.6"/></svg>\')!important}.i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible:after{transform:translateX(0)!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button:after{transform:translateX(0.1em) scaleX(-1)!important}[dir=rtl] .i-amphtml-story-subscriptions-dialog-banner-button.i-amphtml-story-subscriptions-dialog-banner-button-visible:after{transform:translateX(0) scaleX(-1)!important}.i-amphtml-story-subscriptions-dialog-content{margin:2.1em 1.6em 0!important;text-align:center!important;white-space:nowrap!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-direction:column!important;flex-direction:column!important}.i-amphtml-story-subscriptions-price{display:block!important;font-weight:400!important;font-size:1.4em!important;letter-spacing:-0.02em!important;text-overflow:ellipsis!important;overflow:hidden!important;margin-bottom:0.2em!important}.i-amphtml-story-subscriptions-headline{display:block!important;font-weight:700!important;font-size:1.15em!important;letter-spacing:-0.015em!important;text-overflow:ellipsis!important;overflow:hidden!important;margin:0.4em 0 0.15em!important}.i-amphtml-story-subscriptions-additional-description,.i-amphtml-story-subscriptions-description{display:block!important;font-size:0.9em!important;letter-spacing:-0.015em!important;text-overflow:ellipsis!important;overflow:hidden!important}.i-amphtml-story-subscriptions-google-button,.i-amphtml-story-subscriptions-publisher-button{margin:0 auto 0.8em!important;padding:0!important;border:none!important;--i-amphtml-button-height:2.3em;height:var(--i-amphtml-button-height)!important;border-radius:calc(var(--i-amphtml-button-height)/2)!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-align:center!important;align-items:center!important;cursor:pointer!important;font-size:calc(var(--story-font-size))!important}.i-amphtml-story-subscriptions-publisher-button{margin-top:2em!important;background:#000!important}.i-amphtml-story-subscriptions-google-button{background:#f2f2f2!important}.i-amphtml-story-subscriptions-google-logo,.i-amphtml-story-subscriptions-publisher-logo{width:1.85em!important;height:1.85em!important;border-radius:50%!important;margin-inline:0.25em 0.65em!important}.i-amphtml-story-subscriptions-google-logo{background-size:contain!important;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none"><path fill="%23fff" d="M16 32a16 16 0 1 0 0-32 16 16 0 0 0 0 32z"/><path fill="%234285F4" d="M28.56 13.78H16v5h7.19a6.19 6.19 0 0 1-2.67 3.99v3.33h4.3c3.34-3.1 4.46-7.93 3.74-12.32z"/><path fill="%2334A853" d="M16 29.33c3.6 0 6.61-1.2 8.81-3.23l-4.29-3.33A8.04 8.04 0 0 1 16 24.06a7.96 7.96 0 0 1-7.48-5.52H4.1v3.44A13.31 13.31 0 0 0 16 29.33z"/><path fill="%23FBBC05" d="M8.52 18.54a7.93 7.93 0 0 1 0-5.08v-3.44H4.1a13.18 13.18 0 0 0 0 11.96l4.42-3.44z"/><path fill="%23EA4335" d="M16 7.94c1.97 0 3.72.68 5.11 2l3.8-3.8A12.75 12.75 0 0 0 16 2.67c-5.21 0-9.71 3-11.9 7.35l4.42 3.44A7.96 7.96 0 0 1 16 7.94z"/></svg>\')!important}.i-amphtml-story-subscriptions-google-button-text,.i-amphtml-story-subscriptions-publisher-button-text{display:block!important;letter-spacing:0.01em!important;max-width:12.6em!important;text-align:initial!important;white-space:normal!important;margin-inline-end:1.3em!important;font-size:0.75em!important;font-weight:400!important;font-family:Google Sans,sans-serif!important;display:-webkit-box!important;-webkit-line-clamp:2!important;-webkit-box-orient:vertical!important;overflow:hidden!important}.i-amphtml-story-subscriptions-publisher-button-text{color:#fff!important}.i-amphtml-story-subscriptions-google-button-text{color:#5e5e5e!important}.i-amphtml-story-subscriptions-signin{display:block!important;margin-top:2.75em!important;margin-bottom:1.4em!important;font-size:0.7em!important}.i-amphtml-story-subscriptions-signin button{font-weight:600!important;cursor:pointer!important;padding:0!important;border:none!important;font-size:1em!important;font-family:Poppins,sans-serif!important;background-color:#fff!important}\n/*# sourceURL=/extensions/amp-story-subscriptions/0.1/amp-story-subscriptions.css*/')})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-story-subscriptions-0.1.mjs.map
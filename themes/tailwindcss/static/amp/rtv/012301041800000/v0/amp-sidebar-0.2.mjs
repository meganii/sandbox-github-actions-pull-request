;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-sidebar",ev:"0.2",l:!1,f:function(t,i){(()=>{function i(t){return t?Array.prototype.slice.call(t):[]}var s,{isArray:e}=Array,{hasOwnProperty:n,toString:h}=Object.prototype;function o(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function r(t){return 1==(null==t?void 0:t.nodeType)}function a(t,i,s,e,n,h,o,r,a,l,c){return t}function l(t){return(t.ownerDocument||t).defaultView}function c(t,i){return t.closest(i)}function u(t){return function(t,i){const s=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)!(function(t){let i;return"string"==typeof t?i=t:r(t)&&(i=t.tagName),!!i&&i.toLowerCase().startsWith("i-")}(e=i)||e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute("placeholder")||e.hasAttribute("fallback")||e.hasAttribute("overflow")))&&s.push(i);var e;return s}(t)}function f(t){const i=t.isConnected;if(void 0!==i)return i;let s=t;for(;s=d(s),s.host;)s=s.host;return s.nodeType===Node.DOCUMENT_NODE}function d(t){if(Node.prototype.getRootNode)return t.getRootNode();let i;for(i=t;i.parentNode&&(!(s=i)||"I-AMPHTML-SHADOW-ROOT"!=s.tagName&&(11!=s.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(s)));i=i.parentNode);var s;return i}function m(t){try{t.focus()}catch(t){}}function p(t){const i=Object.getOwnPropertyDescriptor(t,"message");if(null!=i&&i.writable)return t;const{message:s,stack:e}=t,n=new Error(s);for(const i in t)n[i]=t[i];return n.stack=e,n}function _(t){let i=null,s="";for(const t of arguments)t instanceof Error&&!i?i=p(t):(s&&(s+=" "),s+=t);return i?s&&(i.message=s+": "+i.message):i=new Error(s),i}function b(t){var i,s;null===(i=(s=self).__AMP_REPORT_ERROR)||void 0===i||i.call(s,t)}function v(t,...i){try{return t.apply(null,i)}catch(t){!function(t){const i=_.apply(null,arguments);setTimeout((()=>{throw b(i),i}))}(t)}}var A=["Webkit","webkit","Moz","moz","ms","O","o"],P={"getPropertyPriority":()=>"","getPropertyValue":()=>""};function g(t,i,e,n,h){const r=function(t,i,e){if(i.startsWith("--"))return i;s||(s=o());let n=s[i];if(!n||e){if(n=i,void 0===t[i]){const s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),e=function(t,i){for(let s=0;s<A.length;s++){const e=A[s]+i;if(void 0!==t[e])return e}return""}(t,s);void 0!==t[e]&&(n=e)}e||(s[i]=n)}return n}(t.style,i,h);if(!r)return;const a=n?e+n:e;t.style.setProperty(function(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return A.some((t=>i.startsWith(t+"-")))?`-${i}`:i}(r),a)}function E(t,i){for(const s in i)g(t,s,i[s])}function M(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function w(t,i){return t.getComputedStyle(i)||P}var T=/vertical/,I=new WeakMap,R=new WeakMap,y=new WeakMap;function V(t){let i=I.get(t);return i||(i=new t.ResizeObserver(k),I.set(t,i)),i}function k(t){const i=new Set;for(let s=t.length-1;s>=0;s--){const e=t[s],{target:n}=e;if(i.has(n))continue;i.add(n);const h=R.get(n);if(h){y.set(n,e);for(let t=0;t<h.length;t++){const{callback:i,type:s}=h[t];x(s,i,e)}}}}function x(t,i,s){if(0==t){const{contentRect:t}=s,{height:e,width:n}=t;v(i,{width:n,height:e})}else if(1==t){const{borderBoxSize:t}=s;let e;if(t)e=t.length>0?t[0]:{inlineSize:0,blockSize:0};else{const{target:t}=s,i=l(t),n=T.test(w(i,t).writingMode),{offsetHeight:h,offsetWidth:o}=t;let r,a;n?(a=o,r=h):(r=o,a=h),e={inlineSize:r,blockSize:a}}v(i,e)}}var S=[],O="__AMP_MODAL_SAVED_TAB_INDEX";function j(t){const i=[];for(let s=t;s;s=s.parentNode||s.host)i.push(s);return i}function D(t,i,s){null===s||null==s?t.removeAttribute(i):t.setAttribute(i,s)}var X="i-amphtml-element",C=t=>t.unmount();function $(t,i,s,e){if(i&&t.classList.contains(X)){const i=t;if(v(e,i),!s){const t=i.getPlaceholder();return void(t&&$(t,!0,!1,e))}}const n=t.getElementsByClassName(X);let h=null;for(let t=0;t<n.length;t++){const i=n[t];if(s)v(e,i);else{h=h||[];let t=!1;for(let s=0;s<h.length;s++)if(h[s].contains(i)){t=!0;break}t||(h.push(i),v(e,i))}}}function z(t,i,s){return i in t?Object.defineProperty(t,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[i]=s,t}function F(t,i){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.push.apply(s,e)}return s}function B(t){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?F(Object(s),!0).forEach((function(i){z(t,i,s[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}var L=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function N(t,i=""){try{return decodeURIComponent(t)}catch(t){return i}}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var W,Y=self.__AMP_LOG;function G(t){return Y.user||(Y.user=H()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(Y.user.win,t)?Y.userForEmbed||(Y.userForEmbed=H()):Y.user}function H(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function U(t,i,s,e,n,h,o,r,a,l,c){return t}function q(t,i,s,e,n,h,o,r,a,l,c){return G().assert(t,i,s,e,n,h,o,r,a,l,c)}function J(t,i){return it(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function Z(t,i){return it(tt(Q(t)),i)}function K(t,i){const s=tt(Q(t));return st(s,i)?it(s,i):null}function Q(t){return t.nodeType?(i=l(t),J(i,"ampdoc")).getAmpDoc(t):t;var i}function tt(t){const i=Q(t);return i.isSingleDoc()?i.win:i}function it(t,i){U(st(t,i));const s=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return s.obj||(U(s.ctor),U(s.context),s.obj=new s.ctor(s.context),U(s.obj),s.context=null,s.resolve&&s.resolve(s.obj)),s.obj}function st(t,i){const s=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!s||!s.ctor)}var et,nt="__AMP__EXPERIMENT_TOGGLES",ht=t=>Z(t,"owners"),ot=t=>it(t,"timer");function rt(t,i){const s=(":not([toolbar]) [autoscroll]",i.querySelector(function(t,i){return t.replace(/^|,/g,"$&:scope ")}(":not([toolbar]) [autoscroll]")));if(!s)return;const e=w(t.win,i)["overflow-y"];var n;"scroll"==e||"auto"==e?(n=t,Z(n,"viewport")).animateScrollWithinParent(s,i,"center",0):G().error("AMP-SIDEBAR","for 'autoscroll', 'nav [toolbar]' element must be set to overflow\n        'scroll' or 'auto' for 'autoscroll' to work.")}function at(t,i){const s=ot(t);return s.promise(1).then((()=>s.promise(i)))}var lt=class{constructor(){this.Fn=null}add(t){return this.Fn||(this.Fn=[]),this.Fn.push(t),()=>{this.remove(t)}}remove(t){this.Fn&&function(t,i){const s=t.indexOf(i);-1!=s&&t.splice(s,1)}(this.Fn,t)}removeAll(){this.Fn&&(this.Fn.length=0)}fire(t){if(this.Fn)for(const i of this.Fn.slice())i(t)}getHandlerCount(){var t,i;return null!==(t=null===(i=this.Fn)||void 0===i?void 0:i.length)&&void 0!==t?t:0}},ct="__AMP_Gestures",ut=class{static get(t,i=!1,s=!1){let e=t[ct];return e||(e=new ut(t,i,s),t[ct]=e),e}constructor(t,i=!1,s=!1){this._n=t,this.hI=[],this.t_=[],this.gi=[],this.lI=[],this.pI=null;const e=function(t){if(void 0!==et)return et;et=!1;try{const i={get passive(){return et=!0,!1}};t.addEventListener("test-options",null,i),t.removeEventListener("test-options",null,i)}catch(t){}return et}(t.ownerDocument.defaultView);this.mI=i||e,this.cI=s,this.uI=!1,this.Ar=new class{constructor(t,i,s){this.Qe=ot(t),this.Xe=i,this.Ze=s||0,this.pr=-1,this.mr=0,this.Ht=!1,this._r=()=>{this.Ar()}}isPending(){return-1!=this.pr}schedule(t){let i=t||this.Ze;this.Ht&&i<10&&(i=10);const s=Date.now()+i;return(!this.isPending()||s-this.mr<-10)&&(this.cancel(),this.mr=s,this.pr=this.Qe.delay(this._r,i),!0)}Ar(){this.pr=-1,this.mr=0,this.Ht=!0,this.Xe(),this.Ht=!1}cancel(){this.isPending()&&(this.Qe.cancel(this.pr),this.pr=-1)}}(l(t),this.vg.bind(this)),this.dI=new lt,this.fI=Object.create(null),this._I=this.sm.bind(this),this.gI=this.rm.bind(this),this.yI=this.nm.bind(this),this.AI=this.h_.bind(this),this._n.addEventListener("touchstart",this._I,!!e&&{passive:!0}),this._n.addEventListener("touchend",this.gI),this._n.addEventListener("touchmove",this.yI,!!e&&{passive:!0}),this._n.addEventListener("touchcancel",this.AI),this.bI=!1}cleanup(){this._n.removeEventListener("touchstart",this._I),this._n.removeEventListener("touchend",this.gI),this._n.removeEventListener("touchmove",this.yI),this._n.removeEventListener("touchcancel",this.AI),delete this._n[ct],this.Ar.cancel()}onGesture(t,i){const s=new t(this),e=s.getType();let n=this.fI[e];return n||(this.hI.push(s),n=new lt,this.fI[e]=n),n.add(i)}removeGesture(t){const i=new t(this).getType(),s=this.fI[i];if(s){s.removeAll();const t=function(t,s){for(let s=0;s<t.length;s++)if(t[s].getType()==i)return s;return-1}(this.hI);return!(t<0||(this.hI.splice(t,1),this.gi.splice(t,1),this.lI.splice(t,1),this.t_.splice(t,1),delete this.fI[i],0))}return!1}onPointerDown(t){return this.dI.add(t)}sm(t){const i=Date.now();this.uI=!1,this.dI.fire(t);for(let s=0;s<this.hI.length;s++)this.gi[s]||(this.lI[s]&&this.lI[s]<i&&this.o_(s),this.hI[s].onTouchStart(t)&&this.u_(s));this.vI(t)}nm(t){const i=Date.now();for(let s=0;s<this.hI.length;s++)this.t_[s]&&(this.lI[s]&&this.lI[s]<i?this.o_(s):this.hI[s].onTouchMove(t)||this.o_(s));this.vI(t)}rm(t){const i=Date.now();for(let s=0;s<this.hI.length;s++){if(!this.t_[s])continue;if(this.lI[s]&&this.lI[s]<i){this.o_(s);continue}this.hI[s].onTouchEnd(t);const e=!this.lI[s],n=this.lI[s]<i;this.pI==this.hI[s]||!e&&!n||this.o_(s)}this.vI(t)}h_(t){for(let t=0;t<this.hI.length;t++)this.TI(t);this.vI(t)}Wp(t,i){if(this.pI)return void t.acceptCancel();const s=Date.now();for(let e=0;e<this.hI.length;e++)this.hI[e]==t&&(this.gi[e]=s+i,this.lI[e]=0);this.bI=!0}EI(t,i){if(this.pI)return void t.acceptCancel();const s=Date.now();for(let e=0;e<this.hI.length;e++)this.hI[e]==t&&(this.lI[e]=s+i)}xI(t){this.pI==t&&(this.pI=null,this.uI=!0)}MI(t,i,s){a(this.pI==t);const e=this.fI[t.getType()];e&&e.fire(new class{constructor(t,i,s,e){this.type=t,this.data=i,this.time=s,this.event=e}}(t.getType(),i,Date.now(),s))}vI(t){let i=!!this.pI||this.uI;if(this.uI=!1,!i){const t=Date.now();for(let s=0;s<this.hI.length;s++)if(this.gi[s]||this.lI[s]&&this.lI[s]>=t){i=!0;break}}i?(t.stopPropagation(),this.mI||t.preventDefault()):this.cI&&t.stopPropagation(),this.bI&&(this.bI=!1,this.vg())}vg(){const t=Date.now();let i=-1;for(let s=0;s<this.hI.length;s++)this.gi[s]?(-1==i||this.gi[s]>this.gi[i])&&(i=s):this.lI[s]&&this.lI[s]<t&&this.o_(s);if(-1==i)return;let s=0;for(let i=0;i<this.hI.length;i++)!this.gi[i]&&this.t_[i]&&(s=Math.max(s,this.lI[i]-t));s<2?this.wI(i):this.Ar.schedule(s)}wI(t){const i=this.hI[t];for(let i=0;i<this.hI.length;i++)i!=t&&this.TI(i);this.gi[t]=0,this.lI[t]=0,this.pI=i,i.acceptStart()}u_(t){this.t_[t]=!0,this.lI[t]=0}o_(t){this.t_[t]=!1,this.lI[t]=0,this.gi[t]||this.hI[t].acceptCancel()}TI(t){this.gi[t]=0,this.o_(t)}};function ft(t,i,s){i<1&&(i=1);const e=t/i,n=.5+Math.min(i/33.34,.5);return e*n+s*(1-n)}Math.round(-16.67/Math.log(.95));var dt="backward",mt="horizontal";function pt(t){const i=t.indexOf("#");return-1==i?t:t.substring(0,i)}new Set(["c","v","a","ad"]);var _t="amp-sidebar toolbar",bt="left",vt="right",At=class extends t.BaseElement{static prerenderAllowed(){return!0}constructor(t){super(t),this.Tc=null,this.Da=null,this.TW=null,this.CD=null,this.Uu=this.win.document,this.DD=this.Uu.documentElement,this.bL=null,this.IW=[];const i=J(this.win,"platform");this.PB=i.isIos(),this.fv=i.isSafari(),this.xB=-1,this.RW=!1,this._B=null,this.aB=null,this.yW=0,this.VW=!1,this.kW=null,this.xW=new class{constructor(t,i,s){this.i=t,this.aF=i,this.SW=s,this.DW=dt,this.XW=mt,this.$W=null,this.OW=null}zW(){return this.XW==mt?this.$W.offsetWidth:this.$W.offsetHeight}FW(t,i){const s=this.XW==mt?t:i;return this.DW==dt?-Math.min(s,0):Math.max(s,0)}jW(t,i=""){const s=this.DW==dt?-t:t;return`translate(${this.XW==mt?`${s}${i}`:0}, ${this.XW==mt?0:`${s}${i}`})`}startSwipe(t){const{direction:i,mask:s,orientation:e,swipeElement:n}=t;this.$W=n,this.OW=s,this.DW=i,this.XW=e}swipeMove(t){this.BW(t,!1)}endSwipe(t){this.BW(t,!0)}LW(t,i){const s=.75*i;return E(this.$W,{transform:this.jW(t,"px"),transition:`${s}ms transform cubic-bezier(0.15, .55, .3, 0.95)`}),at(this.i,s)}WW(t){const i=.8*t;return this.aF((()=>{E(this.$W,{transform:this.jW(0),transition:`${i}ms transform ease-in`}),E(this.OW,{opacity:"",transition:`${i}ms opacity ease-in`})})).then((()=>at(this.i,i)))}YW(t){const i=.75*(this.zW()-t);return this.aF((()=>{E(this.$W,{transform:this.jW(100,"%"),transition:`${i}ms transform ease-out`}),E(this.OW,{opacity:0,transition:`${i}ms opacity ease-out`})})).then((()=>at(this.i,i))).then((()=>this.SW()))}HW(t="",i=""){E(this.$W,{transform:t,transition:""}),E(this.OW,{opacity:i,transition:""})}NW(t,i,s,e){const n=22.5*t+s,h=22.5*i+e,o=this.FW(n,h),r=this.FW(t,i),a=.5*this.zW();return o<a&&r<.65?this.LW(o,r).then((()=>this.WW(o))):this.YW(o)}BW(t,i){const{deltaX:s,deltaY:e,velocityX:n,velocityY:h}=t;this.aF((()=>{if(i)return void this.NW(n,h,s,e).then((()=>{this.HW()}));const t=this.FW(s,e),o=t/this.zW(),r=Math.max(0,1-o);this.HW(this.jW(t,"px"),r)}))}}(this.win,(t=>this.mutateElement(t)),(()=>this.GW(!0,3))),this.Pb=this.Pb.bind(this),this.ZW=null}buildCallback(){q(function(t,i){const s=function(t){var i,s,n,h,r;if(t[nt])return t[nt];t[nt]=o();const l=t[nt];a(l);const c=B(B({},null!==(i=t.AMP_CONFIG)&&void 0!==i?i:{}),null!==(s=t.AMP_EXP)&&void 0!==s?s:(u=(null===(n=t.__AMP_EXP)||void 0===n?void 0:n.textContent)||"{}",JSON.parse(u)));var u;for(const t in c){const i=c[t];"number"==typeof i&&i>=0&&i<=1&&(l[t]=Math.random()<i)}const f=null===(h=t.AMP_CONFIG)||void 0===h?void 0:h["allow-doc-opt-in"];if(e(f)&&f.length){const i=t.document.head.querySelector('meta[name="amp-experiments-opt-in"]');if(i){var d;const t=(null===(d=i.getAttribute("content"))||void 0===d?void 0:d.split(","))||[];for(const i of t)f.includes(i)&&(l[i]=!0)}}Object.assign(l,function(t){var i;let s="";try{var e;"localStorage"in t&&(s=null!==(e=t.localStorage.getItem("amp-experiment-toggles"))&&void 0!==e?e:"")}catch(t){}const n=(null===(i=s)||void 0===i?void 0:i.split(/\s*,\s*/g))||[],h=o();for(const t of n)t&&("-"==t[0]?h[t.substr(1)]=!1:h[t]=!0);return h}(t));const m=null===(r=t.AMP_CONFIG)||void 0===r?void 0:r["allow-url-opt-in"];if(e(m)&&m.length){const i=function(t){const i=o();if(!t)return i;let s;for(;s=L.exec(t);){const t=N(s[1],s[1]),e=s[2]?N(s[2].replace(/\+/g," "),s[2]):"";i[t]=e}return i}(t.location.originalHash||t.location.hash);for(const t of m){const s=i[`e-${t}`];"1"==s&&(l[t]=!0),"0"==s&&(l[t]=!1)}}return l}(t);return!!s["amp-sidebar-v2"]}(this.win),"Turning on the amp-sidebar-v2 experiment is necessary to use the new sidebar component.");const{element:t}=this;var s;t.classList.add("i-amphtml-overlay"),t.classList.add("i-amphtml-scrollable"),this.bL=t.getAttribute("side"),this.Tc=this.getViewport(),this.Da=(t=>K(t,"action"))(t),this.element.parentNode!=this.element.ownerDocument.body&&this.element.parentNode!=this.getAmpDoc().getBody()&&this.user().warn(_t,`${_t} is recommended to be a direct child of the <body> element to preserve a logical DOM order.`),this.bL!=bt&&this.bL!=vt&&(this.bL=this.JW("rtl"==((s=this.Uu).body.getAttribute("dir")||s.documentElement.getAttribute("dir")||"ltr")?vt:bt),t.setAttribute("side",this.bL)),this.getAmpDoc().whenReady().then((()=>{i(t.querySelectorAll("nav[toolbar]")).forEach((t=>{try{this.IW.push(new class{constructor(t,i){this.Yt=i,this.QW=t,this.ji=i.getAmpDoc(),this.Dq=this.QW.getAttribute("toolbar"),this.Cq=null,this.zq=void 0,this.Bq=!1,this.QW.classList.add("amp-sidebar-toolbar-target-hidden"),this.Lq()}onLayoutChange(){this.ji.win.matchMedia(this.Dq).matches?this.Wq():this.Yq()}Lq(){this.Cq=this.QW.cloneNode(!0);const t=q(this.QW.getAttribute("toolbar-target"),'"toolbar-target" is required',this.QW),i=this.ji.getElementById(t);if(!i)throw G().createError(`Could not find the toolbar-target element with an id: ${t}`);this.zq=i,this.Cq.classList.add("i-amphtml-toolbar"),M(this.zq,!1)}Hq(){return this.Bq}Wq(){return this.Hq()?W||(W=Promise.resolve(void 0)):this.Yt.mutateElement((()=>{this.zq&&(M(this.zq,!0),this.zq.contains(this.Cq)||this.zq.appendChild(this.Cq),this.QW.classList.add("amp-sidebar-toolbar-target-shown"),this.QW.classList.remove("amp-sidebar-toolbar-target-hidden"),this.Bq=!0,rt(this.ji,this.Cq))}))}Yq(){this.Hq()&&this.Yt.mutateElement((()=>{this.zq&&(M(this.zq,!1),this.QW.classList.add("amp-sidebar-toolbar-target-hidden"),this.QW.classList.remove("amp-sidebar-toolbar-target-shown"),this.Bq=!1)}))}}(t,this))}catch(t){this.user().error(_t,"Failed to instantiate toolbar",t)}})),this.Pb()})),this.KW(),t.addEventListener("amp:dom-update",(()=>{this.KW()})),this.PB&&this.Gq(),t.hasAttribute("role")||t.setAttribute("role","dialog"),t.setAttribute("aria-modal","false"),t.tabIndex=-1,this.DD.addEventListener("keydown",(t=>{"Escape"==t.key&&this.gR(3)&&t.preventDefault()})),this._B=this.LB(),this._B||(this._B=this.createScreenReaderCloseButton(),t.insertBefore(this._B,this.element.firstChild)),t.appendChild(this.createScreenReaderCloseButton()),this.registerDefaultAction((t=>{const{caller:i,trust:s}=t;this.RL(s,i)}),"open"),this.registerAction("close",(t=>{this.gR(t.trust)})),this.registerAction("toggle",(t=>{const{caller:i,trust:s}=t;this.VW?this.gR(s):this.RL(s,i)})),t.addEventListener("click",(i=>{const s=c(i.target,"A");if(s&&s.href){const i=(t=>K(t,"url"))(t).parse(s.href),e=this.getAmpDoc().getUrl();if(pt(s.href)!=pt(e))return;i.hash&&this.gR(3)}}),!0),this.fY(this.element)}attachedCallback(){this.ZW=this.Tc.onResize(function(t,i,s){let e=0,n=0,h=null;function o(){e=0;const s=100-(t.Date.now()-n);var r;s>0?e=t.setTimeout(o,s):(r=h,h=null,i.apply(null,r))}return function(...i){n=t.Date.now(),h=i,e||(e=t.setTimeout(o,100))}}(this.win,this.Pb)),this.Pb()}detachedCallback(){this.ZW&&(this.ZW(),this.ZW=null)}KW(){if(this.kW)return;const t=this.element.querySelector("amp-nested-menu");var i;t&&((i=this.win,J(i,"extensions")).installExtensionForDoc(this.getAmpDoc(),"amp-nested-menu"),this.kW=t)}LB(){const t=this.element.querySelectorAll("[on]");for(let i=0;i<t.length;i++){const s=t[i],e=this.Da.hasResolvableActionForTarget(s,"tap",this.element,U(s.parentElement)),n=c(s,"[toolbar]");if(e&&!n)return s}return null}createScreenReaderCloseButton(){const t=this.element.getAttribute("data-close-button-aria-label")||"Close the sidebar",i=this.Uu.createElement("button");return i.textContent=t,i.classList.add("i-amphtml-screen-reader"),i.tabIndex=-1,i.addEventListener("click",(()=>{this.gR(3)})),i}Pb(){this.getAmpDoc().whenReady().then((()=>{this.IW.forEach((t=>{t.onLayoutChange()}))}))}qq(t,i){this.TW=t;const s=()=>{this.TW===t&&this.mutateElement(t)};i?ot(this.win).delay(s,i):s()}Uq(t){M(this.element,!0),M(this.Zq(),!0),this.Tc.addToFixedLayer(this.element,!0),this.mutateElement((()=>{(function(t){a(S.every((i=>i.element!==t))),a(f(t));const s=function(t){const s=[],e=j(t);for(let t=0;t<e.length;t++){const n=e[t];n.parentNode&&i(n.parentNode.children).filter((t=>t!=n)).forEach((t=>s.push(t)))}return s}(t),e=j(t).filter(r),n=function(t){const i=[];let s=t;for(;s;){const t=d(s),e=t.querySelectorAll(["a[href]","area[href]","button","details summary","iframe","input","select","textarea","[contenteditable]","[draggable]","[tabindex]"].join(","));Array.prototype.push.apply(i,e),s=t.host}return i}(t),h=n.filter((i=>t.contains(i)&&void 0!==i[O])),o=n.filter((i=>!t.contains(i)&&void 0===i[O])),l=s.concat(e).map((t=>({element:t,prevValue:t.getAttribute("aria-hidden")})));e.forEach((t=>t.removeAttribute("aria-hidden"))),s.forEach((t=>t.setAttribute("aria-hidden","true"))),o.forEach((t=>{t[O]=t.getAttribute("tabindex"),t.setAttribute("tabindex","-1")})),h.forEach((t=>{a(void 0!==t[O]),D(t,"tabindex",t[O])})),S.push({element:t,hiddenElementInfos:l,focusableExternalElements:o,focusableInternalElements:h})})(this.element),this.element.setAttribute("aria-modal","true")})),this.PB&&this.fv&&this.Jq(),this.element.scrollTop=1,this.element.setAttribute("open",""),this.Zq().setAttribute("open",""),this.qq((()=>this.Kq(t)),350),rt(this.getAmpDoc(),this.element)}Kq(t){const i=u(this.element),s=ht(this.element);s.scheduleLayout(this.element,i),s.scheduleResume(this.element,i),this.Qq()||m(U(this._B)),this.Rb("sidebarOpen",t),this.element.setAttribute("i-amphtml-sidebar-opened",""),this.Zq().setAttribute("i-amphtml-sidebar-opened",""),this.setAsContainer()}tZ(t,i){this.Zq().removeAttribute("open"),this.Zq().removeAttribute("i-amphtml-sidebar-opened"),this.mutateElement((()=>{!function(t){const i=S.pop();a(i);const{element:s,focusableExternalElements:e,focusableInternalElements:n,hiddenElementInfos:h}=i;a(f(t)),a(s===t),h.forEach((({element:t,prevValue:i})=>D(t,"aria-hidden",i))),n.forEach((t=>t.setAttribute("tabindex","-1"))),e.forEach((t=>{a(void 0!==t[O]),D(t,"tabindex",t[O]),t[O]=void 0}))}(this.element),this.element.setAttribute("aria-modal","false")})),this.element.removeAttribute("open"),this.element.removeAttribute("i-amphtml-sidebar-opened"),this.qq((()=>this.iZ(i)),t?0:350)}iZ(t){M(this.element,!1),M(this.Zq(),!1),ht(this.element).schedulePause(this.element,u(this.element)),-1!=this.xB&&(this.WY().pop(this.xB),this.xB=-1),this.Rb("sidebarClose",t),this.removeAsContainer(),function(t,i=!0){!function(t,i,s,n){const h=e(o=t)?o:[o];var o;for(let t=0;t<h.length;t++)$(h[t],i,!0,n)}(t,i,0,C)}(this.element,!1)}RL(t,i){this.VW||(this.VW=!0,this.Tc.enterOverlayMode(),this.qq((()=>this.Uq(t))),this.WY().push((()=>this.gR(t))).then((t=>{this.xB=t})),i&&(this.aB=i,this.yW=this.Tc.getScrollTop()),function(t,i,s){const e=t.ownerDocument.defaultView;if(!e)return;let n=R.get(t);if(n||(n=[],R.set(t,n),V(e).observe(t)),!n.some((t=>t.callback===s&&0===t.type))){n.push({type:0,callback:s});const i=y.get(t);i&&setTimeout((()=>x(0,s,i)))}}(this.element,0,this.Pb))}gR(t){return this.GW(!1,t)}GW(t,i){if(!this.VW)return!1;this.VW=!1,this.Tc.leaveOverlayMode();const s=this.yW==this.Tc.getScrollTop(),e=this.element.contains(this.Uu.activeElement);return this.qq((()=>this.tZ(t,i))),t&&(M(this.element,!1),M(this.Zq(),!1)),this.aB&&e&&s&&(this.Qq()||m(this.aB)),function(t,i,s){const e=R.get(t);if(e&&(function(t,i){const e=[];let n=0;for(let i=0;i<t.length;i++){const o=t[i];(h=o).callback===s&&0===h.type?e.push(o):(n<i&&(t[n]=o),n++)}var h;n<t.length&&(t.length=n)}(e),0==e.length)){R.delete(t),y.delete(t);const i=t.ownerDocument.defaultView;i&&V(i).unobserve(t)}}(this.element,0,this.Pb),!0}fY(t){ut.get(t,!1,!0).onGesture(class extends class extends class{constructor(t,i){this.BV=t,this.S_=i}getType(){return this.BV}signalReady(t){this.S_.Wp(this,t)}signalPending(t){this.S_.EI(this,t)}signalEnd(){this.S_.xI(this)}signalEmit(t,i){this.S_.MI(this,t,i)}acceptStart(){}acceptCancel(){}onTouchStart(t){return!1}onTouchMove(t){return!1}onTouchEnd(t){}}{constructor(t,i,s,e){super(t,i),this.HV=s,this.YV=e,this.pI=!1,this.GV=0,this.WV=0,this.qV=0,this.XV=0,this.KV=0,this.ZV=0,this.Ch=0,this.JV=0,this.QV=0,this.pk=0,this.mk=0}onTouchStart(t){const{touches:i}=t;return!!(this.pI&&i&&i.length>1)||!(!i||1!=i.length)&&(this.Ch=Date.now(),this.GV=i[0].clientX,this.WV=i[0].clientY,!0)}onTouchMove(t){const{touches:i}=t;if(i&&i.length>=1){const{clientX:s,clientY:e}=i[0];if(this.qV=s,this.XV=e,this.pI)this.fk(!1,!1,t);else{const t=Math.abs(s-this.GV),i=Math.abs(e-this.WV);if(this.HV&&this.YV)(t>=8||i>=8)&&this.signalReady(-10);else if(this.HV){if(t>=8&&t>i)this.signalReady(-10);else if(i>=8)return!1}else{if(!this.YV)return!1;if(i>=8&&i>t)this.signalReady(-10);else if(t>=8)return!1}}return!0}return!1}onTouchEnd(t){const{touches:i}=t;i&&0==i.length&&this._k(t)}acceptStart(){this.pI=!0,this.KV=this.GV,this.ZV=this.WV,this.QV=this.Ch,this.GV=this.qV,this.WV=this.XV,this.fk(!0,!1,null)}acceptCancel(){this.pI=!1}fk(t,i,s){this.JV=Date.now();const e=this.JV-this.QV;if(!i&&e>4||i&&e>16){const t=ft(this.qV-this.KV,e,this.pk),s=ft(this.XV-this.ZV,e,this.mk);(!i||e>32||0!=t||0!=s)&&(this.pk=Math.abs(t)>1e-4?t:0,this.mk=Math.abs(s)>1e-4?s:0),this.KV=this.qV,this.ZV=this.XV,this.QV=this.JV}this.signalEmit({first:t,last:i,time:this.JV,deltaX:this.qV-this.GV,deltaY:this.XV-this.WV,startX:this.GV,startY:this.WV,lastX:this.qV,lastY:this.XV,velocityX:this.pk,velocityY:this.mk},s)}_k(t){this.pI&&(this.pI=!1,this.fk(!1,!0,t),this.signalEnd())}}{constructor(t){super("swipe-x",t,!0,!1)}},(t=>{const{data:i}=t;this.sZ(i)}))}sZ(t){t.first?this.xW.startSwipe({swipeElement:this.element,mask:this.CD,direction:this.bL==bt?dt:"forward",orientation:mt}):t.last?this.xW.endSwipe(t):this.xW.swipeMove(t)}JW(t){return c(this.element,"amp-story")?t==bt?vt:bt:t}Zq(){if(!this.CD){const t=this.Uu.createElement("div");t.classList.add("amp-sidebar-mask","i-amphtml-sidebar-mask"),t.addEventListener("click",(()=>{this.gR(3)})),this.getAmpDoc().getBody().appendChild(t),t.addEventListener("touchmove",(t=>{t.preventDefault()})),this.fY(t),this.CD=t}return this.CD}Gq(){this.element.addEventListener("scroll",(t=>{this.VW&&(this.element.scrollTop<1?(this.element.scrollTop=1,t.preventDefault()):this.element.scrollHeight==this.element.scrollTop+this.element.offsetHeight&&(this.element.scrollTop=this.element.scrollTop-1,t.preventDefault()))}))}Jq(){if(!this.RW){const t=this.Uu.createElement("div");E(t,{"height":"54px","width":"100%","background-color":"transparent"}),this.element.appendChild(t),this.RW=!0}}WY(){return Z(this.getAmpDoc(),"history")}Rb(t,i){const s=function(t,i,s,e){const n={detail:{}};return Object.assign(n,void 0),new t.CustomEvent(i,n)}(this.win,`${_t}.${t}`);this.Da.trigger(this.element,t,s,i)}Qq(){return this.PB&&(t=this.element,Z(t,"viewer")).isEmbedded();var t}};t.registerElement("amp-sidebar",At,"amp-sidebar{--story-page-vh:1vh;position:fixed!important;top:0;max-height:100vh!important;height:100vh;max-width:80vw;background-color:#efefef;min-width:45px!important;outline:none;overflow-x:hidden!important;overflow-y:auto!important;z-index:2147483647;-webkit-overflow-scrolling:touch;will-change:transform}amp-sidebar[side=left]{left:0!important;transform:translateX(-100%);animation-name:i-amphtml-sidebar-slide-out-left}amp-sidebar[side=left][open]{animation-name:i-amphtml-sidebar-slide-in-left}amp-sidebar[side=right]{right:0!important;transform:translateX(100%);animation-name:i-amphtml-sidebar-slide-out-right}amp-sidebar[side=right][open]{animation-name:i-amphtml-sidebar-slide-in-right}amp-sidebar[side][i-amphtml-sidebar-opened]{transform:none;animation:none}.i-amphtml-sidebar-mask,amp-sidebar[side]{animation-duration:233ms;animation-timing-function:cubic-bezier(0,0,.21,1);animation-fill-mode:forwards}.i-amphtml-toolbar>ol,.i-amphtml-toolbar>ul{display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;-ms-flex-wrap:wrap;flex-wrap:wrap;overflow:auto;list-style-type:none;padding:0;margin:0}.amp-sidebar-mask,.i-amphtml-sidebar-mask{background-color:rgba(0,0,0,0.5)}.i-amphtml-sidebar-mask{position:fixed!important;top:0!important;left:0!important;width:100vw!important;height:100vh!important;background-image:none!important;animation-name:i-amphtml-sidebar-mask-fade-out;z-index:2147483646}.i-amphtml-sidebar-mask[open]{animation-name:i-amphtml-sidebar-mask-fade-in}.i-amphtml-sidebar-mask[i-amphtml-sidebar-opened]{animation:none}@keyframes i-amphtml-sidebar-slide-in-left{0%{transform:translateX(-100%)}to{transform:translateX(0)}}@keyframes i-amphtml-sidebar-slide-out-left{0%{transform:translateX(0)}to{transform:translateX(-100%)}}@keyframes i-amphtml-sidebar-slide-in-right{0%{transform:translateX(100%)}to{transform:translateX(0)}}@keyframes i-amphtml-sidebar-slide-out-right{0%{transform:translateX(0)}to{transform:translateX(100%)}}@keyframes i-amphtml-sidebar-mask-fade-in{0%{opacity:0}to{opacity:1}}@keyframes i-amphtml-sidebar-mask-fade-out{0%{opacity:1}to{opacity:0}}\n/*# sourceURL=/extensions/amp-sidebar/0.2/amp-sidebar.css*/")})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-sidebar-0.2.mjs.map
;
(self.AMP=self.AMP||[]).push({m:0,v:"2301041800000",n:"amp-onetap-google",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,r){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,r)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}Array.isArray;var o=Object.prototype,u=(o.hasOwnProperty,o.toString);function f(t){var n=Object.create(null);return t&&Object.assign(n,t),n}var s,c=["Webkit","webkit","Moz","moz","ms","O","o"];function a(t,n){void 0===n&&(n=t.hasAttribute("hidden")),n?t.removeAttribute("hidden"):t.setAttribute("hidden","")}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var l=self.__AMP_LOG;function h(t,n){throw new Error("failed to call initLogConstructor")}function v(t){return l.user||(l.user=p()),function(t,n){return n&&n.ownerDocument.defaultView!=t}(l.user.win,t)?l.userForEmbed||(l.userForEmbed=p()):l.user}function p(t){return h()}function m(t,n,r,e,i,o,u,f,s,c,a){return t}function d(t,n,r,e,i,o,u,f,s,c,a){return v().assert(t,n,r,e,i,o,u,f,s,c,a)}var b=function(){var t=this;this.promise=new Promise((function(n,r){t.resolve=n,t.reject=r}))};function y(t,n){return x(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function g(t,n){var r=j(_(t));return S(r,n)?x(r,n):null}function w(t,n){return k(j(t),n)}function _(t){return t.nodeType?(r=t,n=(r.ownerDocument||r).defaultView,y(n,"ampdoc")).getAmpDoc(t):t;var n,r}function j(t){var n=_(t);return n.isSingleDoc()?n.win:n}function x(t,n){m(S(t,n));var r=O(t)[n];return r.obj||(m(r.ctor),m(r.context),r.obj=new r.ctor(r.context),m(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}function k(t,n){var r=O(t)[n];return r?r.promise?r.promise:(x(t,n),r.promise=Promise.resolve(r.obj)):null}function O(t){var n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}function S(t,n){var r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}var R,E=function(t){return function(t,n,r,e){var i=w(t,n);if(i)return i;var o=_(t);return o.whenExtensionsKnown().then((function(){var t=o.getExtensionVersion(r);return t?y(o.win,"extensions").waitForExtension(r,t):null})).then((function(r){return r?function(t,n){return function(t,n){var r=k(t,n);if(r)return r;var e,i,o,u,f=O(t);return f[n]=(i=(e=new b).promise,o=e.reject,u=e.resolve,i.catch((function(){})),{obj:null,promise:i,resolve:u,reject:o,context:null,ctor:null}),f[n].promise}(j(t),n)}(t,n):null}))}(t,"subscriptions","amp-subscriptions")};function P(t,n,r,e){return function(t,n,r,e){var i=t,o=r,u=function(t){try{return o(t)}catch(t){var n,r;throw null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t),t}},f=function(){if(void 0!==R)return R;R=!1;try{var t={get capture(){return R=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return R}(),s=!(null==e||!e.capture);return i.addEventListener(n,u,f?e:s),function(){null==i||i.removeEventListener(n,u,f?e:s),o=null,i=null,u=null}}(t,n,r,e)}var z,A,B=function(){function t(t){this.Lt=t,this.Wt=0,this.Kt=0,this.Qt=f()}var n=t.prototype;return n.has=function(t){return!!this.Qt[t]},n.get=function(t){var n=this.Qt[t];if(n)return n.access=++this.Kt,n.payload},n.put=function(t,n){this.has(t)||this.Wt++,this.Qt[t]={payload:n,access:this.Kt},this.Xt()},n.Xt=function(){if(!(this.Wt<=this.Lt)){var t,n=this.Qt,r=this.Kt+1;for(var e in n){var i=n[e].access;i<r&&(r=i,t=e)}void 0!==t&&(delete n[t],this.Wt--)}},t}(),L=(new Set(["c","v","a","ad"]),function(t){return"string"==typeof t?function(t,n){return z||(z=self.document.createElement("a"),A=self.__AMP_URL_CACHE||(self.__AMP_URL_CACHE=new B(100))),function(t,n,r){if(r&&r.has(n))return r.get(n);t.href=n,t.protocol||(t.href=t.href);var e,i={href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:"0"==t.port?"":t.port,pathname:t.pathname,search:t.search,hash:t.hash,origin:null};"/"!==i.pathname[0]&&(i.pathname="/"+i.pathname),("http:"==i.protocol&&80==i.port||"https:"==i.protocol&&443==i.port)&&(i.port="",i.host=i.hostname),e=t.origin&&"null"!=t.origin?t.origin:"data:"!=i.protocol&&i.host?i.protocol+"//"+i.host:i.href,i.origin=e;var o=i;return r&&r.put(n,o),o}(z,t,A)}(t):t});function N(t){return"https:"==(t=L(t)).protocol||"localhost"==t.hostname||"127.0.0.1"==t.hostname||(r=".localhost",(e=(n=t.hostname).length-r.length)>=0&&n.indexOf(r,e)==e);var n,r,e}var T="amp-onetap-google",U="onetap_google",C=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}(b,t);var e,o,p=(e=b,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(e);if(o){var u=r(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return i(this,t)});function b(t){var n;return(n=p.call(this,t)).tb=null,n.zrt=!0,n.Aw=null,n}var y=b.prototype;return y.isLayoutSupported=function(t){return"nodisplay"==t},y.buildCallback=function(){var t=this;this.getAmpDoc().whenFirstVisible().then((function(){t.Brt(function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"source";return d(null!=t,"%s %s must be available",n,r),d(N(t)||/^\/\//.test(t),'%s %s must start with "https://" or "//" or be relative and served from either https or from localhost. Invalid value: %s',n,r,t),t}(t.element.dataset.src,t.element))}))},y.Dg=function(t,n,r){t.postMessage(n,r)},y.Drt=function(t,n){var r=this;if(this.tb&&n.source==this.tb.contentWindow&&n.origin===t){var e,i=function(t){return t.data}(n);if(e=i,"[object Object]"===u.call(e)&&i.sentinel==U)switch(i.command){case"intermediate_iframe_ready":var o=i.nonce;if(!o)return;this.Dg(n.source,{"sentinel":U,"command":"parent_frame_ready","nonce":o},n.origin);break;case"intermediate_iframe_resize":var v=i.height;"number"==typeof v&&!isNaN(v)&&v>0&&this.mutateElement((function(){a(r.element,v>0),function(t,n,r,e,i){var o=function(t,n,r){if(n.startsWith("--"))return n;s||(s=f());var e=s[n];if(!e||r){if(e=n,void 0===t[n]){var i=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),o=function(t,n){for(var r=0;r<c.length;r++){var e=c[r]+n;if(void 0!==t[e])return e}return""}(t,i);void 0!==t[o]&&(e=o)}r||(s[n]=e)}return e}(t.style,n,i);if(o){var u,a=e?r+e:r;t.style.setProperty((u=o.replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()})),c.some((function(t){return u.startsWith(t+"-")}))?"-".concat(u):u),a)}}(r.tb,"height",function(t){return"".concat(t,"px")}(i.height))}));break;case"intermediate_iframe_close":this.mutateElement((function(){r.mx()}));break;case"intermediate_iframe_done":this.mutateElement((function(){r.mx(),r.Frt()}));break;case"set_ui_mode":var p=i.mode;if(!p)return;this.Mrt(p);break;case"set_tap_outside_mode":this.zrt=!!i.cancel;break;default:(l.dev||(l.dev=h())).warn(T,"Unknown action type: ".concat(i.command))}}},y.Mrt=function(t){var n=this;this.mutateElement((function(){n.tb.classList.add("i-amphtml-onetap-google-ui-".concat(t))}))},y.Frt=function(){Promise.all([this.Wrt(),this.Zrt()]).then((function(t){t.reduce((function(t,n){return t||n}))||v().warn(T,"Sign-in was completed, but there were no entitlements to refresh. Please include amp-access or amp-subscriptions.")}))},y.Wrt=function(){var t,n=this.getAmpDoc().getElementById("amp-access");return!!n&&((t=this.element,g(t,"action")).execute(n,"refresh",null,null,null,null,2),!0)},y.Zrt=function(){return E(this.element).then((function(t){return!!t&&(t.resetPlatforms(),!0)}))},y.Brt=function(t){var n,r=this;this.tb||(this.tb=this.getAmpDoc().win.document.createElement("iframe"),(n=this.element,g(n,"url-replace")).expandUrlAsync(t).then((function(t){r.win&&r.OR(t)})))},y.OR=function(t){var n=this;m(this.tb),a(this.element,!1);var r,e=(r=this.element,g(r,"url")).parse(t).origin;this.Aw=[P(this.win,"message",(function(t){n.Drt(e,t)})),P(this.getAmpDoc().getRootNode(),"click",(function(){n.zrt&&!n.element.hasAttribute("hidden")&&n.mx()}))],this.tb.classList.add("i-amphtml-onetap-google-iframe"),this.tb.src=t,this.element.appendChild(this.tb),this.getViewport().addToFixedLayer(this.tb)},y.mx=function(){var t,n;if(this.tb&&(a(this.element,!1),null===(n=(t=this.tb).parentElement)||void 0===n||n.removeChild(t),this.tb=null,this.Aw))for(;this.Aw.length>0;)this.Aw.pop()()},b}(t.BaseElement);t.registerElement(T,C,".i-amphtml-onetap-google-iframe{z-index:2147483647;border:none;position:fixed}.i-amphtml-onetap-google-ui-card{width:391px;right:20px;top:20px}.i-amphtml-onetap-google-ui-bottom_sheet{right:auto;left:0;top:auto;bottom:0;width:100%}\n/*# sourceURL=/extensions/amp-onetap-google/0.1/amp-onetap-google.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-onetap-google-0.1.js.map
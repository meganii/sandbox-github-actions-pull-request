;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-video-docking",ev:"0.1",l:!0,f:function(t,i){(()=>{function i(t,i,o){return i in t?Object.defineProperty(t,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[i]=o,t}function o(t,i){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);i&&(e=e.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),o.push.apply(o,e)}return o}var e,s,n,{isArray:r}=Array,{hasOwnProperty:a,toString:h}=Object.prototype;function d(t){const i=Object.create(null);return t&&Object.assign(i,t),i}function l(t,i,o,e,s,n,r,a,h,d,l){return t}function c(t,i){t.classList.add("i-amphtml-fill-content"),i&&t.classList.add("i-amphtml-replaced-content")}function u(t,i,o,e){return{left:t,top:i,width:o,height:e,bottom:i+e,right:t+o,x:t,y:i}}function m(t){const i=t.ownerDocument||t;return s&&s.ownerDocument===i||(s=i.createElement("div")),p}function p(t){return function(t,i){if(l(1===i.length),l(Array.isArray(i)||(o=i,a.call(o,"raw"))),self.trustedTypes&&self.trustedTypes.createPolicy){const o=self.trustedTypes.createPolicy("static-template#createNode",{createHTML:function(t){return i[0]}});t.innerHTML=o.createHTML("ignored")}else t.innerHTML=i[0];var o;const e=t.firstElementChild;return l(e),l(!e.nextElementSibling),t.removeChild(e),e}(s,t)}function v(t){const i=t.querySelectorAll("[ref]"),o=d();for(let t=0;t<i.length;t++){const e=i[t],s=e.getAttribute("ref");l(s),e.removeAttribute("ref"),l(void 0===o[s]),o[s]=e}return o}function g(t){const i=Object.getOwnPropertyDescriptor(t,"message");if(null!=i&&i.writable)return t;const{message:o,stack:e}=t,s=new Error(o);for(const i in t)s[i]=t[i];return s.stack=e,s}function _(t){let i=null,o="";for(const t of arguments)t instanceof Error&&!i?i=g(t):(o&&(o+=" "),o+=t);return i?o&&(i.message=o+": "+i.message):i=new Error(o),i}function f(t){const i=_.apply(null,arguments);return i.expected=!0,i}function k(t,...i){var o,e,s;o=f.apply(null,i),null===(e=(s=self).__AMP_REPORT_ERROR)||void 0===e||e.call(s,o)}var A=["Webkit","webkit","Moz","moz","ms","O","o"];function P(t){const i=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return A.some((t=>i.startsWith(t+"-")))?`-${i}`:i}function b(t,i,o){if(i.startsWith("--"))return i;n||(n=d());let e=n[i];if(!e||o){if(e=i,void 0===t[i]){const o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(i),s=function(t,i){for(let o=0;o<A.length;o++){const e=A[o]+i;if(void 0!==t[e])return e}return""}(t,o);void 0!==t[s]&&(e=s)}o||(n[i]=e)}return e}function M(t,i){const{style:o}=t;for(const t in i)o.setProperty(P(b(o,t)),String(i[t]),"important")}function w(t,i,o,e,s){const n=b(t.style,i,s);if(!n)return;const r=e?o+e:o;t.style.setProperty(P(n),r)}function V(t,i){void 0===i&&(i=t.hasAttribute("hidden")),i?t.removeAttribute("hidden"):t.setAttribute("hidden","")}function T(t){return`${t}px`}function x(t,i){return"number"==typeof t?i(t):t}function E(t,i){return null==i?`translate(${x(t,T)})`:`translate(${x(t,T)}, ${x(i,T)})`}function R(t,i){for(let o=0;o<i.length;o++)w(t,i[o],null)}function y(t){return t.querySelector("video, iframe")}function I(t){let i=!1,o=null,e=t;return(...t)=>(i||(o=e.apply(self,t),i=!0,e=null),o)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var z=self.__AMP_LOG;function H(t){return z.user||(z.user=O()),function(t,i){return i&&i.ownerDocument.defaultView!=t}(z.user.win,t)?z.userForEmbed||(z.userForEmbed=O()):z.user}function O(t){return function(t,i){throw new Error("failed to call initLogConstructor")}()}function B(t,i,o,e,s,n,r,a,h,d,l){return t}function D(t,i,o,e,s,n,r,a,h,d,l){return H().assert(t,i,o,e,s,n,r,a,h,d,l)}function j(t,i){return C(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),i)}function L(t,i){return C($(S(t)),i)}function S(t){return t.nodeType?(o=t,i=(o.ownerDocument||o).defaultView,j(i,"ampdoc")).getAmpDoc(t):t;var i,o}function $(t){const i=S(t);return i.isSingleDoc()?i.win:i}function C(t,i){B(N(t,i));const o=function(t){let i=t.__AMP_SERVICES;return i||(i=t.__AMP_SERVICES={}),i}(t)[i];return o.obj||(B(o.ctor),B(o.context),o.obj=new o.ctor(o.context),B(o.obj),o.context=null,o.resolve&&o.resolve(o.obj)),o.obj}function N(t,i){const o=t.__AMP_SERVICES&&t.__AMP_SERVICES[i];return!(!o||!o.ctor)}var W,X=t=>j(t,"platform"),U=t=>C(t,"timer"),F=t=>L(t,"video-manager");function Y(t,i,o,e){let s=t,n=o,r=t=>{try{return n(t)}catch(t){var i,o;throw null===(i=(o=self).__AMP_REPORT_ERROR)||void 0===i||i.call(o,t),t}};const a=function(){if(void 0!==W)return W;W=!1;try{const t={get capture(){return W=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return W}(),h=!(null==e||!e.capture);return s.addEventListener(i,r,a?e:h),()=>{null==s||s.removeEventListener(i,r,a?e:h),n=null,s=null,r=null}}function Z(t,i,o,e){const s={detail:o};return Object.assign(s,e),new t.CustomEvent(i,s)}function q(t,i,o,e){return Y(t,i,o,e)}function G(t,i,o,e){let s=o;const n=Y(t,i,(t=>{try{s(t)}finally{s=null,n()}}),e);return n}function J(t,i,o){o=o.sort(((t,i)=>i.minWidth-t.minWidth));let e=-1;o.forEach((o=>{const{className:s,minWidth:n}=o;n<=i&&n>e?(t.classList.add(s),e=n):t.classList.remove(s)}))}var K="dock-dismiss-on-tap",Q="dock-scroll-back";function tt(t){const i=t.touches?t.touches[0]:t;return{x:"x"in i?i.x:i.clientX,y:"y"in i?i.y:i.clientY}}var it="dock",ot="registered",et=["<div class=i-amphtml-video-docked-overlay hidden></div>"],st=['<div class=amp-video-docked-controls hidden><div class="amp-video-docked-main-button-group amp-video-docked-control-set-playback"><div class=amp-video-docked-button-group><div role=button ref=playButton class=amp-video-docked-play></div><div role=button ref=pauseButton class=amp-video-docked-pause></div></div><div class=amp-video-docked-button-group><div role=button ref=muteButton class=amp-video-docked-mute></div><div role=button ref=unmuteButton class=amp-video-docked-unmute></div></div><div class=amp-video-docked-button-group><div role=button ref=fullscreenButton class=amp-video-docked-fullscreen></div></div></div><div class="amp-video-docked-main-button-group amp-video-docked-control-set-scroll-back" hidden><div class=amp-video-docked-button-group><div role=button ref=scrollBackButton class=amp-video-docked-scroll-back></div></div></div><div class=amp-video-docked-button-dismiss-group ref=dismissContainer><div role=button ref=dismissButton class=amp-video-docked-dismiss></div></div></div>'],nt="playback",rt="scroll-back",at=[{className:"amp-small",minWidth:0},{className:"amp-large",minWidth:300}];function ht(t,i){V(t,!1),V(i,!0)}var dt="left",lt="right",ct="bottom";function ut(t,i,o,e){return e*(t-i-2*o)}function mt(t,i,o,e){return ut(t,i,o,e)}function pt(t,i,o,e){return ut(t,i,o,-e)}var vt=(t,i,o)=>{return(e=t)<0?e=0:e>1&&(e=1),(e-0)*(o-(s=i))/1+s;var e,s};function gt(t,i){const{height:o,width:e}=t,{height:s,left:n,top:r,width:a}=i;let h,d,l;return e/o>a/s?(l=a/e,d=r+s/2-o*l/2,h=n):(l=s/o,h=n+a/2-e*l/2,d=r),u(h,d,e*l,o*l)}function _t(t,i,o,e,s,n,r){const a=i.width,h=Math.min(r,n*a),d=t.width/t.height,l=Math.max(s,a*e),c=l/d;return u(o==lt?i.right-h-l:i.left+h,h,l,c)}var ft=t=>t.width>0&&t.height>0,kt=t=>({get:t,configurable:!1,enumerable:!0});function At(t,i,o){if(i[o])return i[o];const e=t.querySelector(`style[${o}], link[${o}]`);return e?(i[o]=e,e):null}var Pt=["<div class=amp-video-docked-shadow hidden></div>"],bt=["<div class=amp-video-docked-placeholder-background><div class=amp-video-docked-placeholder-background-poster ref=poster></div><div class=amp-video-docked-placeholder-icon ref=icon></div></div>"],Mt=.85,wt=[{className:"amp-small",minWidth:0},{className:"amp-large",minWidth:420}],Vt="i-amphtml-video-docked",Tt="slot",xt=(t,i,o)=>`translate(${t}px, ${i}px) scale(${o})`;function Et(t,i){let o=!1;return(...e)=>{o||(o=!0,t.requestAnimationFrame((()=>{i.apply(null,e),o=!1})))}}t.registerServiceForDoc("video-docking",class{constructor(t){this.ji=t,this.S_=I((()=>F(t))),this.Tc=L(t,"viewport"),this.Nn=function(t){const i=kt((()=>t.getSize().width)),o=kt((()=>t.getSize().height));return Object.defineProperties(u(0,0,0,0),{width:i,height:o,right:i,bottom:o})}(this.Tc),this.dz=null,this.mz=null;const i=m(this.pz());this.vz=I((()=>this.Oj((t=>t(Pt))(i)))),this.gz=I((()=>this._z())),this.kz=I((()=>this.Oj((t=>t(bt))(i)))),this.Az=I((()=>v(this.kz()))),this.Pz=null,this.bz=null,this.Mz=null,this.wz=null,this.F$=this.Tc.getScrollTop(),this.Vz=!1,this.Tz=0,this.xz=0,this.Ez=0,this.Gi=[],this.x$=I((()=>{const t=this.ji;this.Tc.onScroll(Et(t.win,(()=>this.Rz()))),this.Tc.onResize((()=>this.yz())),function(t,i,o,e,s){const n=t.getHeadNode();!function(t,i,o,e){let s=t.__AMP_CSS_SM;s||(s=t.__AMP_CSS_SM=d());const n=`amp-extension=${e}`;if(n){const o=At(t,s,n);if(o)return"STYLE"==o.tagName&&o.textContent!==i&&(o.textContent=i),o}const r=(t.ownerDocument||t).createElement("style");r.textContent=i;let a=null;r.setAttribute("amp-extension",e),a=At(t,s,"amp-runtime"),function(t,i,o=null){if(!o)return void function(t,i){t.insertBefore(i,t.firstChild)}(t,i);const e=o.nextSibling;t.insertBefore(i,e)}(t,r,a),n&&(s[n]=r)}(n,function(t,i){const o=t.__AMP_CSS_TR;return o?o(i):i}(n,'.amp-video-docked-controls{direction:ltr!important;opacity:0;pointer-events:none!important;transition:opacity 0.3s ease;height:120px}.amp-video-docked-main-button-group{height:40px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin:-20px 0 0 -60px}.amp-large>.amp-video-docked-main-button-group{margin-left:-70px}.amp-large>.amp-video-docked-main-button-group>.amp-video-docked-button-group{margin-right:10px}.amp-large>.amp-video-docked-control-set-scroll-back,.amp-small>.amp-video-docked-control-set-scroll-back{margin-left:-32px}.amp-large>.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group{margin-right:0}.amp-large>.amp-video-docked-button-dismiss-group{margin:6px 0 0 -6px}.amp-small>.amp-video-docked-button-dismiss-group,.amp-small>.amp-video-docked-button-dismiss-group>div[role=button]{min-width:32px;height:32px;border-radius:32px;background-size:20px 20px}.amp-small>.amp-video-docked-button-dismiss-group{margin-left:8px}.amp-video-docked-controls-shown{opacity:1;pointer-events:initial!important}.amp-video-docked-button-group{margin:0}.amp-video-docked-button-dismiss-group,.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group,.amp-video-docked-button-group>div[role=button]{min-width:40px;height:40px;border-radius:40px}.amp-video-docked-button-dismiss-group:active,.amp-video-docked-button-group:active{background-color:hsla(0,0%,100%,0.7)}.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group,.amp-video-docked-button-group>div[role=button],.amp-video-docked-controls,.i-amphtml-video-docked-overlay{-webkit-tap-highlight-color:rgba(0,0,0,0)!important}.amp-video-docked-button-dismiss-group>div[role=button],.amp-video-docked-button-group>div[role=button]{background-repeat:no-repeat;background-position:50%}.amp-video-docked-shadow{box-shadow:0px 0 20px 6px rgba(0,0,0,0.2);transition-property:transform,opacity!important}.amp-video-docked-controls-bg{background:hsla(0,0%,90%,0.6)}.amp-video-docked-mute{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-unmute{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4 9.91 6.09 12 8.18V4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-pause{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-play{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M8 5v14l11-7z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-fullscreen{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>\')}.amp-video-docked-dismiss{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/><path d="M0 0h24v24H0z" fill="none"/></svg>\')}.amp-video-docked-scroll-back{background-size:50%}.amp-rtl .amp-video-docked-scroll-back,.amp-video-docked-scroll-back{background-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\')}.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group,.amp-video-docked-control-set-scroll-back>.amp-video-docked-button-group>div[role=button]{min-width:64px;height:64px}.amp-video-docked-shadow,.i-amphtml-video-docked,.i-amphtml-video-docked-overlay{margin:0!important}.i-amphtml-video-docked{transition-property:transform!important}.amp-video-docked-controls,.amp-video-docked-shadow,.i-amphtml-video-docked,.i-amphtml-video-docked-overlay{position:fixed!important;top:0!important;left:0!important;right:auto!important;bottom:auto!important;padding:0!important;min-width:0!important;min-height:0!important;max-width:auto!important;max-height:auto!important;transform-origin:left top!important;will-change:width,height,transition,transform,opacity;transition:transform 0.05s}.i-amphtml-video-docked-overlay{opacity:0;transition:opacity 0.3s ease;contain:strict!important}.amp-video-docked-controls-bg{opacity:1}.i-amphtml-video-docked-overlay.amp-video-docked-almost-dismissed{opacity:1;background:hsla(0,0%,39%,0.1)}.i-amphtml-video-docked-shadow.amp-video-docked-almost-dismissed,.i-amphtml-video-docked.amp-video-docked-almost-dismissed{opacity:0.3}.amp-video-docked-button-dismiss-group{position:absolute;top:-40px}.amp-video-docked-placeholder-background{background:hsla(0,0%,78%,0.5);transition-property:opacity;overflow:hidden;pointer-events:none;z-index:0;opacity:0}.amp-video-docked-placeholder-icon{-webkit-mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h48v48H0z"/><path d="M40 4H16c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4V8c0-2.2-1.8-4-4-4zM8 12H4v28c0 2.2 1.8 4 4 4h28v-4H8V12zm28 3.868L23.382 28.486l-2.828-2.828L33.212 13H25V9h15v15h-4v-8.132z" fill="%23000" fill-rule="nonzero"/></g></svg>\');mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h48v48H0z"/><path d="M40 4H16c-2.2 0-4 1.8-4 4v24c0 2.2 1.8 4 4 4h24c2.2 0 4-1.8 4-4V8c0-2.2-1.8-4-4-4zM8 12H4v28c0 2.2 1.8 4 4 4h28v-4H8V12zm28 3.868L23.382 28.486l-2.828-2.828L33.212 13H25V9h15v15h-4v-8.132z" fill="%23000" fill-rule="nonzero"/></g></svg>\');-webkit-mask-size:48px 48px;mask-size:48px 48px;height:48px;width:48px;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;-webkit-mask-position:bottom left;mask-position:bottom left;background:hsla(0,0%,39%,0.8);transition-property:opacity,transform;will-change:opacity,transform;position:absolute;bottom:40px;left:40px}.amp-video-docked-placeholder-icon.amp-rtl{-webkit-mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\');mask-image:url(\'data:image/svg+xml;charset=utf-8,<svg width="40" height="40" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M-4-4h48v48H-4z"/><path d="M36 0c2.2 0 4 1.8 4 4v24c0 2.2-1.8 4-4 4H12c-2.2 0-4-1.8-4-4V4c0-2.2 1.8-4 4-4h24zM16 11.868l12.618 12.618 2.829-2.828L18.789 9H27V5H12v15h4v-8.132zM4 8H0v28c0 2.2 1.8 4 4 4h28v-4H4V8z" fill="%23000" fill-rule="nonzero"/></g></svg>\');left:auto;right:40px}.amp-video-docked-placeholder-icon.amp-small{-webkit-mask-size:32px 32px;mask-size:32px 32px;width:32px;height:32px;bottom:20px;left:20px}.amp-video-docked-placeholder-icon.amp-rtl.amp-small{left:auto;right:20px}.amp-video-docked-placeholder-background-poster{background-size:cover;background-repeat:no-repeat;filter:blur(20px);transform:scale(1.1);opacity:0.3}.amp-video-docked-controls{z-index:2147483646!important}.i-amphtml-video-docked-overlay{z-index:2147483645!important}.i-amphtml-video-docked{z-index:2147483644!important}.amp-video-docked-shadow{z-index:2147483643!important}\n/*# sourceURL=/extensions/amp-video-docking/0.1/amp-video-docking.css*/'),0,"amp-video-docking")}(t,0,null)})),this.Iz=I((()=>this.zz())),this.Kv=null,this.Oz=!1,this.Bz()}Bz(){if(!this.Dz())return;const t=this.ji,i=`[${it,CSS.escape("dock")}]`,o=t.getRootNode().querySelectorAll(i);for(let t=0;t<o.length;t++){const i=o[t];i.signals&&i.signals().get(ot)&&this.registerElement(i)}q(t.getBody(),ot,(t=>{const i=t.target;i.hasAttribute(it)&&this.registerElement(i)}))}Dz(){return!X(this.ji.win).isIos()||!(t=this.ji,L(t,"viewer")).isEmbedded();var t}zz(){const t=this.ji.getRootNode(),i=t.querySelector("[dock]");D(i.signals().get(ot),"`dock` attribute can only be set on video components.");const o=i.getAttribute("dock").trim();if(""==o)return null;const e=t.querySelector(o);return e&&D("amp-layout"==e.tagName.toLowerCase(),"Dock slot must be an <amp-layout> element."),e}yz(){var t;this.Nn.width!==(null===(t=this.dz)||void 0===t?void 0:t.viewportRect.width)&&this.Gi.forEach((t=>this.jz(t)))}Lz(){const t=this.Sz();return t?t.getBoundingClientRect().top:0}register(t){this.x$(),this.Kv||(this.Kv=new IntersectionObserver((t=>{const i=[];for(let o=t.length-1;o>=0;o--){const{boundingClientRect:e,target:s}=t[o];i.indexOf(s)<0&&(s.getImpl().then((t=>{this.$z(t,e)})),i.push(s))}}),{threshold:[0,.1,.2,.8,.9,1]})),this.Kv.observe(t.element),this.Gi.push(t)}registerElement(t){t.getImpl().then((t=>this.register(t)))}Rz(){const t=this.Tc.getScrollTop();if(Math.abs(t-this.F$)<5)return;const i=t>this.F$?"top":ct;this.wz=i,this.F$=t}pz(){const t=this.ji.getRootNode();return t.ownerDocument||t}Oj(t){return(this.pz().body||this.pz()).appendChild(t)}Cz(t){const i=t=>this.Gm(t);return q(t,"touchstart",i),q(t,"mousedown",i),t}_z(){const t=new class{constructor(t){this.ji=t;const i=m(t.getBody());this.container=(t=>t(st))(i),this.overlay=(t=>t(et))(i);const o=v(this.container),e=t=>o[t];this.Nz=e("dismissButton"),this.Wz=e("playButton"),this.Xz=e("pauseButton"),this.Uz=e("muteButton"),this.Fz=e("unmuteButton"),this.Yz=e("fullscreenButton"),this.Zz=e("scrollBackButton"),this.qz=e("dismissContainer"),this.Gz=this.container.querySelectorAll(".amp-video-docked-main-button-group"),this.Jz=!1,this.Kz=!1,this.Qz=I((()=>new class{constructor(t,i){this.Qe=U(t),this.Xe=i,this.vi=null}trigger(t,...i){this.cancel(),this.vi=this.Qe.delay((()=>this.Xe.apply(null,i)),t)}cancel(){null!==this.vi&&(this.Qe.cancel(this.vi),this.vi=null)}isWaiting(){return null!==this.vi}}(this.ji.win,(()=>{this.hide(!0)})))),this.tH=[],this.iH=null,this.oH=null,this.eH=null,this.UE=null,this.sH(),this.nH()}disable(){this.Jz=!0}enable(){this.Jz=!1}setVideo(t,i){this.eH=i,this.UE!==t&&(this.UE=t,this.nx(t))}rH(t){const i=`amp-video-docked-control-set-${t}`;!function(t,o){const{length:e}=t;for(let o=0;o<e;o++)V(s=t[o],s.classList.contains(i));var s}(this.Gz)}nx(t){this.nb();const i="click",{element:o}=t;this.tH.push(this.aH(this.Nz,i,(()=>{this.hH(K)})),this.aH(this.Wz,i,(()=>{!function(t,i){var o;(o=()=>t.play(!1),new Promise((t=>{t(o())}))).catch((t=>{k(0,t)}))}(t)})),this.aH(this.Xz,i,(()=>{t.pause()})),this.aH(this.Uz,i,(()=>{t.mute()})),this.aH(this.Fz,i,(()=>{t.unmute()})),this.aH(this.Yz,i,(()=>{t.fullscreenEnter()})),this.aH(this.Zz,i,(()=>{this.hH(Q)})),q(this.container,"mouseup",(()=>this.hideOnTimeout(800))),q(o,"playing",(()=>this.dH())),q(o,"pause",(()=>this.lH())),q(o,"muted",(()=>this.cH())),q(o,"unmuted",(()=>this.uH())),q(o,"ad_start",(()=>this.rH(rt))),q(o,"ad_end",(()=>this.rH(nt))))}hH(t){this.container.dispatchEvent(Z(this.ji.win,t,void 0))}dH(){const{Xz:t,Wz:i}=this;this.Kz=!1,ht(i,t)}lH(){const{Xz:t,Wz:i}=this;this.Kz=!0,ht(t,i)}cH(){const{Uz:t,Fz:i}=this;ht(t,i)}uH(){const{Uz:t,Fz:i}=this;ht(i,t)}aH(t,i,o){return q(t,i,(()=>{this.Jz||o()}))}nb(){for(;this.tH.length>0;)this.tH.pop().call()}hideOnTimeout(t=1200){this.Qz().trigger(t)}nH(){const{overlay:t}=this,i=()=>this.mH();this.aH(t,"click",i),this.aH(t,"mouseover",i)}mH(){this.ji.win.requestAnimationFrame((()=>{this.pH()}))}pH(){const t=F(this.ji),i=B(this.UE),o=t.isRollingAd(i),e=t.isMuted(i),s="paused"!==t.getPlayingState(i),{container:n,overlay:r}=this;V(n,!0),n.classList.add("amp-video-docked-controls-shown"),r.classList.add("amp-video-docked-controls-bg"),this.rH(o?rt:nt),V(this.Wz,!s),V(this.Xz,s),V(this.Uz,!e),V(this.Fz,e),this.vH(),this.hideOnTimeout()}positionOnVsync(t,i,o,e,s){this.eH=u(i,o,e*t,s*t);const{container:n}=this,r=t/2,a=i+e*r,h=o+s*r;J(n,t*e,at),M(n,{"transform":E(a,h)});const d=e*r-4-40,l=-(s*r-4-40);M(this.qz,{"transform":E(d,l)})}sH(){q(this.ji.getRootNode(),"mousedown",(t=>{this.gH(t.target)||this.hide(!0)}))}gH(t){return t==this.overlay||!!t.closest(".amp-video-docked-controls")}hide(t,i){const o="amp-video-docked-controls-shown",{container:e,overlay:s}=this;e.classList.contains(o)&&(t&&this.Kz||(i&&(V(e,!1),V(s,!1)),s.classList.remove("amp-video-docked-controls-bg"),e.classList.remove(o)))}vH(){this.iH||(this.iH=q(this.overlay,"mousemove",(()=>{this.mH()})),this.oH=q(this.overlay,"mouseout",(t=>{B(this.eH);const{x:i,y:o}=tt(t),{bottom:e,left:s,right:n,top:r}=this.eH;(i<s||i>n||o<r||o>e)&&(this.hide(!0),this._H())})))}_H(){this.iH&&(this.iH(),this.iH=null),this.oH&&(this.oH(),this.oH=null)}reset(){const{container:t,overlay:i}=this,o=[i,t];V(i,!1),this.hide();for(let t=0;t<o.length;t++)R(o[t],["transform","transition","width","height"])}}(this.ji),{container:i,overlay:o}=t;return q(i,K,(()=>{this.fH()})),q(i,Q,(()=>{this.kH()})),this.Cz(i),this.Cz(o),this.Oj(i),this.Oj(o),t}fH(){this.gz().hide(!1,!0),this.AH(this.PH())}PH(){return B(this.dz).video}bH(t,i){if(this.Vz||!this.MH(t,i)||this.wH(t)||this.VH(t))return null;const{element:o}=t,e=function(t){let i=-1/0,o=1/0,e=-1/0,s=1/0;for(let t=0;t<arguments.length;t++){const n=arguments[t];if(n&&(i=Math.max(i,n.left),o=Math.min(o,n.left+n.width),e=Math.max(e,n.top),s=Math.min(s,n.top+n.height),o<i||s<e))return null}return o==1/0?null:u(i,e,o-i,s-e)}(i||o.getBoundingClientRect(),this.Nn);return e&&ft(e)?e.top>this.Lz()?null:this.TH(t,i):null}xH(t){return(t=t.element||t).getBoundingClientRect()}jz(t){this.ru((()=>{const i=this.bH(t);i?this.EH(t,i,1):this.RH(t)&&this.AH(t)}))}ru(t){this.ji.win.requestAnimationFrame(t)}$z(t,i){if(!this.Oz)if("top"==this.wz){const o=this.bH(t,i);o&&this.yH(t,o,i)}else if(this.wz==ct){if(!this.dz)return;t===this.PH()&&this.ps(t,Mt,i)&&this.AH(t,!1,i)}}VH(t){return!this.dz&&!this.gn(t)}wH(t){return!!this.dz&&!this.RH(t)}MH(t,i){const{height:o,width:e}=i||t.element.getBoundingClientRect();return e/o<.98?(function(t){const i=t.tagName.toUpperCase();H().error(i,"Minimize-to-corner (`dock`) does not support portrait video.",t)}(t.element),!1):this.Nn.width>=320&&this.Nn.height>=o*Mt}gn(t=null){const i=t||this.PH();return"playing_manual"==this.S_().getPlayingState(i)}yH(t,i,o){this.IH(t)||this.dz||this.zH(t,i,o)}zH(t,i,o){return this.EH(t,i,.05,o,!0).then((()=>new Promise((e=>{this.ru((()=>{this.EH(t,i,1,o).then(e)}))}))))}EH(t,i,o,e,s){const{element:n}=t;this.ZC(n);const{relativeX:r,scale:a,x:h,y:d}=this.HH(t,i,o,e);t.hideControls();const l=this.OH(o);return this.BH(t,i,o),this.DH(t,h,d,a,o,l,r,e).then((()=>{s||this.gz().enable()}))}Ye(t,i){const o=i&&i.slot||this.Sz()||this.PH().element,e=Z(this.ji.win,t,{});(t=>function(t,i){const o=$(S(t));return N(o,i)?C(o,i):null}(t,"action"))(o).trigger(o,t,e,1)}IH(t){return this.Pz==t&&(this.ps(t.element,.02)&&this.jH(),!0)}jH(){this.Pz=null}OH(t){return this.dz?300*Math.abs(t-this.dz.step):0}LH(t,i,o){return!!this.bz&&this.bz.x==t&&this.bz.y==i&&this.bz.scale==o}DH(t,i,o,s,n,r,a,h,d="fixed"){if(this.LH(i,o,s))return e||(e=Promise.resolve(void 0));this.Oz=!0;const{element:l}=t,u=h||t.element.getBoundingClientRect(),{height:m,width:p}=u;this.bz={x:i,y:o,scale:s};const v=n>0?"ease-out":"ease-in",g=y(l),_=this.vz(),{overlay:f}=this.gz(),k=this.kz(),A=this.Az().icon,P=void 0!==a,b=a==dt;P&&(J(A,p,wt),A.classList.toggle("amp-rtl",b),this.gz().container.classList.toggle("amp-rtl",b));const w=this.SH(p,m),x=t=>M(t,{"opacity":n}),E=t=>M(t,{"transition-duration":`${r}ms`,"transition-timing-function":v}),R=A.classList.contains("amp-small"),I=(b?pt:mt)(p,R?32:48,R?20:40,n);return t.mutateElement((()=>{g.classList.add(Vt),M(l,{"overflow":"visible"}),V(_,!0),V(f,!0),c(this.Az().poster),c(k),this.$H(t),l.appendChild(k),this.ru((()=>{t.mutateElement((()=>{x(k),E(k),E(A),P&&M(A,{"transform":xt(I,0,1)})}))}));let e=0,n=0,r=0,a=0;"absolute"===d&&(e=u.left,n=u.top,r=l.offsetLeft,a=l.offsetTop),this.CH(t).forEach((t=>{const h=Number(t!==g),l=h*a-n;M(t,{"position":d,"left":T(h*r-e),"top":T(l),"transform":xt(i,o,s)}),E(t),(t=>{w&&M(t,{"width":T(p),"height":T(m),"min-width":T(p),"min-height":T(m)})})(t)})),x(_),this.gz().positionOnVsync(s,i,o,p,m)})),this.NH().promise(r).then((()=>{this.Oz=!1}))}NH(){return U(this.ji.win)}CH(t){return[y(t.element),this.vz(),this.gz().overlay]}$H(t){const i=this.Az().poster,o=function(t){const i=t.getAttribute("poster")||t.getAttribute("data-poster");if(i)return i;const o=("amp-img[placeholder],img[placeholder],[placeholder] amp-img",t.querySelector(function(t,i){return t.replace(/^|,/g,"$&:scope ")}("amp-img[placeholder],img[placeholder],[placeholder] amp-img")));return o?o.getAttribute("src"):void 0}(t.element);o?(V(i,!0),function(t,i){for(const o in i)w(t,o,i[o])}(i,{"background-image":`url(${o})`})):V(i,!1)}SH(t,i){const o=!this.Mz||this.Mz.width!=t||this.Mz.height!=i;return o&&(this.Mz={width:t,height:i}),o}RH(t){return!!this.dz&&this.dz.video==t}BH(t,e,s){const n=this.dz,r=function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?o(Object(s),!0).forEach((function(o){i(t,o,s[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))}))}return t}({},this.Nn);var a,h;this.dz={video:t,target:e,step:s,viewportRect:r},n&&n.video==t&&(a=e.rect,h=n.target.rect,a&&h&&a.left==h.left&&a.top==h.top&&a.width==h.width&&a.height==h.height)||(this.gz().setVideo(t,e.rect),this.Ye("dock",e))}WH(t){const i=this.PH(),{target:o}=this.dz,{scale:e,x:s,y:n}=this.HH(i,o,1),r=this.XH(t),a=this.UH(r);this.Ez=t-this.xz,this.xz=t,this.DH(i,s+t,n,e,1,0,a)}ps(t,i=1,o){const e=o||this.xH(t);if(!ft(e))return 0;const s=Math.min(e.bottom,this.Nn.bottom)-Math.max(e.top,this.Nn.top);return Math.max(0,s/e.height)>i-.02}Gm(t){if(!this.dz)return;if(this.FH(Tt))return;if(this.Oz)return;this.Tz=0;const{x:i}=tt(t),{directionX:o}=this.dz.target,e=Et(this.ji.win,(t=>this.YH(t,o,i))),s=()=>this.ZH(r),n=this.ji.getRootNode(),r=[this.qH(),this.GH(),this.JH(),q(n,"touchmove",e),q(n,"mousemove",e),G(n,"touchend",s),G(n,"mouseup",s)]}FH(t){return!!this.dz&&this.dz.target.type===t}GH(){const t=this.pz().documentElement,i="i-amphtml-select-disabled";return t.classList.add(i),()=>t.classList.remove(i)}qH(){return this.Tc.disableScroll(),this.Tc.resetScroll.bind(this.Tc)}YH(t,i,o){if(this.dz.target.directionX!==i)return;const e=tt(t).x-o;this.Tz=e,e<=10||(t.preventDefault(),t.stopPropagation(),this.gz().hide(!1,!0),this.Vz=!0,this.gz().disable(),this.WH(e))}JH(){const{win:t}=this.ji;if(!X(t).isIos())return()=>{};const i=t=>t.preventDefault();return t.addEventListener("touchmove",i,{passive:!1}),()=>t.removeEventListener("touchmove",i)}ZH(t){t.forEach((t=>t.call())),this.Vz=!1,this.gz().enable(),Math.abs(this.Ez)<40?this.KH(this.Tz):this.QH(this.xz,Math.sign(this.Ez)),this.Ez=0,this.xz=0,this.Tz=0}QH(t,i){B(1==Math.abs(i));const o=this.PH();if(o.pause(),this.ps(o,.2))return void this.tB(o,t,i);const{target:e}=B(this.dz),{width:s,x:n,y:r}=e.rect,{scale:a}=this.HH(o,e,1),h=n+t,d=1==i?this.Nn.right:this.Nn.left-s,l=this.iB(d-h);this.oB(),o.showControls(),this.DH(o,d,r,a,0,l).then((()=>{this.eB(o)}))}tB(t,i,o){B(1==Math.abs(o));const{target:e}=B(this.dz),{width:s,x:n,y:r}=e.rect,{scale:a}=this.HH(t,e,1),h=this.Nn.width,d=n+i,l=1==o?mt(h,s,0,1):pt(h,s,0,1),c=this.iB(l-d);this.oB(),this.DH(t,l,r,a,0,c).then((()=>{this.AH(t,!0),t.showControls()}))}iB(t){return Math.min(300,Math.abs(t)/2)}XH(t){const{step:i,target:o}=this.dz,e=this.PH(),{width:s}=e.element.getBoundingClientRect(),{scale:n,x:r}=this.HH(e,o,i);return r+t+s*n/2}KH(t){const i=this.PH(),{step:o}=this.dz,e=this.UH(t);this.mz=e;const s=this.TH(i);this.dz.target=s;const{scale:n,x:r,y:a}=this.HH(i,s,o);this.DH(i,r,a,n,o,200,e)}UH(t){return this.XH(t)>=this.Nn.width/2?lt:dt}HH(t,i,o,e){return function(t,i,o=1){const e=i.x<t.x?dt:lt;return{x:vt(o,t.x,i.x),y:vt(o,t.y,i.y),scale:vt(o,t.width,i.width)/t.width,relativeX:e}}(e||this.xH(t),i.rect,o)}AH(t,i,o){const e=this.ps(t,Mt,o);e||(t.pause(),t.showControls()),i||this.oB();const{target:s}=B(this.dz),{relativeX:n,scale:r,x:a,y:h}=this.HH(t,s,0),d=e?this.OH(0):0;return this.DH(t,a,h,r,0,d,n,o,"absolute").then((()=>{t.showControls(),this.eB(t)}))}oB(){this.gz().disable(),this.gz().hide(!1,!0),this.Ye("undock")}eB(t){const{element:i}=t,o=y(i);return t.mutateElement((()=>{o.classList.remove(Vt);const t=this.vz(),i=this.Az().icon,e=this.kz();V(t,!1),this.gz().reset(),[o,t,e,i].forEach((t=>{R(t,["transform","transition","min-width","min-height","width","height","opacity","overflow","position","left","top"])})),this.bz=null,this.Mz=null,this.dz=null}))}ZC(t){const i=t.querySelector(".i-amphtml-android-poster-bug");var o,e;i&&(null===(e=(o=i).parentElement)||void 0===e||e.removeChild(o))}kH(){this.dz&&this.Tc.animateScrollIntoView(this.PH().element,"center")}TH(t,i){const o=this.Sz(),e=i||t.element.getBoundingClientRect();return o?{type:Tt,rect:gt(e,o.getBoundingClientRect()),slot:o}:(null===this.mz&&(this.mz="rtl"==((s=this.pz()).body.getAttribute("dir")||s.documentElement.getAttribute("dir")||"ltr")?dt:lt),{type:"corner",rect:_t(e,this.Nn,this.mz,.3,180,.04,30),directionX:this.mz});var s}Sz(){const t=this.Iz();return t&&ft(t.getBoundingClientRect())?t:null}})})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-video-docking-0.1.mjs.map
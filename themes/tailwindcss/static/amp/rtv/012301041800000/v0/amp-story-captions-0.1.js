;
(self.AMP=self.AMP||[]).push({m:0,v:"2301041800000",n:"amp-story-captions",ev:"0.1",l:!0,f:function(t,n){!function(){function n(t,r){return(n=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,r)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,n){if(n&&("object"===i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function e(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function a(t,n){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),r.push.apply(r,i)}return r}function u(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))}))}return t}function c(t){return t?Array.prototype.slice.call(t):[]}var s,f=Array.isArray,l=Object.prototype;function p(t,n){if(!!n!==n&&null!=n)if(Array.isArray(n))n.forEach((function(n){p(t,n)}));else{var r=n;t.appendChild(r.nodeType?r:self.document.createTextNode(String(n)))}}function m(t,n,r){if(!1!==r&&null!=r)if("function"!=typeof r||"o"!==n[0]||"n"!==n[1])t.setAttribute(n,!0===r?"":String(r));else{var i=n.toLowerCase().substring(2);t.addEventListener(i,r)}}l.hasOwnProperty,l.toString;var h=/(\0)|^(-)$|([\x01-\x1f\x7f]|^-?[0-9])|([\x80-\uffff0-9a-zA-Z_-]+)|[^]/g;function v(t,n,r,i,o){return o||(n?"ï¿½":i?t.slice(0,-1)+"\\"+t.slice(-1).charCodeAt(0).toString(16)+" ":"\\"+t)}function y(t,n,r,i){return function(t,n,r,i){var o=t,e=r,a=function(t){try{return e(t)}catch(t){var n,r;throw null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t),t}},u=function(){if(void 0!==s)return s;s=!1;try{var t={get capture(){return s=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return s}(),c=!(null==i||!i.capture);return o.addEventListener(n,a,u?i:c),function(){null==o||o.removeEventListener(n,a,u?i:c),e=null,o=null,a=null}}(t,n,r,i)}function d(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!isFinite(r)||r<0)throw new Error("Invalid depth: "+r);if(t===n)return!0;for(var o=[{a:t,b:n,depth:r}];o.length>0;){var e=o.shift(),a=e.a,u=e.b,c=e.depth;if(c>0){if(i(a)!==i(u))return!1;if(f(a)&&f(u)){if(a.length!==u.length)return!1;for(var s=0;s<a.length;s++)o.push({a:a[s],b:u[s],depth:c-1});continue}if(a&&u&&"object"===i(a)&&"object"===i(u)){var l=Object.keys(a),p=Object.keys(u);if(l.length!==p.length)return!1;for(var m=0,h=l;m<h.length;m++){var v=h[m];o.push({a:a[v],b:u[v],depth:c-1})}continue}}if(a!==u)return!1}return!0}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var b,g,w,x=function(){function t(t,n,r){var i=this;this.Uk=t,this.Lpt=n,this.zn=r.ownerDocument.createElement("div"),r.appendChild(this.zn),this.zn.classList.add("amp-story-captions-cue-wrapper"),this.Zpt=[],this.tc(),this.$pt=y(n,"cuechange",(function(){i.tc()})),this.Ypt=y(t,"timeupdate",(function(){i.Yst()}))}var n=t.prototype;return n.dispose=function(){var t,n;this.$pt(),this.Ypt(),null===(n=(t=this.zn).parentElement)||void 0===n||n.removeChild(t),this.Uk=null,this.Lpt=null},n.tc=function(){var t=this;!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(this.zn),this.Zpt.length=0,c(this.Lpt.activeCues).forEach((function(n){var r=t.zn.ownerDocument.createElement("div");r.classList.add("amp-story-captions-cue");var i=n.getCueAsHTML(),o=t.zn.ownerDocument.createElement("span");r.appendChild(o);var e=[];c(i.childNodes).forEach((function(n){if("timestamp"===n.target){var i=function(t){var n=/^(?:(\d{2,}):)?(\d{2}):(\d{2})\.(\d{3})$/.exec(t);return n?3600*(n[1]?parseInt(n[1],10):0)+60*parseInt(n[2],10)+parseInt(n[3],10)+parseInt(n[4],10)/1e3:null}(n.data);null!==i&&(e.push(i),o=t.zn.ownerDocument.createElement("span"),r.appendChild(o))}else o.appendChild(n)})),t.Zpt.push(e),t.zn.appendChild(r)})),this.Yst()},n.Yst=function(){var t=this,n=this.Uk.currentTime;c(this.zn.childNodes).forEach((function(r,i){c(r.childNodes).forEach((function(r,o){o>0&&r.classList.toggle("amp-story-captions-future",t.Zpt[i][o-1]>n)}))}))},t}(),j=(e(b={},33,(function(t,n){return t.length!==n.length})),e(b,15,(function(t,n){return t.element!==n.element||t.state!==n.state})),e(b,38,(function(t,n){return t.length!==n.length})),e(b,40,(function(t,n){return t.length!==n.length})),e(b,41,(function(t,n){return null===t||null===n||t.width!==n.width||t.height!==n.height})),e(b,23,(function(t,n){return null===t||null===n||!d(t,n,2)})),e(b,28,(function(t,n){return null===t||null===n||!d(t,n,2)})),e(b,16,(function(t,n){return!d(t,n,3)})),"none");function O(t){return!!t&&-1!=t.toString().indexOf("[native code]")}function R(t){return void 0===g&&(n=t||Element,g=n.prototype.attachShadow?"v1":n.prototype.createShadowRoot?"v0":j),g;var n}function S(t,n,r){var i="";return t&&Array.prototype.forEach.call(t,(function(t){if(t.selectorText&&t.style&&void 0!==t.style.cssText)i+=function(t,n,r){var i=[];return t.split(",").forEach((function(t){t=t.trim(),r&&(t=r(t)),function(t,n){var r=function(t){return t=t.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+t+")"+A,"m")}(n);return!t.match(r)}(t,n)&&(t=function(t,n){return function(t,n){return t.match(k)?(t=t.replace(I,n)).replace(k,n+" "):n+" "+t}(t,n)}(t,n)),i.push(t)})),i.join(", ")}(t.selectorText,n,r)+" {\n\t",i+=function(t){var n=t.style.cssText;t.style.content&&!t.style.content.match(/['"]+|attr/)&&(n=n.replace(/content:[^;]*;/g,"content: '"+t.style.content+"';"));var r=t.style;for(var i in r)"initial"===r[i]&&(n+=i+": initial; ");return n}(t)+"\n}\n\n";else if(t.type===CSSRule.MEDIA_RULE)i+="@media "+t.media.mediaText+" {\n",i+=S(t.cssRules,n),i+="\n}\n\n";else try{t.cssText&&(i+=t.cssText+"\n\n")}catch(t){}})),i}var E="-shadowcsshost",z=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",A=(new RegExp("("+E+z,"gim"),new RegExp("(-shadowcsscontext"+z,"gim"),"([>\\s~+[.,{:][\\s\\S]*)?$"),I=E+"-no-combinator",k=new RegExp(E,"gim");new RegExp("-shadowcsscontext","gim");var L=/[^\.\-\_0-9a-zA-Z]/,T=/[^\-\_0-9a-zA-Z]/;function Z(t){var n,r,i=((n=t).ownerDocument||n).defaultView,o=t.shadowRoot||t.__AMP_SHADOW_ROOT;if(o)return o.innerHTML="",o;var e,a=R();if("v1"==a?(r=t.attachShadow({mode:"open"})).styleSheets||Object.defineProperty(r,"styleSheets",{get:function(){var t=[];return r.childNodes.forEach((function(n){"STYLE"===n.tagName&&t.push(n.sheet)})),t}}):r="v0"==a?t.createShadowRoot():function(t){var n=t.ownerDocument;t.classList.add("i-amphtml-shadow-host-polyfill");var r=n.createElement("style");r.textContent=".i-amphtml-shadow-host-polyfill>:not(i-amphtml-shadow-root){display:none!important}",t.appendChild(r);var i=n.createElement("i-amphtml-shadow-root");return t.appendChild(i),t.__AMP_SHADOW_ROOT=i,Object.defineProperty(t,"shadowRoot",{enumerable:!0,configurable:!0,value:i}),i.host=t,i.getElementById=function(t){var n=String(t).replace(h,v);return i.querySelector("#".concat(n))},Object.defineProperty(i,"styleSheets",{get:function(){return n.styleSheets?c(n.styleSheets).filter((function(t){return i.contains(t.ownerNode)})):[]}}),i}(t),void 0===w&&(w=R()!=j&&(O(Element.prototype.attachShadow)||O(Element.prototype.createShadowRoot))),!w){var u="i-amphtml-sd-".concat(i.Math.floor(1e4*i.Math.random()));r.id=u,r.host.classList.add(u),e=function(t){return function(t,n){return function(t,n){var r=t.id,i=t.ownerDocument,o=null;try{o=B(i.implementation.createHTMLDocument(""),n)}catch(t){}if(!o)try{o=B(i,n)}catch(t){}return o?S(o,".".concat(r),$):n}(t,n)}(r,t)},r.__AMP_CSS_TR=e}return r}function $(t){return t.replace(/(html|body)/g,_)}function _(t,n,r,i){var o=i.charAt(r-1),e=i.charAt(r+t.length);return o&&!L.test(o)||e&&!T.test(e)?t:"amp-"+t}function B(t,n){var r=t.createElement("style");r.textContent=n;try{return(t.head||t.documentElement).appendChild(r),r.sheet?r.sheet.cssRules:null}finally{r.parentNode&&r.parentNode.removeChild(r)}}"[".concat("data-text-background-color","]");var F=["default","appear"],U=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&n(t,r)}(s,t);var i,e,a=(i=s,e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=r(i);if(e){var a=r(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return o(this,t)});function s(t){var n;return(n=a.call(this,t)).qn=null,n.Uk=null,n.qpt=null,n.Gpt=[],n}var f=s.prototype;return f.buildCallback=function(){this.qn=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if("string"!=typeof t)return t(u(u({},n),{},{children:i}));var e=null==n?void 0:n.xmlns;e&&delete n.xmlns;var a=e?self.document.createElementNS(e,t):self.document.createElement(t);return p(a,i),n&&Object.keys(n).forEach((function(t){m(a,t,n[t])})),a}("div",null);var t=this.element.getAttribute("style-preset");F.includes(t)?(this.qn.classList.add("amp-story-captions-".concat(t)),function(t,n,r){var i=self.document.createElement("style");i.textContent=':host{all:initial!important;color:initial!important}.i-amphtml-amp-story-captions-auto-append{position:absolute!important;z-index:1!important;bottom:5em!important;left:0!important;right:0!important;margin:0 3em!important}.amp-story-captions-default .amp-story-captions-cue-wrapper{font-size:calc(var(--story-page-vh, 8px)*2.5)!important;font-family:Roboto,sans-serif!important;margin:1em 0!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-pack:center!important;justify-content:center!important;-ms-flex-direction:column!important;flex-direction:column!important;-ms-flex-align:center!important;align-items:center!important;width:100%!important}.amp-story-captions-default .amp-story-captions-cue{text-align:center!important;color:#fff!important;border-radius:.94em!important;padding:0.35em 0.94em!important;background-color:hsla(0,0%,10%,0.6)!important;max-width:calc(var(--story-page-vw)*92)!important}.amp-story-captions-default .amp-story-captions-future{color:#fff!important}.amp-story-captions-appear .amp-story-captions-cue-wrapper{font-size:var(--story-captions-font-size,calc(var(--story-page-vh, 8px)*2.5))!important;font-family:var(--story-captions-font-family,"Roboto"),"Roboto",sans-serif!important}.amp-story-captions-appear .amp-story-captions-cue{color:#fff!important;text-shadow:.06em .06em #000!important}.amp-story-captions-appear .amp-story-captions-cue span{transition:opacity .3s cubic-bezier(0.3,0,0,1)!important;opacity:1!important}.amp-story-captions-appear .amp-story-captions-cue span.amp-story-captions-future{opacity:.1!important}\n/*# sourceURL=/extensions/amp-story-captions/0.1/amp-story-captions-presets.css*/';var o=Z(t);o.appendChild(i),o.appendChild(n)}(this.element,this.qn)):this.element.appendChild(this.qn),this.element.hasAttribute("auto-append")&&this.qn.classList.add("i-amphtml-amp-story-captions-auto-append")},f.isLayoutSupported=function(t){return function(t){return"fixed"==t||"fixed-height"==t||"responsive"==t||"fill"==t||"flex-item"==t||"fluid"==t||"intrinsic"==t}(t)||"container"===t},f.setVideoElement=function(t){var n=this;this.qpt&&this.qpt(),this.Uk=t,this.Jpt(),this.qpt=y(t.textTracks,"change",(function(){n.Jpt()}))},f.Jpt=function(){for(var t=this;this.Gpt.length;)this.Gpt.pop().dispose();c(this.Uk.textTracks).forEach((function(n){"showing"!==n.mode&&"hidden"!==n.mode||(n.mode="hidden",t.Gpt.push(new x(t.Uk,n,t.qn)))}))},s}(t.BaseElement);t.registerElement("amp-story-captions",U,"amp-story-captions{white-space:pre-wrap}.amp-story-captions-future{color:gray}\n/*# sourceURL=/extensions/amp-story-captions/0.1/amp-story-captions.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
/**
* @license
* Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
* Use of this source code is governed by a BSD-style
* license that can be found in the LICENSE file or at
* https://developers.google.com/open-source/licenses/bsd
*/}});
//# sourceMappingURL=amp-story-captions-0.1.js.map
{"version":3,"file":"amp-link-rewriter-0.1.mjs","mappings":"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","names":["hasOwnProperty","hasOwn_","toString","toString_","Object","prototype","obj","key","call","self","__AMP_LOG","user","dev","userForEmbed","logs","opt_element","getUserLogger","win","ownerDocument","defaultView","isFromEmbed","suffix","levelFunc","opt_suffix","Error","callLogConstructor","shouldBeTrueish","opt_message","opt_1","opt_2","opt_3","opt_4","opt_5","opt_6","opt_7","opt_8","opt_9","elementOrAmpDoc","id","getServiceInternal","getAmpdocServiceHolder","getAmpdoc","nodeOrDoc","nodeType","node","__AMP_TOP","getTopWindow","getService","getAmpDoc","ampdoc","isSingleDoc","holder","devAssert","isServiceRegistered","s","services","__AMP_SERVICES","getServices","ctor","context","resolve","service","Services","getServiceForDoc","get","Priority_Enum","Set","attribute","newAttr","keys","forEach","htmlElement","configOpts","anchorAttr","every","RegExp","test","getAttribute","WL_ANCHOR_ATTR","PREFIX_DATA_ATTR","REG_DOMAIN_URL","PAGE_PROP_ALLOWLIST","SOURCE_URL","DOCUMENT_REFERRER","AMP_GEO","AmpLinkRewriter","AMP","BaseElement","constructor","element","super","this","rewriter_","referrer_","buildCallback","viewer","whenReady","then","getReferrerUrl","referrer","letsRockIt_","bind","ampElement","ampDoc","ampDoc_","configOpts_","config","scripts","parent","querySelectorAll","replace","length","script","tagName","toUpperCase","isJsonScriptTag","json","textContent","JSON","parse","_unused","getChildJsonConfig","e","createError","getConfigJson","assert","output","section","hasOwn","parseAttribute","vars","scopeDocument","getConfigOpts","listElements_","doc","getRootNode","cssSelector","join","selection","filteredSelection","hasAttributeValues","push","getScopeElements","rewrittenUrl_","urlReplacementService_","getServiceForDocOrNull","handleClick","anchor","isRewritten_","isNotFiltered_","sourceTrimmedDomain","sourceUrl","match","canonicalTrimmedDomain","canonicalUrl","isInternalLink_","setRedirectUrl_","href","isListed_","selector","closest","isBelongsToContainer","filter","trimmedDomains","some","domain","domainHrefMatch","replacePageProp_","replaceVars_","expandUrlSync","val","dataset","opt_computeParamNameFunc","opt_paramPattern","params","paramPattern","matches","toLowerCase","substr","getDataParamsFromAttributes","undefined","assign","Math","random","encodeURIComponent","attachClickEvent_","registerAnchorMutator","isLayoutSupported","layout","registerElement"],"sourceRoot":"https://raw.githubusercontent.com/ampproject/amphtml/2301041800000/","sources":["src/core/types/object/index.js","src/utils/log.js","src/service-helpers.js","src/core/window/index.js","src/service/index.js","src/service/navigation.js","src/url.js","extensions/amp-link-rewriter/0.1/config-options.js","extensions/amp-link-rewriter/0.1/scope.js","extensions/amp-link-rewriter/0.1/link-rewriter.js","extensions/amp-link-rewriter/0.1/amp-link-rewriter.js","src/core/dom/index.js","src/core/dom/query.js","src/core/dom/css-selectors.js","src/core/types/object/json.js","src/core/dom/layout/index.js"]}

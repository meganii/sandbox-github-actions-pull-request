;
(self.AMP=self.AMP||[]).push({m:1,v:"2301041800000",n:"amp-action-macro",ev:"0.1",l:!0,f:function(t,n){(()=>{var{hasOwnProperty:n,toString:e}=Object.prototype;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var r=self.__AMP_LOG;function i(t){return function(t,n){throw new Error("failed to call initLogConstructor")}()}function o(t,n,e,r,i,o,s,u,c,a,l){return t}function s(t,n,e,o,s,u,c,a,l,f,h){return(r.user||(r.user=i()),void r.user.win?r.userForEmbed||(r.userForEmbed=i()):r.user).assert(t,n,e,o,s,u,c,a,l,f,h)}function u(t){return t.nodeType?(e=t,n=(e.ownerDocument||e).defaultView,function(t,n){return c(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),"ampdoc")}(n)).getAmpDoc(t):t;var n,e}function c(t,n){o(a(t,n));const e=function(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return e.obj||(o(e.ctor),o(e.context),e.obj=new e.ctor(e.context),o(e.obj),e.context=null,e.resolve&&e.resolve(e.obj)),e.obj}function a(t,n){const e=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!e||!e.ctor)}var l="amp-action-macro",f=class extends t.BaseElement{constructor(t){super(t),this.R_=null,this.gL=[]}buildCallback(){const{element:t}=this;this.R_=(t=>function(t,n){const e=function(t){const n=u(t);return n.isSingleDoc()?n.win:n}(u(t));return a(e,n)?c(e,n):null}(t,"action"))(t);const n=t.getAttribute("arguments");n&&(this.gL=n.split(",").map((t=>t.trim()))),this.registerAction("execute",this.Ps.bind(this))}getLayoutPriority(){return 1}Ps(t){const{actionEventType:n,args:e,event:r,trust:i}=t;if(e&&this.gL.length>0)for(const t in e)s(this.gL.includes(t),'Variable argument name "%s" is not defined in %s',t,this.element);t.caller.tagName.toLowerCase()===l&&s(this.wL(t.caller),'Action macro with ID "%s" cannot reference itself or macros defined after it',this.element.getAttribute("id")),this.R_.trigger(this.element,`${n}`,r,i,e)}renderOutsideViewport(){return!0}isLayoutSupported(t){return!0}wL(t){return!!(this.element.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING)}};t.registerElement(l,f)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-action-macro-0.1.mjs.map
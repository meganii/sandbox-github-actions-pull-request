;
import{PreactBaseElement as t}from"../bento.mjs";function e(t,e){if(null==t)return{};var n,o,a={},r=Object.keys(t);for(o=0;o<r.length;o++)n=r[o],e.indexOf(n)>=0||(a[n]=t[n]);return a}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var a=o.call(t,"string");if("object"!==n(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===n(e)?e:String(e)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s=class{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}},{isArray:i}=Array;function c(t,e){return e.toUpperCase()}var{hasOwnProperty:u,toString:d}=Object.prototype;function f(t){return"[object Object]"===d.call(t)}function m(t){const e=Object.getOwnPropertyDescriptor(t,"message");if(null!=e&&e.writable)return t;const{message:n,stack:o}=t,a=new Error(n);for(const e in t)a[e]=t[e];return a.stack=o,a}function p(t){let e=null,n="";for(const t of arguments)t instanceof Error&&!e?e=m(t):(n&&(n+=" "),n+=t);return e?n&&(e.message=n+": "+e.message):e=new Error(n),e}function y(t){const e=p.apply(null,arguments);return e.expected=!0,e}function b(t,...e){var n,o,a;n=y.apply(null,e),null===(o=(a=self).__AMP_REPORT_ERROR)||void 0===o||o.call(a,n)}import{Fragment as g,createElement as v}from"../bento.mjs";import{useCallback as h,useEffect as w,useImperativeHandle as k,useLayoutEffect as j,useMemo as P,useRef as S,useState as I}from"../bento.mjs";import{forwardRef as O}from"../bento.mjs";import{ContainWrapper as C,useValueRef as q}from"../bento.mjs";import{useAmpContext as M,useLoading as R}from"../bento.mjs";import{useCallback as x,useLayoutEffect as E}from"../bento.mjs";import{useAmpContext as L}from"../bento.mjs";function N(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==e||e(t),null}}var U={bubbles:!0,cancelable:!0};function $(t,e,n){const o=e||(t=>t),{dataset:a}=t,r={},l=n||/^param(.+)/;for(const t in a){const e=t.match(l);e&&(r[o(e[1][0].toLowerCase()+e[1].substr(1))]=a[t])}return r}function A(t,e,n,o){const a=n||{};t.ownerDocument;const r=t.ownerDocument.createEvent("Event");r.data=a;const{bubbles:l,cancelable:s}=o||U;r.initEvent(e,l,s),t.dispatchEvent(r)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var F={"title":"","artist":"","album":"","artwork":[{"src":""}]};function T(t){const e=t.querySelector('script[type="application/ld+json"]');if(!e)return;const n=N(e.textContent);return n&&n.image?"string"==typeof n.image?n.image:n.image["@list"]&&"string"==typeof n.image["@list"][0]?n.image["@list"][0]:"string"==typeof n.image.url?n.image.url:"string"==typeof n.image[0]?n.image[0]:void 0:void 0}function J(t){const e=t.querySelector('meta[property="og:image"]');return e?e.getAttribute("content"):void 0}function _(t){const e=t.querySelector('link[rel="shortcut icon"]')||t.querySelector('link[rel="icon"]');return e?e.getAttribute("href"):void 0}function V({displayIcon:t,displayOverlay:e,metadata:n,onOverlayClick:o,pause:a,play:r,playing:l,wrapperRef:s}){const{playable:i}=M();return w((()=>{if(!i)return void a();const t=new IntersectionObserver((t=>{t[t.length-1].isIntersecting?r().catch((()=>{})):a()}),{threshold:.5});return t.observe(s.current),()=>{t.disconnect()}}),[s,r,a,i]),v(g,null,t&&v("div",{class:"eq-9e7199f"+(l?" eq-playing-9e7199f":"")},v(B,null)),e&&v("button",{"aria-label":n&&n.title||"Unmute video",tabindex:"0",class:"autoplay-mask-button-9e7199f fill-content-overlay-fc551a7",onClick:o}))}var B=function(t){let e=!1,n=null,o=()=>[1,2,3,4].map((t=>v("div",{class:"eq-col-9e7199f",key:t})));return(...t)=>(e||(n=o.apply(self,t),e=!0,o=null),n)}(),z=O((function(t,n){let a="class",{autoplay:r=!1,component:i="video",controls:c=!1,loading:u,loop:d=!1,mediasession:f=!0,noaudio:m=!1,onPlayingState:p,onReadyState:y,poster:g,sources:O,src:x,style:N,[a]:U}=t,$=e(t,["autoplay","component","controls","loading","loop","mediasession","noaudio","onPlayingState","onReadyState","poster","sources","src","style",a].map(o));!function(){const{notify:t}=L();E((()=>{t&&t()}))}();const{playable:A}=M(),B=R(u),z="unload"!==B,[Y,G]=I(r),[H,Q]=I(!1),[W,X]=I(null),[D,K]=I(!r),Z=S(null),tt=S(null),et=P((()=>new s),[]),nt=S("loading"),ot=q(y),at=h(((t,e)=>{if(t!==nt.current){nt.current=t;const n=ot.current;n&&n(t,e)}}),[ot]),rt=q(p),lt=h((t=>{Q(t);const e=rt.current;e&&e(t)}),[rt]);j((()=>{z||lt(!1)}),[z,lt]);const st=h((()=>et.promise.then((()=>function(t,e){const n=(o=()=>t.play(!1),new Promise((t=>{t(o())})));var o;return n.catch((t=>{b(0,t)})),n}(tt.current)))),[et]),it=h((()=>{et.promise.then((()=>{var t;return null===(t=tt.current)||void 0===t?void 0:t.pause()}))}),[et]),ct=h((()=>et.promise.then((()=>tt.current.requestFullscreen()))),[et]),ut=h((()=>{G(!1),K(!0)}),[]);return j((()=>{var t;const e=null===(t=tt.current)||void 0===t?void 0:t.readyState;null!=e&&at(e>0?"complete":"loading")}),[at]),j((()=>(f&&H&&W&&function(t,e,n,o){const{navigator:a}=t;"mediaSession"in a&&t.MediaMetadata&&(a.mediaSession.metadata=new t.MediaMetadata(F),a.mediaSession.metadata=new t.MediaMetadata(e),a.mediaSession.setActionHandler("play",n),a.mediaSession.setActionHandler("pause",o))}(window,W,st,it),()=>{})),[f,H,W,st,it]),w((()=>{A||it()}),[A,it]),k(n,(()=>({get readyState(){return nt.current},play:st,pause:it,requestFullscreen:ct,get currentTime(){return tt.current?tt.current.currentTime:0},get duration(){return tt.current?tt.current.duration:NaN},get autoplay(){return r},get controls(){return c},get loop(){return d},userInteracted:ut,mute:()=>G(!0),unmute:()=>{D&&G(!1)}})),[st,it,ct,ut,D,r,c,d]),v(C,{contentRef:Z,class:U,style:N,size:!0,layout:!0,paint:!0},z&&v(i,l(l({},$),{},{ref:tt,loading:B,muted:Y,loop:d,controls:c&&(!r||D),onCanPlay:()=>{et.resolve(),at("complete")},onLoadedMetadata:()=>{f&&et.promise.then((()=>{var t,e;X((t=tt.current,l({"title":(e=$).title||e["aria-label"]||document.title,"artist":e.artist||"","album":e.album||"","artwork":[{"src":e.artwork||e.poster||T(document)||J(document)||_(document)||""}]},t&&t.getMetadata?t.getMetadata():Object.create(null))))})),at("complete")},onPlaying:()=>lt(!0),onPause:()=>lt(!1),onEnded:()=>lt(!1),onError:t=>{at("error",t),et.reject(t)},class:"fill-stretch-fc551a7",src:x,poster:g}),O),r&&!D&&v(V,{metadata:W,playing:H,displayIcon:!m&&Y,wrapperRef:Z,play:st,pause:it,displayOverlay:c,onOverlayClick:ut}))}));z.displayName="VideoWrapper";var Y=class extends t{};Y.Component=z,Y.loadable=!0,Y.layoutSizeDefined=!0,Y.staticProps,Y.props={"album":{attr:"album"},"alt":{attr:"alt"},"artist":{attr:"artist"},"artwork":{attr:"artwork"},"attribution":{attr:"attribution"},"autoplay":{attr:"autoplay",type:"boolean"},"controls":{attr:"controls",type:"boolean"},"controlslist":{attr:"controlslist"},"crossorigin":{attr:"crossorigin"},"disableremoteplayback":{attr:"disableremoteplayback"},"loop":{attr:"loop",type:"boolean"},"noaudio":{attr:"noaudio",type:"boolean"},"poster":{attr:"poster"},"sources":{selector:"source",single:!1,clone:!0},"src":{attr:"src"},"title":{attr:"title"},"dock":{attr:"dock",media:!0},"rotate-to-fullscreen":{attr:"rotate-to-fullscreen",type:"boolean",media:!0}},Y.shadowCss='.fill-stretch-fc551a7{width:100%;height:100%;position:relative}.fill-content-overlay-fc551a7{top:0;left:0;right:0;bottom:0;position:absolute}.autoplay-mask-button-9e7199f{width:100%;border:none;display:block;-webkit-appearance:none;appearance:none;background:transparent}.eq-9e7199f{right:7px;width:20px;bottom:7px;height:12px;display:-ms-flexbox;display:flex;opacity:0.8;z-index:1;overflow:hidden;position:absolute;-ms-flex-align:end;align-items:flex-end;pointer-events:none!important}.eq-playing-9e7199f>div:after,.eq-playing-9e7199f>div:before{animation-play-state:running}.eq-col-9e7199f{-ms-flex:1;flex:1;height:100%;position:relative;margin-right:1px}.eq-col-9e7199f:after,.eq-col-9e7199f:before{width:100%;height:100%;content:"";position:absolute;animation:keyframes-eq-animation-9e7199f 0s linear infinite alternate;will-change:transform;background-color:#fafafa;animation-play-state:paused}.eq-col-9e7199f:nth-child(4):before{animation-duration:0.4s}.eq-col-9e7199f:nth-child(4):after{animation-duration:0.25s}.eq-col-9e7199f:nth-child(3):before{animation-duration:0.3s}.eq-col-9e7199f:nth-child(3):after{animation-duration:0.35s}.eq-col-9e7199f:nth-child(2):before{animation-duration:0.5s}.eq-col-9e7199f:nth-child(2):after{animation-duration:0.4s}.eq-col-9e7199f:first-child:before{animation-duration:0.3s}.eq-col-9e7199f:first-child:after{animation-duration:0.45s}@keyframes keyframes-eq-animation-9e7199f{0%{transform:translateY(100%)}to{transform:translateY(0)}}',Y.usesShadowDom=!0;import{createElement as G}from"../bento.mjs";import{Slot as H,createSlot as Q}from"../bento.mjs";function W(t){const e=e=>(null==e?void 0:e.startsWith(t))&&e!==t;return{"attrMatches":e,"parseAttrs":n=>{let o;const a=n.attributes;for(let n=0;n<a.length;n++){const l=a[n];e(l.name)&&(o||(o={}),o[(r=l.name.slice(t.length),r.replace(/-([a-z])/g,c))]=l.value)}var r;return o}}}new Set(["c","v","a","ad"]);var X={"play":"playing","pause":"pause","complete":"ended","visible":"amp:video:visibility","adImpression":"ad_start","adComplete":"ad_end"};import{createElement as D}from"../bento.mjs";import{useCallback as K,useImperativeHandle as Z,useLayoutEffect as tt,useMemo as et,useRef as nt}from"../bento.mjs";import{forwardRef as ot}from"../bento.mjs";var at=["loading","unloadOnPause","sandbox","muted","controls","origin","onCanPlay","onMessage","playerStateRef","makeMethodMessage","makeFullscreenMessage","onIframeLoad"],rt=["allow-scripts","allow-same-origin","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].join(" ");function lt(t,e,n){t&&t.contentWindow&&e.then((()=>{t.contentWindow.postMessage(n(),"*")}))}var st=ot((function(t,n){let{loading:o,unloadOnPause:a=!1,sandbox:r=rt,muted:i=!1,controls:c=!1,origin:u,onCanPlay:d,onMessage:f,playerStateRef:m,makeMethodMessage:p,makeFullscreenMessage:y,onIframeLoad:b}=t,g=e(t,at);const v=nt(null),h=et((()=>new s),[]),w=nt(p),k=K((t=>{lt(null==v?void 0:v.current,h.promise,(()=>w.current(t)))}),[h.promise]),j=nt(y),P=K((()=>lt(null==v?void 0:v.current,h.promise,j.current)),[h.promise]);Z(n,(()=>({get currentTime(){var t,e;return null!==(t=null==m||null===(e=m.current)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:NaN},get duration(){var t,e;return null!==(t=null==m||null===(e=m.current)||void 0===e?void 0:e.duration)&&void 0!==t?t:NaN},requestFullscreen:()=>{if(!j.current)return h.promise.then((()=>{v.current.requestFullscreen()}));P()},play:()=>k("play"),pause:()=>{if(a){const t=v.current;t&&(t.src=t.src)}else k("pause")}})),[m,k,P,h.promise,a]);const S=function(t){const e=nt(null);return e.current=t,e}(f);return tt((()=>{if(!v.current)return;function t(t){S.current&&(u&&!u.test(t.origin)||t.source!=v.current.contentWindow||S.current({currentTarget:v.current,target:v.current,data:t.data}))}const{defaultView:e}=v.current.ownerDocument;return e.addEventListener("message",t),()=>e.removeEventListener("message",t)}),[u,S]),tt((()=>{k(i?"mute":"unmute")}),[i,k]),tt((()=>{k(c?"showControls":"hideControls")}),[c,k]),D("iframe",l(l({},g),{},{ref:v,allowfullscreen:!0,frameborder:"0",sandbox:r,loading:o,onCanPlay:()=>{d&&h.promise.then(d),h.resolve()},onLoad:t=>{null==b||b(t)}}))}));st.displayName="VideoIframeInternal";var it=ot((function(t,e){return D(z,l(l({ref:e},t),{},{component:st}))}));it.displayName="VideoIframe";import{createElement as ct}from"../bento.mjs";import{useCallback as ut,useMemo as dt,useRef as ft}from"../bento.mjs";import{forwardRef as mt}from"../bento.mjs";var pt=["adCustParams","adMacros","autoplay","config","consentParams","contentBackfill","contentRecency","contentSearch","mediaId","onLoad","onPlayingState","playerId","playlistId","queryParams"],yt=["json"],bt=/https:\/\/content\.jwplatform\.com/,gt=mt((function(t,n){const{adCustParams:o,adMacros:a,autoplay:r,config:s,consentParams:c={},contentBackfill:u=!0,contentRecency:d,contentSearch:m,mediaId:p,onLoad:y,onPlayingState:b,playerId:g,playlistId:v,queryParams:h}=t,w=e(t,pt),k=ft({}),j=dt((()=>function(t,e,n,o,a,r,s,c){if(!t)return null;const u=encodeURIComponent(t);let d=encodeURIComponent(e||n);"outstream"===d&&(d="oi7pAMI1");let f=`https://content.jwplatform.com/players/${d}-${u}.html`;const{policyInfo:m,policyMetadata:p,policyState:y}=c;return f=function(t,e){return function(t,e,n){if(!e)return t;const o=t.split("#",2),a=o[0].split("?",2);let r=a[0]+(a[1]?`?${a[1]}&${e}`:`?${e}`);return r+=o[1]?`#${o[1]}`:"",r}(t,function(t){const e=[];for(const r in t){let l=t[r];if(null!=l){l=i(a=l)?a:[a];for(let t=0;t<l.length;t++)e.push((n=r,o=l[t],`${encodeURIComponent(n)}=${encodeURIComponent(o)}`))}}var n,o,a;return e.join("&")}(e))}(f,l(l({},s),{},{"search":o||void 0,"recency":a||void 0,"backfill":r||void 0,"isAMP":!0,"consentState":y||void 0,"consentValue":m||void 0,"consentGdpr":(null==p?void 0:p.gdprApplies)||void 0})),f}(g,v,p,m,d,u,h,c)),[g,v,p,m,d,u,h,c]),P=ut((t=>function(t,n){const{currentTarget:o,data:a}=t,{adCustParams:r,adMacros:s,config:i,onLoad:c,onPlayingState:u,playerStateRef:d}=n;if(!(m=a)||!f(m)&&!m.startsWith("{"))return;var m;const p=f(g=a)?g:N(g),{detail:y,event:b}=p;var g;if("setup"!==b)if("ready"===b&&y)!function(t,e,n){const{muted:o}=e;A(t,"canplay"),null==n||n(),o&&A(t,"muted"),A(t,"load")}(o,y,c);else{switch(b){case"play":case"adPlay":null==u||u(!0);break;case"pause":case"complete":null==u||u(!1)}y.currentTime&&(d.current.currentTime=y.currentTime),y.duration&&(d.current.duration=y.duration),b in X&&A(o,X[b])}else!function(t,n,o,a){const r=n||{},{json:s}=r,i=e(r,yt),c=l(l({},N(s)||{}),i);a&&0!==Object.keys(a).length&&(c.adMacros=a),o&&(c.adCustParams=N(o)),function(t,e,n){t&&t.contentWindow&&t.contentWindow.postMessage(JSON.stringify({"method":"setupConfig","optParams":n}),"*")}(t,0,c)}(o,i,r,s)}(t,{config:s,adCustParams:o,adMacros:a,onPlayingState:b,onLoad:y,playerStateRef:k})),[s,o,a,b,y]),S=ut((t=>function(t,e){let n,o;switch(t){case"play":{const{autoplay:t}=e;t&&(o=!0),n="play";break}case"pause":n="pause";break;case"mute":n="setMute",o=!0;break;case"unmute":n="setMute",o=!1;break;case"showControls":n="setControls",o=!0;break;case"hideControls":n="setControls",o=!1}const a={method:n,optParams:o};return JSON.stringify(a)}(t,{autoplay:r})),[r]),I=dt((()=>window.document.body.requestFullscreen?null:()=>JSON.stringify({method:"setFullscreen",optParams:!0})),[]);return!!function(t){const{mediaId:e,playerId:n,playlistId:o}=t;return!(!n||!e&&!o)||(console.warn("playerId and one of: mediaId or playlistId are required for <Jwplayer>"),!1)}(t)&&ct(it,l({ref:n,playerStateRef:k,src:j,makeMethodMessage:S,makeFullscreenMessage:I,onMessage:P,origin:bt,controls:!0},w))}));gt.displayName="BentoJwPlayer";var vt=class extends Y{init(){return super.init(),{"queryParams":this.mergeQueryParams($(this.element,null,/^playerParam(.+)/),this.element.getAttribute("data-player-querystring")),"contentSearch":this.getContextualSearch(this.element.getAttribute("data-content-search"))}}getContextualSearch(t){if("__CONTEXTUAL__"!==t)return t;const{head:e,title:n}=this.element.ownerDocument,o=e.querySelector('meta[property="og:title"]');return(o?o.getAttribute("content"):null)||n||""}mergeQueryParams(t,e){const n=(t,e)=>{for(const n of e)t[n[0]]=n[1]},o=new URLSearchParams(t||""),a=new URLSearchParams(e||""),r={};return n(r,o.entries()),n(r,a.entries()),r}};vt.Component=gt,vt.props={"playerId":{attr:"data-player-id"},"mediaId":{attr:"data-media-id"},"playlistId":{attr:"data-playlist-id"},"contentRecency":{attr:"data-content-recency"},"contentBackfill":{attr:"data-content-backfill",type:"boolean"},"adCustParams":{attr:"data-ad-cust-params"},"adMacros":W("data-ad-macro-"),"config":W("data-config-"),"autoplay":{attr:"autoplay",type:"boolean"},"loading":{attr:"data-loading"},"dock":{attr:"dock",media:!0}},vt.layoutSizeDefined=!0,vt.usesShadowDom=!0,vt.loadable=!0;import{defineBentoElement as ht}from"../bento.mjs";ht("bento-jwplayer",vt,void 0);
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=bento-jwplayer-1.0.mjs.map
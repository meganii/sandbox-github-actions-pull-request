;
(()=>{function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}var n,{hasOwnProperty:s,toString:i}=Object.prototype;function r(t){let e=!1,n=null,s=t;return(...t)=>(e||(n=s.apply(self,t),e=!0,s=null),n)}function o(t,e){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==e||e(t),null}}function l(t,e,s,i){return function(t,e,s,i){let r=t,o=s,l=t=>{try{return o(t)}catch(t){var e,n;throw null===(e=(n=self).__AMP_REPORT_ERROR)||void 0===e||e.call(n,t),t}};const a=function(){if(void 0!==n)return n;n=!1;try{const t={get capture(){return n=!0,!1}};self.addEventListener("test-options",null,t),self.removeEventListener("test-options",null,t)}catch(t){}return n}(),u=!(null==i||!i.capture);return r.addEventListener(e,l,a?i:u),()=>{null==r||r.removeEventListener(e,l,a?i:u),o=null,r=null,l=null}}(t,e,s,i)}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null},self.__AMP_LOG;var a="__AMP__VIDEO_IFRAME__";function u(t,...e){if(!t)throw new Error(`[<amp-video-iframe>] ${e.join(" ")} https://go.amp.dev/c/amp-video-iframe`);return t}var h=["pause","play","mute","unmute","fullscreenenter","fullscreenexit","showcontrols","hidecontrols"];!function(n){u(!n[a],"video-iframe-integration-v0.js should only be included once."),n[a]=!0,n.__AMP_REPORT_ERROR=console.error.bind(console);const s=new class{constructor(t){this.st=!0,this.it=0,this.lt={},this.i=t,this.ut={},this.ht=r((()=>{!function(t,e){l(t,"message",(t=>{const n=o(t.data);n&&e(n)}))}(this.i,(t=>this.ct(t)))})),this.dt=!1,this.ft=!1,this._t=r((()=>o(this.i.name)))}getMetadata(){return this._t()}method(t,e){u(h.indexOf(t)>-1,`Invalid method ${t}.`);const n="play"==t||"pause"==t?this.yt(e):e;this.ut[t]=n,this.ht()}ct(t){const e=t.id;var n;"number"==typeof(n=e)&&isFinite(n)&&this.lt[e]?this.v(e,t.args):"method"==t.event&&this.vt(t.method)}v(t,e){(0,this.lt[t])(e),delete this.lt[t]}vt(t){t in this.ut&&this.ut[t]()}listenTo(t,e,n){u(!this.ft,"`listenTo` is meant to be used once per page.");const s={"jwplayer":()=>{u(!n,"listenTo('jwplayer', opt_instance) does not take an initializer."),this.Pt(this.jt(e))},"videojs":()=>{this.bt(u(e,"listenTo('videojs', element) expects a second argument"),n)}};u(s[t.toLowerCase()],`Invalid listener type [${t}].`,`Valid types are [${Object.keys(s).join(", ")}]`)(),this.ft=!0}jt(t){return t?(u(t.on,"listenTo('jwplayer', myjwplayer) takes a jwplayer instance as ","second argument"),t):u(this.i.jwplayer,"listenTo('jwplayer') expects a global jwplayer() in window.")()}Pt(t){["error","setupError"].forEach((e=>{t.on(e,(()=>{u.apply(null,[!1].concat(arguments)),this.postEvent("error")}))})),["adSkipped","adComplete","adError"].forEach((e=>{t.on(e,(()=>this.postEvent("ad_end")))})),t.on("adStarted",(()=>this.postEvent("ad_start")));const e={"play":"playing","ready":"canplay","pause":"pause"};Object.keys(e).forEach((n=>{t.on(n,(()=>this.postEvent(e[n])))})),t.on("volume",(t=>this.gt(t.volume))),this.method("play",(()=>t.play())),this.method("pause",(()=>t.pause())),this.method("mute",(()=>t.setMute(!0))),this.method("unmute",(()=>t.setMute(!1))),this.method("showcontrols",(()=>t.setControls(!0))),this.method("hidecontrols",(()=>t.setControls(!1))),this.method("fullscreenenter",(()=>t.setFullscreen(!0))),this.method("fullscreenexit",(()=>t.setFullscreen(!1)))}bt(t,e){const n=function(t,e){return u(e||t.videojs,"Video.JS not imported or initializer undefined.")}(this.i,e),s=n(t);s.ready((()=>{const e="canplay";["playing","pause","ended"].forEach((t=>{s.on(t,(()=>this.postEvent(t)))})),s.readyState()>=3?this.postEvent(e):s.on(e,(()=>this.postEvent(e))),l(t,"volumechange",(()=>this.gt(s.volume()))),this.method("play",(()=>s.play())),this.method("pause",(()=>s.pause())),this.method("mute",(()=>s.muted(!0))),this.method("unmute",(()=>s.muted(!1))),this.method("showcontrols",(()=>s.controls(!0))),this.method("hidecontrols",(()=>s.controls(!1))),this.method("fullscreenenter",(()=>s.requestFullscreen())),this.method("fullscreenexit",(()=>s.exitFullscreen()))}))}gt(t){if(t<.01)return this.dt=!0,void this.postEvent("muted");this.dt&&(this.dt=!1,this.postEvent("unmuted"))}yt(t){return()=>{try{e=()=>t(),new Promise((t=>{t(e())}))}catch(t){}var e}}postEvent(t){this.At({"event":t})}postAnalyticsEvent(t,e){this.At({"event":"analytics","analytics":{"eventType":t,"vars":e}})}At(n,s){const i=this.it++,r=function(n){for(var s=1;s<arguments.length;s++){var i=null!=arguments[s]?arguments[s]:{};s%2?e(Object(i),!0).forEach((function(e){t(n,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))}))}return n}({id:i},n);return this.i.parent&&this.i.parent.postMessage(r,"*"),s&&(this.lt[i]=s),i}getIntersection(t){this.wt("getIntersection",t)}getConsentData(t){this.wt("getConsentData",t)}wt(t,e){return this.ht(),this.At({"method":t},e)}}(n),i=n.AmpVideoIframe=n.AmpVideoIframe||[];i.push=t=>t(s),i.forEach(i.push)}(self)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=video-iframe-integration-v0.mjs.map
;
(()=>{var{isArray:t}=Array;function n(t,n){const r=[];let e=0;for(let i=0;i<t.length;i++){const s=t[i];n(s,i,t)?r.push(s):(e<i&&(t[e]=s),e++)}return e<t.length&&(t.length=e),r}function r(t){return"string"==typeof t}var{hasOwnProperty:e,toString:i}=Object.prototype;function s(t){const n=Object.create(null);return t&&Object.assign(n,t),n}function o(t){return 1==(null==t?void 0:t.nodeType)}var u="​​​";function l(t){return o(t)?(t=t).tagName.toLowerCase()+(t.id?`#${t.id}`:""):t}function c(t){return t.indexOf(u)>=0}function f(t,r,e="Assertion failed",i){var s,o;if(r)return r;t&&-1==e.indexOf(t)&&(e+=t);let u=3;const c=e.split("%s");let f=c.shift();const h=[f];for(;c.length;){const t=arguments[u++],n=c.shift();f+=l(t)+n,h.push(t,n.trim())}const a=new Error(f);throw a.messageArray=n(h,(t=>""!==t)),null===(s=(o=self).__AMP_REPORT_ERROR)||void 0===s||s.call(o,a),a}function h(n,r,e,i,s){return t(s)?n(e,s.concat([r])):n(e,`${s||i}: %s`,r),r}function a(t){const n=Object.getOwnPropertyDescriptor(t,"message");if(null!=n&&n.writable)return t;const{message:r,stack:e}=t,i=new Error(r);for(const n in t)i[n]=t[n];return i.stack=e,i}function d(t){let n=null,r="";for(const t of arguments)t instanceof Error&&!n?n=a(t):(r&&(r+=" "),r+=t);return n?r&&(n.message=r+": "+n.message):n=new Error(r),n}function m(t){var n,r;null===(n=(r=self).__AMP_REPORT_ERROR)||void 0===n||n.call(r,t)}function v(t){const n=d.apply(null,arguments);return n.expected=!0,n}var p=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function g(t,n=""){try{return decodeURIComponent(t)}catch(t){return n}}function _(t){const{location:n}=t||self;return function(t){const n=s();if(!t)return n;let r;for(;r=p.exec(t);){const t=g(r[1],r[1]),e=r[2]?g(r[2].replace(/\+/g," "),r[2]):"";n[t]=e}return n}(n.originalHash||n.hash)}var w=t=>self.AMP_CONFIG?self.AMP_CONFIG[t]:null,A=("string"==typeof w("cdnProxyRegex")?new RegExp(w("cdnProxyRegex")):w("cdnProxyRegex"))||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function P(t){if(!self.document||!self.document.head)return null;if(self.location&&A.test(self.location.origin))return null;const n=self.document.head.querySelector(`meta[name="${t}"]`);return n&&n.getAttribute("content")||null}var E=w("cdnUrl")||P("runtime-host")||"https://cdn.ampproject.org",b=w("errorReportingUrl")||"https://us-central1-amp-error-reporting.cloudfunctions.net/r",y=w("betaErrorReportingUrl")||"https://us-central1-amp-error-reporting.cloudfunctions.net/r-beta",R="";function M(t){var n;return R||(R=(null===(n=t.AMP_CONFIG)||void 0===n?void 0:n.v)||"012301041800000"),R}function x(t,n){const r=n||_(t);return["1","actions","amp","amp4ads","amp4email"].includes(r.development)||!!t.AMP_DEV_MODE}var I=()=>{},T=(t,n)=>n.reduce(((t,n)=>`${t}&s[]=${S(n)}`),`https://log.amp.dev/?v=012301041800000&id=${encodeURIComponent(t)}`),S=t=>encodeURIComponent(String(l(t))),V=t=>parseInt(_(t).log,10);self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var $=self.__AMP_LOG,O=null;function N(){O=class{constructor(t,n,r=""){this.win=t,this.J=n,this.W=this.X(),this.B=r,this.Z=null,this.K=function(t){let n=!1,r=null,e=t;return(...t)=>(n||(r=e.apply(self,t),n=!0,e=null),r)}((()=>{t.fetch(`${E}/rtv/012301041800000/log-messages.simple.json`).then((t=>t.json()),I).then((t=>{t&&(this.Z=t)}))})),this.Y=this.assert.bind(this)}X(){var t;const{win:n}=this;return null!==(t=n.console)&&void 0!==t&&t.log&&0!=V(n)?this.tt():0}tt(t){return this.J(V(t),!1)}et(t,n,e){var i;if(n>this.W)return!1;const s=this.win.console,o=null!==(i={1:s.error,3:s.info,2:s.warn}[n])&&void 0!==i?i:s.log,u=this.nt(e),l=`[${t}]`;return r(u[0])?u[0]=l+" "+u[0]:u.unshift(l),o.apply(s,u),!0}fine(t,...n){this.et(t,4,n)}info(t,...n){this.et(t,3,n)}warn(t,...n){this.et(t,2,n)}error(t,...n){if(!this.et(t,1,n)){var r,e;const i=this.createError.apply(this,n);i.name=t||i.name,null===(r=(e=self).__AMP_REPORT_ERROR)||void 0===r||r.call(e,i)}}expectedError(t,...n){var r,e;this.et(t,1,n)||null===(r=(e=self).__AMP_REPORT_ERROR)||void 0===r||r.call(e,this.createExpectedError.apply(this,n))}createError(t){return this.ot(d.apply(null,arguments))}createExpectedError(t){return this.ot(v.apply(null,arguments))}ot(t){return t=a(t),this.B?t.message?-1==t.message.indexOf(this.B)&&(t.message+=this.B):t.message=this.B:c(t.message)&&(t.message=t.message.replace(u,"")),t}nt(n){return t(n[0])?this.rt(n[0]):n}rt(t){var n;const r=t.shift();return null!==(n=this.Z)&&void 0!==n&&n[r]?[this.Z[r]].concat(t):[`More info at ${T(r,t)}`]}assert(n,r,e){return t(r)?this.assert.apply(this,[n].concat(this.rt(r))):f.apply(null,[this.B].concat(Array.prototype.slice.call(arguments)))}assertElement(t,n){return function(t,n,r){return h(t,n,o(n),"Element expected",r)}(this.Y,t,n)}assertString(t,n){return function(t,n,e){return h(t,n,r(n),"String expected",e)}(this.Y,t,n)}assertNumber(t,n){return function(t,n,r){return h(t,n,"number"==typeof n,"Number expected",r)}(this.Y,t,n)}assertArray(n,r){return function(n,r,e){return h(n,r,t(r),"Array expected",e)}(this.Y,n,r)}assertBoolean(t,n){return function(t,n,r){return h(t,n,!!n===n,"Boolean expected",r)}(this.Y,t,n)}},C(),$.user||($.user=j(u)),function(t,n){return n}($.user.win,undefined)?$.userForEmbed||($.userForEmbed=j("​​​​")):$.user}function F(t,n){if(!O)throw new Error("failed to call initLogConstructor");return new O(self,t,n)}function j(t){return F(((t,n)=>n||t>=1?4:2),t)}function C(){return $.dev||($.dev=F((t=>t>=3?4:t>=2?3:0)))}function U(t,n,r,e,i,s,o,u,l,c,f){return t}var z,k="amp-",L="send-positions";function J(t,n,r={},e=null){const i=r;return i.type=t,i.sentinel=n,k+(e||"")+JSON.stringify(i)}function W(t,n,r,e){return{left:t,top:n,width:r,height:e,bottom:n+e,right:t+r,x:t,y:n}}function B(t){return W(Number(t.left),Number(t.top),Number(t.width),Number(t.height))}var D,G=["Webkit","webkit","Moz","moz","ms","O","o"];function H(t){const n=t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()));return G.some((t=>n.startsWith(t+"-")))?`-${n}`:n}function Z(t,n,r){if(n.startsWith("--"))return n;z||(z=s());let e=z[n];if(!e||r){if(e=n,void 0===t[n]){const r=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(n),i=function(t,n){for(let r=0;r<G.length;r++){const e=G[r]+n;if(void 0!==t[e])return e}return""}(t,r);void 0!==t[i]&&(e=i)}r||(z[n]=e)}return e}function q(t,n,r,e,i){const s=Z(t.style,n,i);if(!s)return;const o=e?r+e:r;t.style.setProperty(H(s),o)}function K(t,n){for(const r in n)q(t,r,n[r])}function X(t){return`${t}px`}function Q(t,n){return"number"==typeof t?n(t):t}function Y(t,n){for(let r=0;r<n.length;r++)q(t,n[r],null)}function tt(t,n,r){t.requestAnimationFrame((()=>{n.measure&&n.measure(r),n.mutate&&n.mutate(r)}))}function nt(t,n){return et(t=function(t){return t.__AMP_TOP||(t.__AMP_TOP=t)}(t),n)}function rt(t){return t.nodeType?(r=t,n=(r.ownerDocument||r).defaultView,nt(n,"ampdoc")).getAmpDoc(t):t;var n,r}function et(t,n){U(function(t,n){const r=t.__AMP_SERVICES&&t.__AMP_SERVICES[n];return!(!r||!r.ctor)}(t,n));const r=function(t){let n=t.__AMP_SERVICES;return n||(n=t.__AMP_SERVICES={}),n}(t)[n];return r.obj||(U(r.ctor),U(r.context),r.obj=new r.ctor(r.context),U(r.obj),r.context=null,r.resolve&&r.resolve(r.obj)),r.obj}var it,st=(new Set(["c","v","a","ad"]),t=>"string"==typeof t?function(t,n){return it||(it=self.document.createElement("a")),function(t,n,r){return t.href="",new URL(n,t.href)}(it,t)}(t):t);function ot(t){try{return!!t.location.href&&(t.test||!0)}catch(t){return!1}}var ut=[L],lt=!1,ct=self.__AMP_ERRORS||[];self.__AMP_ERRORS=ct;var ft=function(t){return(ft=function(t){const n=function(t){let n=0;return()=>{let t=Math.pow(1.5,n++);return t+=function(t,n){let r=t*(n=n||.3)*Math.random();return Math.random()>.5&&(r*=-1),r}(t),1e3*t}}();return t=>setTimeout(t,n())}())(t)};function ht(t,n){try{let r;if(t)if(void 0!==t.message)t=a(t),r=!0;else{const n=t;(t=new Error(function(t){try{return JSON.stringify(t)}catch(n){return String(t)}}(n))).origError=n}else t=new Error("Unknown error");if(t.reported)return t;if(t.reported=!0,t.messageArray){const n=function(t,n){for(let n=0;n<t.length;n++)if(null==(r=t[n])?void 0:r.tagName)return n;var r;return-1}(t.messageArray);n>-1&&(t.associatedElement=t.messageArray[n])}const e=n||t.associatedElement;if(e&&e.classList&&e.classList.add("i-amphtml-error"),self.console&&(c(t.message)||!t.expected)){const n=console.error||console.log;t.messageArray?n.apply(console,t.messageArray):e?n.call(console,t.message,e):n.call(console,t.message)}e&&e.dispatchCustomEventForTesting&&e.dispatchCustomEventForTesting("amp:error",t.message),at.call(self,void 0,void 0,void 0,void 0,t)}catch(t){setTimeout((function(){throw t}))}return t}function at(t,n,r,e,i){var s;!this||!this.document||i&&i.expected||(U((s=this.document).defaultView),lt||(lt=!0,function(t){K(t.body,{opacity:1,visibility:"visible","animation":"none"})}(s)));let o=!1;try{o=function(t){if(!t.document)return!1;const n=t.document.querySelectorAll("script[src]");for(let t=0;t<n.length;t++)if(r=n[t].src.toLowerCase(),!A.test(st(r).origin))return!0;var r;return!1}(self)}catch(t){}if(o&&Math.random()>.01)return;const l=function(t,n,r,e,i,s){t=function(t,n){return n&&(t=n.message?n.message:String(n)),t||(t="Unknown error"),t}(t,i);let o=!(!i||!i.expected);if(/_reported_/.test(t))return;if("CANCELLED"==t)return;const l=!(self&&self.window),f=Math.random();if((function(t){return-1!=t.indexOf("Failed to load:")}(t)||"Script error."==t||l)&&(o=!0,f>.001))return;const h=c(t);if(h&&f>.1)return;const a=Object.create(null);a.v=function(t){const n=t||self;return n.__AMP_MODE?n.__AMP_MODE:n.__AMP_MODE=function(t){return{localDev:!1,development:x(t,_(t)),esm:!0,test:!1,rtvVersion:M(t),ssrReady:!1}}(n)}().rtvVersion,a.noAmp=s?"1":"0",a.m=t.replace(u,""),a.a=h?"1":"0",a.ex=o?"1":"0",a.dw=l?"1":"0";let d="1p";var m,v;if(d="esm",a.esm="1",a.rt="esm",a.ca=null!==(v=self.AMP_CONFIG)&&void 0!==v&&v.canary?"1":"0",a.bt=(null===(m=self.AMP_CONFIG)||void 0===m?void 0:m.type)||"unknown",self.location.ancestorOrigins&&self.location.ancestorOrigins[0]&&(a.or=self.location.ancestorOrigins[0]),self.viewerState&&(a.vs=self.viewerState),self.parent&&self.parent!=self&&(a.iem="1"),self.AMP&&self.AMP.viewer){const t=self.AMP.viewer.getResolvedViewerUrl(),n=self.AMP.viewer.maybeGetMessagingOrigin();t&&(a.rvu=t),n&&(a.mso=n)}const p=[],g=self.__AMP__EXPERIMENT_TOGGLES||null;var w,A,P;for(const t in g){const n=g[t];p.push(`${t}=${n?"1":"0"}`)}return a.exps=p.join(","),i?(a.el=(null===(w=i.associatedElement)||void 0===w?void 0:w.tagName)||"u",i.args&&(a.args=JSON.stringify(i.args)),h||i.ignoreStack||!i.stack||(a.s=i.stack),i.message&&(i.message+=" _reported_")):(a.f=n||"",a.l=r||"",a.c=e||""),a.r=self.document?self.document.referrer:"",a.ae=ct.join(","),a.fr=self.location.originalHash||self.location.hash,"production"===a.bt&&(a.pt="1"),P=t,(A=ct).length>=25&&A.splice(0,A.length-25+1),A.push(P),a}(t,n,r,e,i,o);l&&ft((()=>{try{return function(t,n){return n.pt&&Math.random()<.9?D||(D=Promise.resolve(void 0)):function(t,n){const r=(t=>nt(t,"ampdoc"))(t);if(!r.isSingleDoc())return Promise.resolve(!1);const e=r.getSingleDoc();if(!e.getRootNode().documentElement.hasAttribute("report-errors-to-viewer"))return Promise.resolve(!1);const i=(s="viewer",et(function(t){const n=rt(t);return n.isSingleDoc()?n.win:n}(rt(e)),s));var s;return i.hasCapability("errorReporter")?i.isTrustedViewer().then((t=>{return!!t&&(i.sendMessage("error",{"m":(r=n).m,"a":r.a,"s":r.s,"el":r.el,"ex":r.ex,"v":r.v,"pt":r.pt}),!0);var r})):Promise.resolve(!1)}(t,n).then((t=>{if(!t){const t=new XMLHttpRequest;t.open("POST",Math.random()<.1?y:b,!0),t.send(JSON.stringify(n))}}))}(this,l).catch((()=>{}))}catch(t){}}))}var dt="ampInaboxPendingMessages",mt="ampInaboxIframes";new class{constructor(t){if(t.ampInaboxInitialized)return;var n;t.ampInaboxInitialized=!0,N(),n=ht,self.__AMP_REPORT_ERROR=n,t[mt]&&!Array.isArray(t[mt])&&(t[mt]=[]);const r=new class{constructor(t,n){const r=ot(t.top)?t.top:t;this.cn=n,this.xn=Object.create(null),this.In=function(t){return t.ampInaboxPositionObserver=t.ampInaboxPositionObserver||new class{constructor(t){this.i=t,this.$n=null,this.On=function(t){const n=t.document;return n.scrollingElement?n.scrollingElement:n.body&&(r=t.navigator.userAgent,/WebKit/i.test(r)&&!/Edge/i.test(r))?n.body:n.documentElement;var r}(this.i),this.Nn=null}observe(t,n){if(!this.$n){this.$n=new class{constructor(){this.Fn=null}add(t){return this.Fn||(this.Fn=[]),this.Fn.push(t),()=>{this.remove(t)}}remove(t){this.Fn&&function(t,n){const r=t.indexOf(n);-1!=r&&t.splice(r,1)}(this.Fn,t)}removeAll(){this.Fn&&(this.Fn.length=0)}fire(t){if(this.Fn)for(const n of this.Fn.slice())n(t)}getHandlerCount(){var t,n;return null!==(t=null===(n=this.Fn)||void 0===n?void 0:n.length)&&void 0!==t?t:0}};const t=function(t,n,r){let e=0,i=null;function s(r){i=null,e=t.setTimeout(o,100),n.apply(null,r)}function o(){e=0,i&&s(i)}return function(...t){e?i=t:s(t)}}(this.i,(()=>{this.Bt(),this.$n.fire()}));this.Bt(),this.i.addEventListener("scroll",t,!0),this.i.addEventListener("resize",t,!0)}return n(this.jn(t)),this.$n.add((()=>{n(this.jn(t))}))}Bt(){this.Nn=this.getViewportRect()}jn(t){return{"viewportRect":this.Nn,"targetRect":this.getTargetRect(t)}}getViewportRect(){const{On:t,i:n}=this,r=t.scrollLeft||n.pageXOffset,e=t.scrollTop||n.pageYOffset;return W(Math.round(r),Math.round(e),n.innerWidth,n.innerHeight)}getTargetRect(t){let n=B(t.getBoundingClientRect());for(let s=0,o=t.ownerDocument.defaultView;s<10&&o&&o!=this.i&&o!=this.i.top;s++,o=o.parent){const t=B(o.frameElement.getBoundingClientRect());r=n,e=t.left,i=t.top,n=0==e&&0==i||0==r.width&&0==r.height?r:W(r.left+e,r.top+i,r.width,r.height)}var r,e,i;return n}}(t),t.ampInaboxPositionObserver}(r),this.Cn=new class{constructor(){this.Un={}}listen(t,n){this.Un,this.Un[t]=n}fire(t,n,r){return t in this.Un&&this.Un[t].apply(n,r)}},this.zn=function(t){return t.ampInaboxFrameOverlayManager=t.ampInaboxFrameOverlayManager||new class{constructor(t){this.i=t,this.Ln=!1,this.Jn=!1,this.Wn=null,this.Bn()}Bn(){this.i.addEventListener("resize",(()=>this.onWindowResize()))}onWindowResize(){this.Ln&&(this.Jn=!0)}expandFrame(t,n){!function(t,n,r){tt(t,{measure(r){r.viewportSize={width:t.innerWidth,height:t.innerHeight},r.rect=B(n.getBoundingClientRect())},mutate(e){const{height:i,width:s}=e.viewportSize,o=W(0,0,s,i);var u;!function(t,n,r,e){const i=X(r.width/2-n.width/2-n.left),s=X(r.height/2-n.height/2-n.top);var o,u;K(t,{"position":"fixed","top":X(n.top),"right":X(r.width-(n.left+n.width)),"left":X(n.left),"bottom":X(r.height-(n.top+n.height)),"height":X(n.height),"width":X(n.width),"transition":"transform 150ms ease","transform":(o=i,u=s,null==u?`translate(${Q(o,X)})`:`translate(${Q(o,X)}, ${Q(u,X)})`),"margin":0})}(n,e.rect,e.viewportSize),function(t,n){const{style:r}=t;for(const t in n)r.setProperty(H(Z(r,t)),String(n[t]),"important")}(n,{"pointer-events":"none"}),u=()=>{tt(t,{mutate(){Y(n,["pointer-events"]),function(t){K(t,{"position":"fixed","z-index":1e3,"left":0,"right":0,"top":0,"bottom":0,"width":"100vw","height":"100vh","transition":null,"transform":null,"margin":0,"border":0})}(n),r(e.rect,o)}})},setTimeout(u,200)}},{})}(this.i,t,((t,r)=>{this.Ln=!0,this.Jn=!1,this.Wn=t,n(r)}))}collapseFrame(t,n){!function(t,n,r,e){tt(t,{mutate(){!function(t){Y(t,["position","z-index","left","right","top","bottom","width","height","margin","border"])}(n),r(),tt(t,{measure(){e(B(n.getBoundingClientRect()))}})}})}(this.i,t,(()=>{this.Ln=!1,this.Jn||n(this.Wn)}),(t=>{this.Wn=t,this.Jn&&n(this.Wn)}))}}(t),t.ampInaboxFrameOverlayManager}(r),this.Cn.listen(L,this.Dn),this.Cn.listen("full-overlay-frame",this.Gn),this.Cn.listen("cancel-full-overlay-frame",this.Hn)}processMessage(t){const n=function(t){if(!function(t){return"string"==typeof t&&t.startsWith(k)&&-1!=t.indexOf("{")}(t))return null;const n=t.indexOf("{");return function(t,n){try{return function(t){return JSON.parse(t)}(t)}catch(t){return null==n||n(t),null}}(t.substr(n),(n=>{!function(t){const n=d.apply(null,arguments);setTimeout((()=>{throw m(n),n}))}(new Error(`MESSAGING: Failed to parse message: ${t}\n${n.message}`))}))}(t.data);if(!n||!n.sentinel)return!1;const r=this.Zn(t.source,n.sentinel);if(!r)return!1;const e=r.iframe.dataset.ampAllowed;return-1!==(e?e.split(/\s*,\s*/):ut).indexOf(n.type)&&!!this.Cn.fire(n.type,this,[r.measurableFrame,n,t.source,t.origin])}Dn(t,n,r,e){const i=this.In.getViewportRect(),s=this.In.getTargetRect(t);return this.qn(n,r,{"viewportRect":i,"targetRect":s}),U(this.xn[n.sentinel]),this.xn[n.sentinel].observeUnregisterFn=this.xn[n.sentinel].observeUnregisterFn||this.In.observe(t,(t=>this.qn(n,r,t))),!0}qn(t,n,r){n.postMessage(J("position",t.sentinel,r),"*")}Gn(t,n,r,e){return this.zn.expandFrame(t,(t=>{r.postMessage(J("full-overlay-frame-response",n.sentinel,{"success":!0,"boxRect":t}),e)})),!0}Hn(t,n,r,e){return this.zn.collapseFrame(t,(t=>{r.postMessage(J("cancel-full-overlay-frame-response",n.sentinel,{"success":!0,"boxRect":t}),e)})),!0}Zn(t,n){if(this.xn[n])return this.xn[n];const r=this.getMeasureableFrame(t);if(!r)return null;const e=r.contentWindow;for(let t=0;t<this.cn.length;t++){const i=this.cn[t];for(let t=0,s=e;t<10;t++,s=s.parent){if(i.contentWindow==s)return this.xn[n]={iframe:i,measurableFrame:r},this.xn[n];if(s==window.top)break}}return null}getMeasureableFrame(t){if(!t)return null;let n;for(let r=0,e=t;r<10&&e!=e.top&&!ot(e);r++,n=e,e=e.parent);if(n){const t=n.parent.document.querySelectorAll("iframe");for(let r=0,e=t[r];r<t.length;r++,e=t[r])if(e.contentWindow==n)return e}return t.frameElement}unregisterIframe(t){const n=this.cn.indexOf(t);-1!=n&&this.cn.splice(n,1);for(const n in this.xn)this.xn[n].iframe==t&&(this.xn[n].observeUnregisterFn&&this.xn[n].observeUnregisterFn(),delete this.xn[n])}}(t,t[mt]);t.AMP=t.AMP||{},t.AMP.inaboxUnregisterIframe||(t.AMP.inaboxUnregisterIframe=r.unregisterIframe.bind(r));const e=t[dt],i=t=>{try{r.processMessage(t)}catch(n){C().error("inabox-host","Error processing inabox message",t,n)}};e&&Array.isArray(e)&&e.forEach((t=>{(function(t){return!(!t.source||!t.source.postMessage)})(t)&&i(t)})),t[dt]=[],t[dt].push=()=>{},t.addEventListener("message",i.bind(r))}}(self)})();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
//# sourceMappingURL=amp4ads-host-v0.mjs.map